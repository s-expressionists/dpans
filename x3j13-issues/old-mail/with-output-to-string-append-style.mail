*start*03718 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 29 MAR 88 21:41:34 PSTReceived: from labrea.Stanford.EDU by SAIL.Stanford.EDU with TCP; 29 Mar 88  21:39:01 PSTReceived: by labrea.Stanford.EDU; Tue, 29 Mar 88 21:37:36 PSTReceived: from bhopal.lucid.com by edsel id AA11804g; Tue, 29 Mar 88 21:32:48 PSTReceived: by bhopal id AA01840g; Tue, 29 Mar 88 21:32:59 PSTDate: Tue, 29 Mar 88 21:32:59 PSTFrom: Jon L White <edsel!jonl@labrea.Stanford.EDU>Message-Id: <8803300532.AA01840@bhopal.lucid.com>To: cl-cleanup@sail.stanford.eduSubject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)Issue:         WITH-OPEN-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonL	       Version 2, 29-Mar-88 JonL (fix typos; comments by Daniels)Problem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OPEN-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OUTPUT-TO-STRING to be like that under FORMAT.  That is, replace the first sentence of the next-to-last paragraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp implements CLtL.  The question is entirely moot for Symbolics since it is impossible to create a non-adjustable string, even upon demand.Adoption cost:Zilch.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with naive expectations about printing to strings.Esthetics:To quote The Great Quux: "Hey, come'on guys, this is FORMAT; thereis no esthetics".Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.The proposal is supported by by Andy Daniels of Xerox; and by JonL and other senior staff at Lucid.*start*03452 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 25 MAR 88 21:54:50 PSTReceived: from labrea.Stanford.EDU by SAIL.Stanford.EDU with TCP; 25 Mar 88  21:52:08 PSTReceived: by labrea.Stanford.EDU; Fri, 25 Mar 88 21:52:42 PSTReceived: from bhopal.lucid.com by edsel id AA25619g; Fri, 25 Mar 88 21:49:38 PSTReceived: by bhopal id AA00832g; Fri, 25 Mar 88 21:49:33 PSTDate: Fri, 25 Mar 88 21:49:33 PSTFrom: Jon L White <edsel!jonl@labrea.Stanford.EDU>Message-Id: <8803260549.AA00832@bhopal.lucid.com>To: cl-cleanup@sail.stanford.eduSubject: Issue: WITH-OPEN-STRING-APPEND-STYLEIssue:         WITH-OPEN-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonLProblem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTUPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTUPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OPEN-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OPEN-STRING-APPEND-STYLE to be likethat under FORMAT.  That is, replace the first sentence of the next-to-lastparagraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  The question is entirely moot for Symbolics since it is impossible to create a non-adjustable string, even upon demand.Adoption cost:Zilch.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with current practice.Estehtics:To quote The Great Quux: "Hey, come'on guys, this is FORMAT; thereis no esthetics".Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.*start*00710 00024 US From: MASINTER.PADate: 29-Mar-88 21:56:26 PSTSubject: Re: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)In-reply-to: edsel!jonl@labrea.Stanford.EDU's message of Tue, 29 Mar 88 21:32:59 PST, <8803300532.AA01840@bhopal.lucid.com>To: masinterJon L White <edsel!jonl@labrea.Stanford.EDU>cc: cl-cleanup@sail.stanford.EDUA couple of nits: cleanup proposals do not propose changes to the documentation, but to the programming language that CLtL describes. So the proposal isn't to "change the documentation". You say "to quote the great Quux", but I doubt that the phrase in quotes is in fact the wording that he chose. Finally, there is a repeated word in in the last sentence.*start*00966 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 29 MAR 88 11:55:01 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 29 Mar 88  11:53:38 PSTReceived: from Cabernet.ms by ArpaGateway.ms ; 29 MAR 88 11:47:52 PSTDate: 29 Mar 88 11:47 PSTFrom: Daniels.paSubject: Re: Issue: WITH-OPEN-STRING-APPEND-STYLEIn-reply-to: Jon L White <edsel!jonl@labrea.Stanford.EDU>'s message of Fri, 25 Mar 88 21:49:33 PSTTo: edsel!jonl@labrea.Stanford.EDUcc: cl-cleanup@sail.stanford.eduMessage-ID: <880329-114752-1361@Xerox>In the first paragraph under "Proposal" WITH-OPEN-STRING-APPEND-STYLE should beWITH-OUTUPUT-TO-STRING.Xerox Common Lisp implements CLtL for WITH-OUTPUT-TO-STRING, but treats FORMATconsistently, i.e., doesn't complain if you FORMAT off the end of afill-pointered, non-adjustable string.I support this proposal.		-- Andy. --*start*01717 00024 US Return-Path: <Moon@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by Xerox.COM ; 23 MAY 88 15:36:16 PDTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 409029; Mon 23-May-88 18:35:47 EDTDate: Mon, 23 May 88 18:35 EDTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Re: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)To: masinter.pa, edsel!jonl@labrea.Stanford.EDUcc: cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: <880523-130454-5166@Xerox>Message-ID: <19880523223541.1.MOON@EUPHRATES.SCRC.Symbolics.COM>Line-fold: No    Date: 23 May 88 13:04 PDT    From: masinter.pa@Xerox.COM    Two nits:A more serious nit is that the issue is misnamed since there isno Common Lisp facility named "with-open-string".  The intendedname was probably "with-output-to-string-append-style".    Aesthetics:    This is a bit silly, but I'm wondering if you are reconstructing QUUX's quote    accurately. The quote I can find (from format-colon-uparrow-scope), is    ``Absolutely none.  We're talking about FORMAT here.'' -- Guy L. Steele Jr. In    any case, the proposal is to change WITH-OPEN-STRING, not FORMAT. I'd be happier    if it said that this was a minor improvement to the aesthetics of the language    because it made it more consistent.I agree with your last sentence, also I think the Steele quotation was neverrelevant to this issue.    Proposal format:    The preferred format is to use "Cost to Users" and "Cost to Implementors" rather    than "Adoption Cost" and "Implementation Cost" because people were confused by    them.Agreed.*start*01297 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAY 88 13:06:53 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 23 May 88  13:05:50 PDTReceived: from Cabernet.ms by ArpaGateway.ms ; 23 MAY 88 13:04:54 PDTDate: 23 May 88 13:04 PDTFrom: masinter.paSubject: Re: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)In-reply-to: Jon L White <edsel!jonl@labrea.Stanford.EDU>'s message of Tue, 29 Mar 88 21:32:59 PSTTo: edsel!jonl@labrea.Stanford.EDUcc: cl-cleanup@sail.stanford.eduMessage-ID: <880523-130454-5166@Xerox>Two nits:Aesthetics:This is a bit silly, but I'm wondering if you are reconstructing QUUX's quoteaccurately. The quote I can find (from format-colon-uparrow-scope), is``Absolutely none.  We're talking about FORMAT here.'' -- Guy L. Steele Jr. Inany case, the proposal is to change WITH-OPEN-STRING, not FORMAT. I'd be happierif it said that this was a minor improvement to the aesthetics of the languagebecause it made it more consistent.Proposal format:The preferred format is to use "Cost to Users" and "Cost to Implementors" ratherthan "Adoption Cost" and "Implementation Cost" because people were confused bythem.Thanks,Larry*start*01092 00024 USaReturn-Path: <edsel!jonl@labrea.stanford.edu>Received: from labrea.stanford.edu by Xerox.COM ; 23 MAY 88 16:46:22 PDTReceived: by labrea.stanford.edu; Mon, 23 May 88 16:46:18 PDTReceived: from bhopal.lucid.com by edsel id AA02280g; Mon, 23 May 88 16:36:48 PDTReceived: by bhopal id AA01992g; Mon, 23 May 88 16:40:40 PDTDate: Mon, 23 May 88 16:40:40 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805232340.AA01992@bhopal.lucid.com>To: masinter.paCc: cl-cleanup@sail.stanford.eduIn-Reply-To: masinter.pa@Xerox.COM's message of 23 May 88 13:04 PDT <880523-130454-5166@Xerox>Subject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)re: nitsSure, flush any item under "Aesthetics:" -- I don't see it as being importanton this issue.As to "Adoption Cost" versus "Cost to Users" - I have been following ahardcopy you passed out some time ago at one of the X3J13 meetings, titled"Format for proposals to 'clean up' Common Lisp".  Since this is now outdated,perhaps you want to pass out new hardcopies at the next meeting-- JonL --*start*03913 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAY 88 22:13:33 PDTReceived: from labrea.stanford.edu by SAIL.Stanford.EDU with TCP; 23 May 88  22:08:09 PDTReceived: by labrea.stanford.edu; Mon, 23 May 88 22:08:34 PDTReceived: from bhopal.lucid.com by edsel id AA03676g; Mon, 23 May 88 21:58:27 PDTReceived: by bhopal id AA04386g; Mon, 23 May 88 22:02:19 PDTDate: Mon, 23 May 88 22:02:19 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805240502.AA04386@bhopal.lucid.com>To: cl-cleanup@sail.stanford.eduSubject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)Issue:         WITH-OUTPUT-TO-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonL	       Version 2, 29-Mar-88 JonL (fix typos; comments by Daniels)	       Version 3, 23-May-88 JonL (fix nits raised by Masinter)	       Version 4, 23-May-88 JonL (change issue name -- only 1 proposal)Problem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OUTPUT-TO-STRING to be like that under FORMAT.  That is, replace the first sentence of the next-to-last paragraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp implements CLtL.  The question is entirely moot for Symbolics since it is impossible to create a non-adjustable string, even upon demand.Cost to Implementors:Very small.Cost to Users:Virtually none.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with naive expectations about printing to strings.Aesthetics:Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.The proposal is supported by by Andy Daniels of Xerox; and by JonL and other senior staff at Lucid.-------------------------------------------------------------------------------*start*01606 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 24 MAY 88 10:23:26 PDTReceived: from JASPER.SCRC.Symbolics.COM ([128.81.41.58]) by SAIL.Stanford.EDU with TCP; 24 May 88  10:20:19 PDTReceived: from EUPHRATES.SCRC.Symbolics.COM by JASPER.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 191842; Tue 24-May-88 13:20:07 EDTDate: Tue, 24 May 88 13:20 EDTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)To: cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: <8805240502.AA04386@bhopal.lucid.com>Message-ID: <19880524172010.9.MOON@EUPHRATES.SCRC.Symbolics.COM>I approve of WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND.One comment:    Current Practice:    VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlier    versions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp     implements CLtL.  The question is entirely moot for Symbolics since     it is impossible to create a non-adjustable string, even upon demand.The last sentence is not really true.  For example, the followingsignals an error, rather than inconspicuously dropping characters:(setq s1 (make-string 10))(setq s2 (make-array 10 :displaced-to s1 :element-type 'string-char))(adjustable-array-p s2) => nil(with-output-to-string (s s2 :index i)  (loop repeat 20 do (write-char #\c s)))I would change the current practice to say Symbolics Genera 7.2implements the proposal (I did not check Symbolics CLOE).*start*01767 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 28 MAY 88 10:55:27 PDTReceived: from Riverside.SCRC.Symbolics.COM (SCRC-RIVERSIDE.ARPA) by SAIL.Stanford.EDU with TCP; 28 May 88  10:53:27 PDTReceived: from PEWEE.SCRC.Symbolics.COM by Riverside.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 260679; Sat 28-May-88 13:13:35 EDTDate: Sat, 28 May 88 13:13 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)To: edsel!jonl@LaBrea.Stanford.EDUcc: Cl-Cleanup@SAIL.Stanford.EDUIn-Reply-To: <8805240502.AA04386@bhopal.lucid.com>Message-ID: <880528131327.2.KMP@PEWEE.SCRC.Symbolics.COM>    Date: Mon, 23 May 88 22:02:19 PDT    From: Jon L White <edsel!jonl@labrea.stanford.edu>    Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)    Proposal (WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):    Change the documentation of WITH-OUTPUT-TO-STRING to be like that under     FORMAT.  That is, replace the first sentence of the next-to-last paragraph     on CLtL p331 by:      "If *string* is specified, it must be a string with a fill pointer;        the output is incrementally appended to the string (as if by use of       VECTOR-PUSH-EXTEND)."    ...Maybe I'm just confused, but aren't the fill-pointer and adjustable featuresorthogonal? It's my belief that you can create a non-adjustable array with afill-pointer. Don't you want to say that it must be an adjustable array ratherthan (or perhaps in addition to) that it must be a fill pointer?Aside from this (real or perceived) confusion over the wording, I have noobjection to this proposal.*start*01244 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 28 MAY 88 17:54:21 PDTReceived: from labrea.stanford.edu by SAIL.Stanford.EDU with TCP; 28 May 88  17:52:38 PDTReceived: by labrea.stanford.edu; Sat, 28 May 88 17:52:57 PDTReceived: from bhopal.lucid.com by edsel id AA29060g; Sat, 28 May 88 17:25:22 PDTReceived: by bhopal id AA12479g; Sat, 28 May 88 17:29:34 PDTDate: Sat, 28 May 88 17:29:34 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805290029.AA12479@bhopal.lucid.com>To: KMP@stony-brook.scrc.symbolics.comCc: Cl-Cleanup@sail.stanford.eduIn-Reply-To: Kent M Pitman's message of Sat, 28 May 88 13:13 EDT <880528131327.2.KMP@PEWEE.SCRC.Symbolics.COM>Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)re: Don't you want to say that it must be an adjustable array rather    than (or perhaps in addition to) that it must be a fill pointer?No.  It's perfectly acceptable to use VECTOR-PUSH-EXTEND with a non-adjustablearray.  It's the error-signalling property of VECTOR-PUSH-EXTEND, as opposedto the "dropping on the floor" of VECTOR-PUSH, that motivated this proposal.-- JonL --*start*01129 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 31 MAY 88 08:58:20 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 31 May 88  08:56:06 PDTReceived: from PEWEE.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 412400; Tue 31-May-88 11:55:46 EDTDate: Tue, 31 May 88 11:55 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 4)To: edsel!jonl@LaBrea.Stanford.EDUcc: CL-Cleanup@SAIL.Stanford.EDUIn-Reply-To: <8805290029.AA12479@bhopal.lucid.com>Message-ID: <880531115529.9.KMP@PEWEE.SCRC.Symbolics.COM>    Date: Sat, 28 May 88 17:29:34 PDT    From: Jon L White <edsel!jonl@labrea.stanford.edu>    No.  It's perfectly acceptable to use VECTOR-PUSH-EXTEND with a non-adjustable    array.  It's the error-signalling property of VECTOR-PUSH-EXTEND, as opposed    to the "dropping on the floor" of VECTOR-PUSH, that motivated this proposal.Ok. I'm sold.*start*01515 00024 US Return-Path: <gls@Think.COM>Received: from Think.COM by Xerox.COM ; 24 MAY 88 07:05:59 PDTReturn-Path: <gls@Think.COM>Received: from kali.think.com by Think.COM; Tue, 24 May 88 10:03:14 EDTReceived: by kali.think.com; Tue, 24 May 88 10:03:11 EDTDate: Tue, 24 May 88 10:03:11 EDTFrom: gls@Think.COMMessage-Id: <8805241403.AA10491@kali.think.com>To: Moon@stony-brook.scrc.symbolics.comCc: masinter.pa, edsel!jonl@labrea.stanford.edu, cl-cleanup@sail.stanford.eduIn-Reply-To: David A. Moon's message of Mon, 23 May 88 18:35 EDT <19880523223541.1.MOON@EUPHRATES.SCRC.Symbolics.COM>Subject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)   Date: Mon, 23 May 88 18:35 EDT   From: David A. Moon <Moon@stony-brook.scrc.symbolics.com>   ...       Date: 23 May 88 13:04 PDT       From: masinter.pa@Xerox.COM       ...       This is a bit silly, but I'm wondering if you are reconstructing       QUUX's quote accurately. The quote I can find (from       format-colon-uparrow-scope), is ``Absolutely none.  We're talking       about FORMAT here.'' -- Guy L. Steele Jr. In any case, the proposal       is to change WITH-OPEN-STRING, not FORMAT. I'd be happier if it said       that this was a minor improvement to the aesthetics of the language       because it made it more consistent.   I agree with your last sentence, also I think the Steele quotation was never   relevant to this issue.   ..."Relevance:  Absolutely none.  We're talking about Steele here."--Quux*start*01414 00024 US Return-Path: <edsel!jonl@labrea.stanford.edu>Received: from labrea.stanford.edu by Xerox.COM ; 23 MAY 88 18:19:52 PDTReceived: by labrea.stanford.edu; Mon, 23 May 88 18:19:49 PDTReceived: from bhopal.lucid.com by edsel id AA02589g; Mon, 23 May 88 17:27:44 PDTReceived: by bhopal id AA02354g; Mon, 23 May 88 17:31:34 PDTDate: Mon, 23 May 88 17:31:34 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805240031.AA02354@bhopal.lucid.com>To: Moon@stony-brook.scrc.symbolics.comCc: masinter.pa, cl-cleanup@sail.stanford.eduIn-Reply-To: David A. Moon's message of Mon, 23 May 88 18:35 EDT <19880523223541.1.MOON@EUPHRATES.SCRC.Symbolics.COM>Subject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)re: A more serious nit is that the issue is misnamed since there is    no Common Lisp facility named "with-open-string".  The intended    name was probably "with-output-to-string-append-style".No.  This issue isn't just about with-output-to-string, but is an attemptto unify FORMAT and WITH-OUTPUT-TO-STRING.  The fact that there is onlyone proposal -- to alter with-output-to-string -- doesn't change that,since I anticipated the possibility of a proposal to change format instead.re: [Aesthetics:] ... also I think the Steele quotation [about FORMAT] was     never relevant to this issue.Maybe you missed the humor in Guy's original quote?-- JonL --*start*01543 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAY 88 18:21:15 PDTReceived: from labrea.stanford.edu by SAIL.Stanford.EDU with TCP; 23 May 88  18:19:44 PDTReceived: by labrea.stanford.edu; Mon, 23 May 88 18:20:06 PDTReceived: from bhopal.lucid.com by edsel id AA02589g; Mon, 23 May 88 17:27:44 PDTReceived: by bhopal id AA02354g; Mon, 23 May 88 17:31:34 PDTDate: Mon, 23 May 88 17:31:34 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805240031.AA02354@bhopal.lucid.com>To: Moon@stony-brook.scrc.symbolics.comCc: masinter.pa, cl-cleanup@sail.stanford.eduIn-Reply-To: David A. Moon's message of Mon, 23 May 88 18:35 EDT <19880523223541.1.MOON@EUPHRATES.SCRC.Symbolics.COM>Subject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)re: A more serious nit is that the issue is misnamed since there is    no Common Lisp facility named "with-open-string".  The intended    name was probably "with-output-to-string-append-style".No.  This issue isn't just about with-output-to-string, but is an attemptto unify FORMAT and WITH-OUTPUT-TO-STRING.  The fact that there is onlyone proposal -- to alter with-output-to-string -- doesn't change that,since I anticipated the possibility of a proposal to change format instead.re: [Aesthetics:] ... also I think the Steele quotation [about FORMAT] was     never relevant to this issue.Maybe you missed the humor in Guy's original quote?-- JonL --*start*03744 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAY 88 18:45:58 PDTReceived: from labrea.stanford.edu by SAIL.Stanford.EDU with TCP; 23 May 88  18:44:57 PDTReceived: by labrea.stanford.edu; Mon, 23 May 88 18:45:21 PDTReceived: from bhopal.lucid.com by edsel id AA02644g; Mon, 23 May 88 17:37:03 PDTReceived: by bhopal id AA02408g; Mon, 23 May 88 17:40:54 PDTDate: Mon, 23 May 88 17:40:54 PDTFrom: Jon L White <edsel!jonl@labrea.stanford.edu>Message-Id: <8805240040.AA02408@bhopal.lucid.com>To: cl-cleanup@sail.stanford.eduSubject: Issue: WITH-OPEN-STRING-APPEND-STYLE (Version 2)Issue:         WITH-OPEN-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonL	       Version 2, 29-Mar-88 JonL (fix typos; comments by Daniels)	       Version 3, 23-May-88 JonL (fix nits raised by Masinter)Problem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OPEN-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OUTPUT-TO-STRING to be like that under FORMAT.  That is, replace the first sentence of the next-to-last paragraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp implements CLtL.  The question is entirely moot for Symbolics since it is impossible to create a non-adjustable string, even upon demand.Cost to Implementors:Very small.Cost to Users:Virtually none.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with naive expectations about printing to strings.Aesthetics:Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.The proposal is supported by by Andy Daniels of Xerox; and by JonL and other senior staff at Lucid.*start*04045 00024 US Date:  7 Jun 88 16:14 PDTFrom: Masinter.paTo: cl-cleanup@sail.stanford.educc: MasinterSubject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 5)line-fold: noI changed current practice as per Moon, added a remark to the discussion (from JonL's message), and  removed the endorsement (there's some risk in saying that 3 people endorse it, lest it be misconstrued that the rest of us don't.)This one will go  out tomorrow afternoon.Issue:         WITH-OUTPUT-TO-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonL	       Version 2, 29-Mar-88 JonL (fix typos; comments by Daniels)	       Version 3, 23-May-88 JonL (fix nits raised by Masinter)	       Version 4, 23-May-88 JonL (change issue name -- only 1 proposal)	       Version 5,  7-Jun-88 Masinter (more nits)Problem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OUTPUT-TO-STRING to be like that under FORMAT.  That is, replace the first sentence of the next-to-last paragraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp implements CLtL.  Symbolics Genera 7.2 implements the proposal.Cost to Implementors:Very small.Cost to Users:Virtually none.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with naive expectations about printing to strings.Aesthetics:Minor impact.Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.It's perfectly acceptable to use VECTOR-PUSH-EXTEND with a non-adjustablearray.  It's the error-signalling property of VECTOR-PUSH-EXTEND, as opposedto the "dropping on the floor" of VECTOR-PUSH, that motivated this proposal.        TITAN 
         TITAN 
          
TIMESROMAN 
          ¿              $                                                      [       B      P              ç                           Ó                                   
       …                                 b zº*start*03802 00024 US Date:  8 Jun 88 20:57 PDTFrom: Masinter.paTo: x3j13@sail.stanford.educc: Masinterreply-to: cl-cleanup@Sail.stanford.eduSubject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 5)line-fold: noIssue:         WITH-OUTPUT-TO-STRING-APPEND-STYLEReferences:    CLtL, pages 331, 386Category:      CLARIFICATIONEdit history:  Version 1, 25-Mar-88 JonL	       Version 2, 29-Mar-88 JonL (fix typos; comments by Daniels)	       Version 3, 23-May-88 JonL (fix nits raised by Masinter)	       Version 4, 23-May-88 JonL (change issue name -- only 1 proposal)	       Version 5,  7-Jun-88 Masinter (more nits)Problem description:CLtL p386 says that FORMATting to a fill-pointer'd string should addcharacters "as if by use of VECTOR-PUSH-EXTEND"; but CLtL p331 says thatWITH-OUTPUT-TO-STRING will work "as if using VECTOR-PUSH-EXTEND if thestring is adjustable, and otherwise as if using VECTOR-PUSH".  It's veryunlikely that the original authors of these parts intended differingsemantics for these two cases.  Furthermore, the semantics forWITH-OUTPUT-TO-STRING permit the inconspicuous loss of characterswritten to the string, since VECTOR-PUSH will just "drop on the floor"any characters that would go beyond the end.Proposal (WITH-OUTPUT-TO-STRING-APPEND-STYLE:VECTOR-PUSH-EXTEND):Change the documentation of WITH-OUTPUT-TO-STRING to be like that under FORMAT.  That is, replace the first sentence of the next-to-last paragraph on CLtL p331 by:  "If *string* is specified, it must be a string with a fill pointer;    the output is incrementally appended to the string (as if by use of   VECTOR-PUSH-EXTEND)."Test Case:     (let ((str (make-array 4 :element-type 'string-char :fill-pointer 0)))      (with-output-to-string (s str) (princ "You Luz, Bunkie!" s))      str)CLtL behaviour will return "You "; proposed behaviour will signal an error.Rationale:It's unlikely that the mention of VECTOR-PUSH in CLtL p331 was intendedto suggest that characters could be quietly "dropped on the floor".  Inany case, there is no practical or theoretical reason to make FORMAT andWITH-OUTPUT-TO-STRING act differently on non-adjustable strings.Current Practice:VaxLisp 2.2 and Lucid 3.0 implement the proposal; Lucid 2.1 and earlierversions implement CLtL.  For WITH-OUTPUT-TO-STRING, Xerox Common Lisp implements CLtL.  Symbolics Genera 7.2 implements the proposal.Cost to Implementors:Very small.Cost to Users:Virtually none.Benefits:Less special-casing in the semantics of "printing" to strings.More conformity with naive expectations about printing to strings.Aesthetics:Minor impact.Discussion:Implementations may want to actually call VECTOR-PUSH, rather thanVECTOR-PUSH-EXTEND, on non-adjustable string in order to test theresult -- nil means an overflow of the total length of the string; thus they may signal an error more directly related to the problem,rather than permitting VECTOR-PUSH-EXTEND to complain about a non-adjustable array.  But either way, the semantics is still that ofVECTOR-PUSH-EXTEND: when you get to the end of the string, adjustable strings are extended, and non-adjustable strings cause error signals.It's perfectly acceptable to use VECTOR-PUSH-EXTEND with a non-adjustablearray.  It's the error-signalling property of VECTOR-PUSH-EXTEND, as opposedto the "dropping on the floor" of VECTOR-PUSH, that motivated this proposal.        TITAN 
          TITAN 
         
TIMESROMAN 
           Ì              $                                                      [       B      P              ç                           Ó                                   
       …                                 o zº*start*00802 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 19:42:06 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  18:07:54 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 476149; Thu 13-Oct-88 19:36:54 EDTDate: Thu, 13 Oct 88 19:36 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: WITH-OUTPUT-TO-STRING-APPEND-STYLE (Version 5)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013193646.8.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting...X3J13 meeting: This issue was voted upon and ACCEPTED.