*start*02211 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 07 SEP 88 14:24:13 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 7 Sep 88  14:23:37 PDTReceived: from Salvador.ms by ArpaGateway.ms ; 07 SEP 88 14:01:32 PDTDate: 7 Sep 88 14:01 PDTFrom: masinter.paSubject: Issue: GET-MACRO-CHARACTER-READTABLETo: cl-cleanup@sail.stanford.eduMessage-ID: <880907-140132-13143@Xerox>     ----- Begin Forwarded Messages -----Return-Path: <@RELAY.CS.NET:yuasa%tutics.tut.junet@UTOKYO-RELAY.CSNET>Received: from CLI.COM ([10.8.0.62]) by Xerox.COM ; 07 SEP 88 11:54:15 PDTReceived: by CLI.COM (4.0/1); Wed, 7 Sep 88 13:41:37 CDTReceived: from relay2.cs.net by RELAY.CS.NET id ah10518; 7 Sep 88 13:12 EDTReceived: from utokyo-relay by RELAY.CS.NET id bu14361; 7 Sep 88 12:47 EDTReceived: by ccut.cc.u-tokyo.junet (5.51/6.3Junet-1.0/CSNET-JUNET)	id AA21863; Wed, 7 Sep 88 14:28:15 JSTReceived: by nttlab.ntt.jp (3.2/6.2NTT.h) with TCP; Wed, 7 Sep 88 12:29:01 JSTReceived: by tutics.tut.junet (ver3.3/6.2J/systemV)        id AA23442; Wed,  7 Sep 88 12:19:46 jstMessage-Id: <8809071219.AA23442@tutics.tut.junet>Date: Wed,  7 Sep 88 12:19:46 jstFrom: Taiichi Yuasa <yuasa%tutics.tut.junet@utokyo-relay.CSNET>To: kcl@CLI.COMSubject: get-macro-characterKCL does not accept NIL as the readtable argument for GET-MACRO-CHARACTERand GET-DISPATCH-MACRO-CHARACTER.  This means the only way in KCL to getinformation on macro/dispatch-macro characters is to make a copy of thestandard readtable and send it to these functions.Although CLtL does not explicitly specify these functions should accept NILfor standard readtable, some examples in CLtL do not work in KCL.To fix the "bug", replace the statement	check_type_readtable(&rdtbl);in the definition of the C functions get_macro_character and get_dispatch_macro_character in file c/read.d with	if (rdtbl == Cnil)		rdtbl = standard_readtable;	else		check_type_readtable(&rdtbl);This bug fix was suggested by Cesar Quiroz on this mailing list.Thanks Cesar.-- Taiichi     ----- End Forwarded Messages -----*start*03416 00024 USfOriginator: Common-Lisp-mailer%SAIL.Stanford:EDU:XeroxDate: 19 Jul 88 13:35Subject: Question about readtable null argumentsFrom: quiroz%cs.rochester:EDU:XeroxTo: common-lisp%sail.stanford:EDU:XeroxReturn-Path: <Common-Lisp-mailer@SAIL.Stanford.EDU>Redistributed: Xerox-Common-Lisp^.xReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 19 JUL 88 13:35:16 PDTReceived: from cayuga.cs.rochester.edu (CS.ROCHESTER.EDU) by SAIL.Stanford.EDU with TCP; 19 Jul 88  12:56:32 PDTReceived: by cayuga.cs.rochester.edu (5.52/j) id AA07817; Tue, 19 Jul 88 15:55:40 EDTReceived: from loopback by lesath.cs.rochester.edu (3.2/j) id AA03377; Tue, 19 Jul 88 15:55:30 EDTMessage-Id: <8807191955.AA03377@lesath.cs.rochester.edu>Original-Date: Tue, 19 Jul 88 15:55:20 -0400I just noticed a certain ambiguity (What else is new? :-) in CLtL thatI would like to get clarified.In 22.1.5, p 361, the definitions of `copy-readtable' and of`set-syntax-from-char' establish a convention that a NIL readtableargument that is used as source for a copy, refers to the "standardCommon Lisp readtable".  (This is slightly irregular, as in othercontexts an omitted argument is the same as a null argument, but Idigress.)No such guarantee is given for other readtable arguments that happento be simultaneously optional and from-.  There are (at least) twoother functions where this convention would be useful:get-[dispatch-]macro-character both take an optional readtable fromwhich they copy some information.  Both default to *readtable*.  Butnothing is said about explicitly giving them NIL.In spite of not giving an explicit guarantee (OR DID I MISS IT?),Steele seems to believe that the same convention applies.  In p 378,he uses (get-macro-character #\) nil) with the comment "...Giving }the same definition as the standard definition of the character )has...", which makes me think he expects the "NIL means standard"convention to apply.I checked three implementations.  Two of them (Symbolics and Xerox)seem to take the benign interpretation, making Steele's example of p378 work.  KCl, on the other hand, sent me to the debugger:      >(get-macro-character #\) nil)      Error: NIL is not of type READTABLE.      Error signalled by GET-MACRO-CHARACTER.      Broken at GET-MACRO-CHARACTER.  Type :H for Help.      >>So, I'd appreciate hearing from the Lisp community, especially fromimplementors:1-  Is there in CLtL an explicit statement of the convention thatoptional readtable arguments, in from- usage, supplied with anexplicit NIL, should mean the standard readtable?2-  If not, is it nonetheless common to take that interpretation?In your version of Common Lisp, (get-macro-character #\) nil)    2.a.    Produces the macro function (perhaps nil) associated            with ) in the standard readtable.    2.b.    Errors out.    2.c.    Does something else (like checking the current readtable).3-  If your implementation takes the benign approach, what standard    functions have been implemented to show this behavior?  (I guess    the get-... ones are the only ones, I'd like to know if I missed    another.)I will summarize the responses.  Thanks,Cesar QuirozPS. I have patches (trivial) to make KCl behave nicely to theexample in p. 378.  If you are interested, I can send them to you, orpost them if there is any interest.*start*00796 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 15:06:43 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  14:53:13 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 475969; Thu 13-Oct-88 17:51:50 EDTDate: Thu, 13 Oct 88 17:51 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: GET-MACRO-CHARACTER-READTABLE (no proposal)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013175142.1.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting...Cleanup meeting: JonL volunteered to write this up.*start*01325 00024 US Date: 14 Nov 88 14:41 PSTFrom: masinter.paSubject: [Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>: Issue: GET-MACRO-CHARACTER-READTABLE (no proposal)]To: JonL@lucid.comcc: masinterJonL:Is Kent's note incorrect? I didn't think this was in the list of issues you said you were working on.  (I filed a copy of your message in the mail folder for each issue mentioned, I thought, and I didn't find it here -- did I just misfile it?)     ----- Begin Forwarded Messages -----Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 15:06:43 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  14:53:13 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 475969; Thu 13-Oct-88 17:51:50 EDTDate: Thu, 13 Oct 88 17:51 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: GET-MACRO-CHARACTER-READTABLE (no proposal)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013175142.1.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting...Cleanup meeting: JonL volunteered to write this up.     ----- End Forwarded Messages -----*start*05875 00024 US Date: 14 Nov 88 15:56 PSTFrom: masinter.paSubject: Issue: GET-MACRO-CHARACTER-READTABLE (no proposal)To: Jon L White <jonl@lucid.com>cc: masinter.pa     ----- Begin Forwarded Messages -----Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 07 SEP 88 14:24:13 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 7 Sep 88  14:23:37 PDTReceived: from Salvador.ms by ArpaGateway.ms ; 07 SEP 88 14:01:32 PDTDate: 7 Sep 88 14:01 PDTFrom: masinter.paSubject: Issue: GET-MACRO-CHARACTER-READTABLETo: cl-cleanup@sail.stanford.eduMessage-ID: <880907-140132-13143@Xerox>     ----- Begin Forwarded Messages -----Return-Path: <@RELAY.CS.NET:yuasa%tutics.tut.junet@UTOKYO-RELAY.CSNET>Received: from CLI.COM ([10.8.0.62]) by Xerox.COM ; 07 SEP 88 11:54:15 PDTReceived: by CLI.COM (4.0/1); Wed, 7 Sep 88 13:41:37 CDTReceived: from relay2.cs.net by RELAY.CS.NET id ah10518; 7 Sep 88 13:12 EDTReceived: from utokyo-relay by RELAY.CS.NET id bu14361; 7 Sep 88 12:47 EDTReceived: by ccut.cc.u-tokyo.junet (5.51/6.3Junet-1.0/CSNET-JUNET)	id AA21863; Wed, 7 Sep 88 14:28:15 JSTReceived: by nttlab.ntt.jp (3.2/6.2NTT.h) with TCP; Wed, 7 Sep 88 12:29:01 JSTReceived: by tutics.tut.junet (ver3.3/6.2J/systemV)        id AA23442; Wed,  7 Sep 88 12:19:46 jstMessage-Id: <8809071219.AA23442@tutics.tut.junet>Date: Wed,  7 Sep 88 12:19:46 jstFrom: Taiichi Yuasa <yuasa%tutics.tut.junet@utokyo-relay.CSNET>To: kcl@CLI.COMSubject: get-macro-characterKCL does not accept NIL as the readtable argument for GET-MACRO-CHARACTERand GET-DISPATCH-MACRO-CHARACTER.  This means the only way in KCL to getinformation on macro/dispatch-macro characters is to make a copy of thestandard readtable and send it to these functions.Although CLtL does not explicitly specify these functions should accept NILfor standard readtable, some examples in CLtL do not work in KCL.To fix the "bug", replace the statement	check_type_readtable(&rdtbl);in the definition of the C functions get_macro_character and get_dispatch_macro_character in file c/read.d with	if (rdtbl == Cnil)		rdtbl = standard_readtable;	else		check_type_readtable(&rdtbl);This bug fix was suggested by Cesar Quiroz on this mailing list.Thanks Cesar.-- Taiichi     ----- End Forwarded Messages -----     ----- Next Message -----Originator: Common-Lisp-mailer%SAIL.Stanford:EDU:XeroxDate: 19 Jul 88 13:35Subject: Question about readtable null argumentsFrom: quiroz%cs.rochester:EDU:XeroxTo: common-lisp%sail.stanford:EDU:XeroxReturn-Path: <Common-Lisp-mailer@SAIL.Stanford.EDU>Redistributed: Xerox-Common-Lisp^.xReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 19 JUL 88 13:35:16 PDTReceived: from cayuga.cs.rochester.edu (CS.ROCHESTER.EDU) by SAIL.Stanford.EDU with TCP; 19 Jul 88  12:56:32 PDTReceived: by cayuga.cs.rochester.edu (5.52/j) id AA07817; Tue, 19 Jul 88 15:55:40 EDTReceived: from loopback by lesath.cs.rochester.edu (3.2/j) id AA03377; Tue, 19 Jul 88 15:55:30 EDTMessage-Id: <8807191955.AA03377@lesath.cs.rochester.edu>Original-Date: Tue, 19 Jul 88 15:55:20 -0400I just noticed a certain ambiguity (What else is new? :-) in CLtL thatI would like to get clarified.In 22.1.5, p 361, the definitions of `copy-readtable' and of`set-syntax-from-char' establish a convention that a NIL readtableargument that is used as source for a copy, refers to the "standardCommon Lisp readtable".  (This is slightly irregular, as in othercontexts an omitted argument is the same as a null argument, but Idigress.)No such guarantee is given for other readtable arguments that happento be simultaneously optional and from-.  There are (at least) twoother functions where this convention would be useful:get-[dispatch-]macro-character both take an optional readtable fromwhich they copy some information.  Both default to *readtable*.  Butnothing is said about explicitly giving them NIL.In spite of not giving an explicit guarantee (OR DID I MISS IT?),Steele seems to believe that the same convention applies.  In p 378,he uses (get-macro-character #\) nil) with the comment "...Giving }the same definition as the standard definition of the character )has...", which makes me think he expects the "NIL means standard"convention to apply.I checked three implementations.  Two of them (Symbolics and Xerox)seem to take the benign interpretation, making Steele's example of p378 work.  KCl, on the other hand, sent me to the debugger:      >(get-macro-character #\) nil)      Error: NIL is not of type READTABLE.      Error signalled by GET-MACRO-CHARACTER.      Broken at GET-MACRO-CHARACTER.  Type :H for Help.      >>So, I'd appreciate hearing from the Lisp community, especially fromimplementors:1-  Is there in CLtL an explicit statement of the convention thatoptional readtable arguments, in from- usage, supplied with anexplicit NIL, should mean the standard readtable?2-  If not, is it nonetheless common to take that interpretation?In your version of Common Lisp, (get-macro-character #\) nil)    2.a.    Produces the macro function (perhaps nil) associated            with ) in the standard readtable.    2.b.    Errors out.    2.c.    Does something else (like checking the current readtable).3-  If your implementation takes the benign approach, what standard    functions have been implemented to show this behavior?  (I guess    the get-... ones are the only ones, I'd like to know if I missed    another.)I will summarize the responses.  Thanks,Cesar QuirozPS. I have patches (trivial) to make KCl behave nicely to theexample in p. 378.  If you are interested, I can send them to you, orpost them if there is any interest.     ----- End Forwarded Messages -----*start*03584 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 16 NOV 88 15:24:40 PSTReceived: from lucid.com by SAIL.Stanford.EDU with TCP; 16 Nov 88  15:21:57 PSTReceived: from bhopal ([192.9.200.13]) by heavens-gate.lucid.com id AA00896g; Wed, 16 Nov 88 15:20:29 PSTReceived: by bhopal id AA04741g; Wed, 16 Nov 88 15:18:38 PSTDate: Wed, 16 Nov 88 15:18:38 PSTFrom: Jon L White <jonl@lucid.com>Message-Id: <8811162318.AA04741@bhopal>To: cl-cleanup@sail.stanford.eduSubject: Issue: GET-MACRO-CHARACTER-READTABLE (version 1)Issue: GET-MACRO-CHARACTER-READTABLE (version 1)References:  CLtL p.361: COPY-READTABLE, SET-SYNTAX-FROM-CHAR, and                         GET-MACRO-CHARACTER             CLtL p.364: GET-DISPATCH-MACRO-CHARACTER,              CLtL p.378: Example in middle of pageCategory:    CLARIFICATION/CHANGEEdit history:  Version 1, 16-Nov-88, by JonLProblem description:The 'readtable' argument to GET-DISPATCH-MACRO-CHARACTER and toGET-MACRO-CHARACTER must be of type READTABLE; this may have been simplyan oversight, since it makes more sense for it to refer to values fromthe standard readtable.  Both COPY-READTABLE and SET-SYNTAX-FROM-CHARexplicitly say that a NIL in the 'from-readtable' argument refers to thestandard readtable.  Also, an example in the middle of the page, CLtLp.378, supplies a NIL to GET-MACRO-CHARACTER, and is clearly intendingto access the standard readtable values.Proposal (GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD)Specify that the 'readtable' argument to GET-DISPATCH-MACRO-CHARACTERand to GET-MACRO-CHARACTER mean the same thing it does for COPY-READTABLE,and SET-SYNTAX-FROM-CHAR; namely a reference to the standard readtable.  Thus (GET-MACRO-CHARACTER <char> NIL) would be equivalent to (GET-MACRO-CHARACTER <char> (COPY-READTABLE)), but without consing.Test Cases:(let ((standard-rt (copy-readtable))      (chars '(#\* #\= #\| #\A #\  #\( #\# #\1)))  ;; Test Case 1  (dolist (char chars)    (assert (eq (get-macro-character char nil)                (get-macro-character char standard-rt))            () "Lose on character ~C" char))  ;; Test Case 2  (dolist (char chars)    (assert (eq (get-dispatch-macro-character #\# char nil)                (get-dispatch-macro-character #\# char standard-rt))            () "Lose on #\# dispatch character ~C" char))  ;; Test Case 3  (assert (eq (get-dispatch-macro-character #\# #\A nil)              (get-dispatch-macro-character #\# #\a nil))          () "Lose on #\# dispatch character ~C" char) )Rationale:Probably was the original intent; somebody wants it; also see "Esthetics".Current practice:Symbolics and Xerox have already implemented the proposal; Lucid, VAXLISP,and KCL stuck to the more rigid interpretation.Cost to Implementors:Trivial.Cost to Users:None.Cost of non-adoption:Minor worry about porting between implementations that support thegeneralization and those that don't; minor worry about consing whencalling (COPY-READTABLE) to get at standard readtable semantics.Performance impact:See "Cost of non-adoption".Benefits:See "Cost of non-adoption".Esthetics:Increases parallel design among similar readtable functions.Discussion:This question was raised in the Common Lisp mailing last summer:    Date: 19 Jul 88 13:35    Subject: Question about readtable null arguments    From: quiroz%cs.rochester:EDU:Xerox    To: common-lisp%sail.stanford:EDU:Xerox*start*03661 00024 US Date:  8 Dec 88 11:10 PSTSender: masinter.paTo: x3j13@sail.stanford.eduSubject: Issue: GET-MACRO-CHARACTER-READTABLE (Version 2)From: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.educc: masinterline-fold: noIssue: 	GET-MACRO-CHARACTER-READTABLEReferences:  CLtL p.361: COPY-READTABLE, SET-SYNTAX-FROM-CHAR, and                         GET-MACRO-CHARACTER             CLtL p.364: GET-DISPATCH-MACRO-CHARACTER,              CLtL p.378: Example in middle of pageCategory:    CLARIFICATION/CHANGEEdit history:  Version 1, 16-Nov-88, by JonL               Version 2,  8-Dec-88, by Masinter (fix typo)Problem description:The 'readtable' argument to GET-DISPATCH-MACRO-CHARACTER and toGET-MACRO-CHARACTER must be of type READTABLE, without mention ofwhat happens when NIL is supplied. This may have been simplyan oversight, since it makes more sense for it to refer to values fromthe standard readtable.  Both COPY-READTABLE and SET-SYNTAX-FROM-CHARexplicitly say that a NIL in the 'from-readtable' argument refers to thestandard readtable.  Also, an example in the middle of the page, CLtLp.378, supplies a NIL to GET-MACRO-CHARACTER, and is clearly intendingto access the standard readtable values.Proposal (GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD)Specify that a NIL readtable argument to GET-DISPATCH-MACRO-CHARACTERand to GET-MACRO-CHARACTER mean the same thing it does for COPY-READTABLE,and SET-SYNTAX-FROM-CHAR; namely a reference to the standard readtable.  Thus (GET-MACRO-CHARACTER <char> NIL) would be equivalent to (GET-MACRO-CHARACTER <char> (COPY-READTABLE)), but without consing.Test Cases:(let ((standard-rt (copy-readtable))      (chars '(#\* #\= #\| #\A #\  #\( #\# #\1)))  ;; Test Case 1  (dolist (char chars)    (assert (eq (get-macro-character char nil)                (get-macro-character char standard-rt))            () "Lose on character ~C" char))  ;; Test Case 2  (dolist (char chars)    (assert (eq (get-dispatch-macro-character #\# char nil)                (get-dispatch-macro-character #\# char standard-rt))            () "Lose on #\# dispatch character ~C" char))  ;; Test Case 3  (assert (eq (get-dispatch-macro-character #\# #\A nil)              (get-dispatch-macro-character #\# #\a nil))          () "Lose on #\# dispatch character ~C" char) )Rationale:Probably was the original intent; somebody wants it; also see "Esthetics".Current practice:Symbolics and Xerox have already implemented the proposal; Lucid, VAXLISP,and KCL stuck to the more rigid interpretation.Cost to Implementors:Trivial.Cost to Users:None.Cost of non-adoption:Minor worry about porting between implementations that support thegeneralization and those that don't; minor worry about consing whencalling (COPY-READTABLE) to get at standard readtable semantics.Performance impact:See "Cost of non-adoption".Benefits:See "Cost of non-adoption".Esthetics:Increases parallel design among similar readtable functions.Discussion:This question was raised in the Common Lisp mailing last summer:    Date: 19 Jul 88 13:35    Subject: Question about readtable null arguments    From: quiroz%cs.rochester:EDU:Xerox    To: common-lisp%sail.stanford:EDU:Xerox        TITAN 
         TITAN 
           Z              ~                     Ï                            \             N       6      _             ¶              M              ~                                          Ê                     
                     ?              å      Í "zº*start*03625 00024 US Return-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 08 DEC 88 11:44:03 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 8 Dec 88  11:29:34 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 08 DEC 88 11:10:31 PSTDate: 8 Dec 88 11:10 PSTSender: masinter.paTo: x3j13@sail.stanford.eduSubject: Issue: GET-MACRO-CHARACTER-READTABLE (Version 2)From: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.educc: masinter.paline-fold: noMessage-ID: <881208-111031-3954@Xerox>!Issue: 	GET-MACRO-CHARACTER-READTABLEReferences:  CLtL p.361: COPY-READTABLE, SET-SYNTAX-FROM-CHAR, and                         GET-MACRO-CHARACTER             CLtL p.364: GET-DISPATCH-MACRO-CHARACTER,              CLtL p.378: Example in middle of pageCategory:    CLARIFICATION/CHANGEEdit history:  Version 1, 16-Nov-88, by JonL               Version 2,  8-Dec-88, by Masinter (fix typo)Problem description:The 'readtable' argument to GET-DISPATCH-MACRO-CHARACTER and toGET-MACRO-CHARACTER must be of type READTABLE, without mention ofwhat happens when NIL is supplied. This may have been simplyan oversight, since it makes more sense for it to refer to values fromthe standard readtable.  Both COPY-READTABLE and SET-SYNTAX-FROM-CHARexplicitly say that a NIL in the 'from-readtable' argument refers to thestandard readtable.  Also, an example in the middle of the page, CLtLp.378, supplies a NIL to GET-MACRO-CHARACTER, and is clearly intendingto access the standard readtable values.Proposal (GET-MACRO-CHARACTER-READTABLE:NIL-STANDARD)Specify that a NIL readtable argument to GET-DISPATCH-MACRO-CHARACTERand to GET-MACRO-CHARACTER mean the same thing it does for COPY-READTABLE,and SET-SYNTAX-FROM-CHAR; namely a reference to the standard readtable.  Thus (GET-MACRO-CHARACTER <char> NIL) would be equivalent to (GET-MACRO-CHARACTER <char> (COPY-READTABLE)), but without consing.Test Cases:(let ((standard-rt (copy-readtable))      (chars '(#\* #\= #\| #\A #\  #\( #\# #\1)))  ;; Test Case 1  (dolist (char chars)    (assert (eq (get-macro-character char nil)                (get-macro-character char standard-rt))            () "Lose on character ~C" char))  ;; Test Case 2  (dolist (char chars)    (assert (eq (get-dispatch-macro-character #\# char nil)                (get-dispatch-macro-character #\# char standard-rt))            () "Lose on #\# dispatch character ~C" char))  ;; Test Case 3  (assert (eq (get-dispatch-macro-character #\# #\A nil)              (get-dispatch-macro-character #\# #\a nil))          () "Lose on #\# dispatch character ~C" char) )Rationale:Probably was the original intent; somebody wants it; also see "Esthetics".Current practice:Symbolics and Xerox have already implemented the proposal; Lucid, VAXLISP,and KCL stuck to the more rigid interpretation.Cost to Implementors:Trivial.Cost to Users:None.Cost of non-adoption:Minor worry about porting between implementations that support thegeneralization and those that don't; minor worry about consing whencalling (COPY-READTABLE) to get at standard readtable semantics.Performance impact:See "Cost of non-adoption".Benefits:See "Cost of non-adoption".Esthetics:Increases parallel design among similar readtable functions.Discussion:This question was raised in the Common Lisp mailing last summer:    Date: 19 Jul 88 13:35    Subject: Question about readtable null arguments    From: quiroz%cs.rochester:EDU:Xerox    To: common-lisp%sail.stanford:EDU:Xerox*start*01054 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 02 JAN 89 22:48:12 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 2 Jan 89  22:48:03 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 514178; Tue 3-Jan-89 01:46:49 ESTDate: Tue, 3 Jan 89 01:46 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: GET-MACRO-CHARACTER-READTABLE (Version 2)To: masinter.pacc: cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: <881208-111031-3954@Xerox>Message-ID: <890103014612.3.KMP@BOBOLINK.SCRC.Symbolics.COM>I have a problem with version 2 because I don't think anything requiresget-dispatch-macro-character to return the same function on successivecalls even with the same readtable (provided the functions returned areequivalent). As such, the example is inappropriate where it uses ASSERTand EQ.*start*01556 00024 US Return-Path: <jonl@lucid.com>Received: from lucid.com ([192.26.25.1]) by Xerox.COM ; 04 JAN 89 02:05:20 PSTReceived: from bhopal ([192.9.200.13]) by heavens-gate.lucid.com id AA04049g; Wed, 4 Jan 89 02:02:39 PSTReceived: by bhopal id AA01559g; Wed, 4 Jan 89 02:04:51 PSTDate: Wed, 4 Jan 89 02:04:51 PSTFrom: Jon L White <jonl@lucid.com>Message-Id: <8901041004.AA01559@bhopal>To: KMP@STONY-BROOK.SCRC.Symbolics.COMCc: masinter.pa, cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: Kent M Pitman's message of Tue, 3 Jan 89 01:46 EST <890103014612.3.KMP@BOBOLINK.SCRC.Symbolics.COM>Subject: Issue: GET-MACRO-CHARACTER-READTABLE (Version 2)re: I have a problem with version 2 because I don't think anything requires    get-dispatch-macro-character to return the same function on successive    calls even with the same readtable (provided the functions returned are    equivalent). As such, the example is inappropriate where it uses ASSERT    and EQ.There is no "Examples" section in this proposal -- perhaps you meant"Test Case"?  As such, it's clear that the test case can only beapplied to implementations where GET-MACRO-CHARACTER returns the same thing between two successive calls which don't modify the table.  It would be hard to imagine writing a test case where you had to solve the Turing Machine Halting problem first.  Determining whether two function objects (i.e. functions as returned by GET-MACRO-CHARACTER) define the same mathematical function is equivalent to the Halting problem.-- JonL --