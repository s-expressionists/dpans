*start*04353 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 21 AUG 88 15:21:10 PDTReceived: from DST.BOLTZ.CS.CMU.EDU by SAIL.Stanford.EDU with TCP; 21 Aug 88  15:20:43 PDTReceived: from DST.BOLTZ.CS.CMU.EDU by DST.BOLTZ.CS.CMU.EDU; 21 Aug 88 18:18:08 EDTTo: cl-cleanup@sail.stanford.educc: fahlman@cs.cmu.eduReply-To: Dave.Touretzky@cs.cmu.eduSubject: new item: RANGE-OF-COUNT-KEYWORDDate: Sun, 21 Aug 88 18:18:00 EDTMessage-ID: <6305.588205080@DST.BOLTZ.CS.CMU.EDU>From: Dave.Touretzky@B.GP.CS.CMU.EDUThe Problem: CLtL is overly vague about legal values for the :COUNT keyword.  It saysthat the keyword specifies "how many occurrences of the item should beaffected" (e.g., for REMOVE, it's the maximum number of items to remove).If the value is NIL, it means "all occurrences".  CLtL doesn't sayexplicitly that the value of :COUNT must be an integer, nor does it saywhat to do for negative values.Current Practice: CMU Common Lisp and KCL behave differently when given a negative fixnumfor the :COUNT keyword.  CMU Common Lisp treats any value other than anon-negative fixnum (e.g., values like -2, or 1.0) as if it were NIL.  KCLtreats negative fixnums as equivalent to zero for lists, but does somethingbizarre for vectors (it pads them with n blanks or NILs, where -n is thevalue of the :count keyword keyword.)Proposal RANGE-OF-COUNT-KEYWORD:RESTRICT-TO-INTEGERS  Add language to CLtL specifying that the only legal values for :COUNTare integers and NIL.Rationale: Restricting :COUNT to integers most likely reflects CLtL's originalintent.  Similar functions that accept numeric args, like NTH, explicitlylimit them to integers (CLtL, p. 265).  The proposal simply makes thisexplicit for the :COUNT keyword.Proposal RANGE-OF-COUNT-KEYWORD:TREAT-NEGATIVE-LIKE-ZERO  Require functions that accept a :COUNT keyword to treat negative valuesas equivalent to zero.Rationale: The proposed treatment of negative values is consistent with the currentwording of CLtL, which says (p. 253, for REMOVE) "if more than :countelements satisfy the test, then of these elements only the leftmost areremoved, as many as specified by :count."  Of course, you can't remove -3items from a sequence, but for that matter you can't remove 3 items from asequence of length 2, either.  It is implicitly understood that "as manyas" really means "no more than" as far as :COUNT is concerned. The proposal also has the advantage of freeing the user from having to doan explicit check for negative numbers when the value of :COUNT is computedby some complex expression.  Example:  (defun leave-at-most (n item sequence &key (from-end t))    (remove item sequence       :count (- (count item sequence) n)      :from-end from-end))  (leave-at-most 2 #\a "bananas")  ==>  "banans"  (leave-at-most 2 #\s "bananas")  ==>  "bananas"Alternatives: Fahlman suggests declaring "it is an error" for the value of :COUNT to benegative.  This has the advantage of making all current implementations'behavior legal, no matter how bizarre.  The disadvantages are that thiswill be counterintuitive for beginners; it is less in keeping with thespirit of the present wording of CLtL; and it will make functions such asLEAVE-AT-MOST a little more complex, by requiring the user to throw a (MAX0 ...) expression around the value of :COUNT.Other things to consider: In the past there has been some argument about what SUBSEQ should do whengiven positions greater than the length of the sequence.  Currently it "isan error" to specify positions less than zero or greater than the length ofthe sequence.  I don't think the same should apply to the :COUNT keyword.The inputs to SUBSEQ are ordinal numbers: they specify positions, likearray subscripts.  The value of :COUNT is not an ordinal, it is an upperbound on the size of the set of affected items (which is a cardinalnumber).Cost of the change:  nonzero, but clearly trivial.  Given the currentwording of CLtL, no code can legally depend on the behavior of sequencefunctions given negative values for :COUNT.  In practice it's unlikelythat many programs presently depend on one behavior or the other; if theydo then they're already non-portable.*start*01058 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 25 AUG 88 17:21:35 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 25 Aug 88  17:21:01 PDTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 450864; Thu 25-Aug-88 20:19:38 EDTDate: Thu, 25 Aug 88 20:19 EDTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: RANGE-OF-COUNT-KEYWORD (Version 2)To: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: Dave.Touretzky@CS.CMU.EDU, Scott.Fahlman@B.GP.CS.CMU.EDU, CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <880822113935.2.KMP@GRYPHON.SCRC.Symbolics.COM>Message-ID: <19880826001946.1.MOON@EUPHRATES.SCRC.Symbolics.COM>I approve of RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER.  It's interestingthat Genera fails with a negative count for lists, but not for vectors,I'll get that added to the test suite.*start*00990 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 19 SEP 88 12:25:13 PDTReceived: from decwrl.dec.com by SAIL.Stanford.EDU with TCP; 19 Sep 88  12:24:32 PDTReceived: by decwrl.dec.com (5.54.5/4.7.34)	id AA15206; Mon, 19 Sep 88 12:23:09 PDTDate: Mon, 19 Sep 88 12:23:09 PDTMessage-Id: <8809191923.AA15206@decwrl.dec.com>From: vanroggen%aitg.DEC@decwrl.dec.comTo: cl-cleanup@sail.stanford.eduSubject: Issue: RANGE-OF-COUNT-KEYWORDAfter asking both implementors and users within DEC, I got quite avariety of opinions.  However, I believe the plurality was in favorof treating a negative :count value as an error.  [Allowing onlyNIL or integers was just fine, of course.]So even though I personally prefer the proposal as written, I think Ishould support a slightly different version which defines negativevalues of :COUNT to be in error.			---Walter*start*07948 00024 US Return-Path: <KMP@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM ([128.81.41.144]) by Xerox.COM ; 08 OCT 88 21:13:37 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 473455; Sun 9-Oct-88 00:13:54 EDTReceived: from GRYPHON.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 449450; Mon 22-Aug-88 11:40:06 EDTDate: Mon, 22 Aug 88 11:39 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: RANGE-OF-COUNT-KEYWORD (Version 2)To: Dave.Touretzky@CS.CMU.EDUcc: Scott.Fahlman@B.GP.CS.CMU.EDU, CL-Cleanup@SAIL.Stanford.EDU, KMP@STONY-BROOK.SCRC.Symbolics.COMIn-Reply-To: Your messageReferences: <5787.588152756@DST.BOLTZ.CS.CMU.EDU>,            The message of 21 Aug 88 15:36 EDT from Scott.Fahlman@B.GP.CS.CMU.EDUMessage-ID: <880822113935.2.KMP@GRYPHON.SCRC.Symbolics.COM>Resent-To: Masinter.PAResent-From: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Resent-Date: Sun, 9 Oct 88 00:13 EDTResent-Message-ID: <881009001339.6.KMP@BOBOLINK.SCRC.Symbolics.COM>Your proposal had a few oddities... - The proposal named RESTRICT-TO-INTEGERS permitted NIL. - The two proposals were orthogonal, and I wanted to vote for both.   If it were to be broken into two proposals, they should be   Fahlman's proposal (negatives are an error) and the merger of the   two you proposed. - The proposal was not in the standard format.For these reasons, I rewrote your proposal into a format I could vote on.Hope you don't mind.----------Issue:        RANGE-OF-COUNT-KEYWORDReferences:   :COUNT (p247), REMOVE[-xxx] (p253), DELETE[-xxx] (p254),	      [N]SUBSTITUTE[-xxx] (pp255-256)Category:     CLARIFICATIONEdit history: 21-Aug-88, Version 1 by Dave Touretzky	      22-Aug-88, Version 2 by PitmanStatus:	      For Internal DiscussionProblem Description: CLtL is overly vague about legal values for the :COUNT keyword parameters to builtin functions such as the sequence functions. It says that the keyword ``limits the number of elements [affected]''. Implementations have varied in their interpretation of this phrase, however. CLtL p247 specifies that if the :COUNT parameter to functions such as REMOVE and DELETE ``is NIL or is not supplied, all matching items are affected.'' Because of the placement of this requirement outside of the description of the functions affected, some implementations have overlooked this requirement and had to be  changed later.  CLtL doesn't say explicitly that the value of :COUNT must be an integer, nor does it say what to do for negative values. The fact that reasonable implementations disagree on some of the details make this an obvious candidate for cleanup.Proposal (RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER): Clarify that for the functions   REMOVE	REMOVE-IF	REMOVE-IF-NOT   DELETE	DELETE-IF	DELETE-IF-NOT   SUBSTITUTE	SUBSTITUTE-IF	SUBSTITUTE-IF-NOT   NSUBSTITUTE	NSUBSTITUTE-IF	NSUBSTITUTE-IF-NOT the following restrictions on the :COUNT keyword parameter exist:   * The value of this parameter must be NIL or an integer.   * Using a negative integer value is functionally equivalent to     using a value of zero.Test Case:  #1: (REMOVE 'A '(A B A B) :COUNT  0)   => (A B A B)  #2: (REMOVE 'A '(A B A B) :COUNT -3)   => (A B A B)  #3: (REMOVE 'A '(A B A B) :COUNT NIL)  => (B B)  #4: (REMOVE 'A '(A B A B) :COUNT  1.0) is an error.  #5: (REMOVE 'A '(A B A B) :COUNT 'FOO) is an error.Rationale: Disallowing non-integer numbers is probably the original intent and is consistent with other functions such as NTH (p265) which accept count-like arguments that are explicitly required to integers. This restriction would presumably permit better optimizations in low-safety mode on stock hardware. Allowing NIL to be equivalent to no value allows a simplified flow of control in some situations. For example, one can write  (DEFUN MYDEL (ITEM &OPTIONAL COUNT)    (DELETE ITEM *MYLIST* :COUNT COUNT)) where otherwise it might be necessary to write something like  (DEFUN MYDEL (ITEM &OPTIONAL (COUNT NIL COUNT-P))    (IF COUNT-P        (DELETE ITEM *MYLIST* :COUNT COUNT)        (DELETE ITEM *MYLIST*))) Allowing negative numbers frees users from having to do an explicit check for negative numbers when the value of :COUNT is computed by some complicated expression. For example:  (DEFUN LEAVE-AT-MOST (N ITEM SEQUENCE &KEY (FROM-END T))    (REMOVE ITEM SEQUENCE       :COUNT (PRINT (- (COUNT ITEM SEQUENCE) N))      :FROM-END FROM-END))  (LEAVE-AT-MOST 2 #\A "BANANAS")  ==>  "BANANS"  (LEAVE-AT-MOST 2 #\S "BANANAS")  ==>  "BANANAS"Current Practice: [Note: Pitman didn't try these examples in KCL or CMU Common Lisp. He's  working from data in Touretzky's last draft of this proposal, so someone  from those camps might want to test the assertions made here.] #1: All correct implementations presumably return (A B A B).     This value is consisent with this proposal. #2: Symbolics Cloe returns (A B A B).     KCL returns (A B A B) for lists.     This value is forced by this proposal.     Symbolics Genera and CMU Common Lisp return (B B).     KCL does something bizarre for vectors (``pads with n blanks or      NILs, where -n is the value of the :count keyword parameter'',      says Touretzky.)     These implementations would have to change. #3: All correct implementations presumably return (B B).     This value is consisent with this proposal.     Some implementations have been known to signal a wrong type     argument error in the past, but have presumably been fixed. #4: Symbolics Genera and Symbolics Cloe return (B A B).     CMU Common Lisp returns (B B).     These behaviors are consistent with this proposal.   #5: Symbolics Cloe and Symbolics Genera signal an error.     CMU Common Lisp returns (A B A B).     These behaviors are consistent with this proposal.Cost to Implementors:  Some implementations would have to change. These functions are typically  heavily optimized by compilers. Not only source code, but also compiler  optimizers and perhaps even microcode or hardware might have to be  modified to fully accomodate this change, so it might be quite expensive.Cost to Users:  None for Common Lisp users. This change is an upward compatible  clarification of standard practice.Cost of Non-Adoption:  The behavior of these functions when given degenerate keyword values would  be unintuitive. In many such cases, considerable additional user code must  be written to watch for and avoid creating such situations.Benefits:  More compact, more intuitive, and more portable code.Aesthetics:  This change improves language aesthetics.Discussion:  Fahlman suggests declaring "it is an error" for the value of :COUNT to be  negative.  This has the advantage of making all current implementations'  behavior legal, no matter how bizarre.  The disadvantages are that this  will be counterintuitive for beginners; it is less in keeping with the  spirit of the present wording of CLtL; and it will make functions such as  LEAVE-AT-MOST a little more complex, by requiring the user to throw a   (MAX 0 ...) expression around the value of :COUNT.   In the past there has been some argument about what SUBSEQ should do when  given positions greater than the length of the sequence.  Currently it   "is an error" to specify positions less than zero or greater than the  length of the sequence.  Touretzky doesn't think the same should apply to  the :COUNT keyword. The inputs to SUBSEQ are ordinal numbers: they specify  positions, like array subscripts.  The value of :COUNT is not an ordinal,  it is an upper bound on the size of the set of affected items (which is  a cardinal number).   Pitman supports this proposal. [Hopefully Touretzky supports it, too?]*start*00900 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 18:11:12 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  18:04:33 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 476099; Thu 13-Oct-88 19:00:37 EDTDate: Thu, 13 Oct 88 19:00 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: RANGE-OF-COUNT-KEYWORD (Version 3)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013190029.4.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting...Cleanup meeting: Consistency with FORMAT-NEGATIVE-PARAMETERS. Maybe merge and/or change sense to make negative an error. KMP will reconsider and make new writeup.*start*06852 00024 USfReturn-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 14 OCT 88 14:44:50 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 14 Oct 88  14:26:15 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 476697; Fri 14-Oct-88 17:26:16 EDTDate: Fri, 14 Oct 88 17:26 EDTFrom: CL-Cleanup@SAIL.Stanford.EDUSender: KMP@STONY-BROOK.SCRC.Symbolics.COMSubject: Issue: RANGE-OF-COUNT-KEYWORD (Version 3)To: X3J13@SAIL.Stanford.EDUSupersedes: <881009001850.7.KMP@BOBOLINK.SCRC.Symbolics.COM>Comments: Retransmission of failed mail.Message-ID: <881014172603.4.KMP@BOBOLINK.SCRC.Symbolics.COM>Issue:        RANGE-OF-COUNT-KEYWORDReferences:   :COUNT (p247), REMOVE[-xxx] (p253), DELETE[-xxx] (p254),	      [N]SUBSTITUTE[-xxx] (pp255-256)Category:     CLARIFICATIONEdit history: 21-Aug-88, Version 1 by Dave Touretzky	      22-Aug-88, Version 2 by Pitman	      09-Oct-88, Version 3 by PitmanStatus:	      For Internal DiscussionProblem Description: CLtL is overly vague about legal values for the :COUNT keyword parameters to builtin functions such as the sequence functions. It says that the keyword ``limits the number of elements [affected]''. Implementations have varied in their interpretation of this phrase, however. CLtL p247 specifies that if the :COUNT parameter to functions such as REMOVE and DELETE ``is NIL or is not supplied, all matching items are affected.'' Because of the placement of this requirement outside of the description of the functions affected, some implementations have overlooked this requirement and had to be  changed later.  CLtL doesn't say explicitly that the value of :COUNT must be an integer, nor does it say what to do for negative values. The fact that reasonable implementations disagree on some of the details make this an obvious candidate for cleanup.Proposal (RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER): Clarify that for the functions   REMOVE	REMOVE-IF	REMOVE-IF-NOT   DELETE	DELETE-IF	DELETE-IF-NOT   SUBSTITUTE	SUBSTITUTE-IF	SUBSTITUTE-IF-NOT   NSUBSTITUTE	NSUBSTITUTE-IF	NSUBSTITUTE-IF-NOT the following restrictions on the :COUNT keyword parameter exist:   * The value of this parameter must be NIL or an integer.   * Using a negative integer value is functionally equivalent to     using a value of zero.Test Case:  #1: (REMOVE 'A '(A B A B) :COUNT  0)   => (A B A B)  #2: (REMOVE 'A '(A B A B) :COUNT -3)   => (A B A B)  #3: (REMOVE 'A '(A B A B) :COUNT NIL)  => (B B)  #4: (REMOVE 'A '(A B A B) :COUNT  1.0) is an error.  #5: (REMOVE 'A '(A B A B) :COUNT 'FOO) is an error.Rationale: Disallowing non-integer numbers is probably the original intent and is consistent with other functions such as NTH (p265) which accept count-like arguments that are explicitly required to integers. This restriction would presumably permit better optimizations in low-safety mode on stock hardware. Allowing NIL to be equivalent to no value allows a simplified flow of control in some situations. For example, one can write  (DEFUN MYDEL (ITEM &OPTIONAL COUNT)    (DELETE ITEM *MYLIST* :COUNT COUNT)) where otherwise it might be necessary to write something like  (DEFUN MYDEL (ITEM &OPTIONAL (COUNT NIL COUNT-P))    (IF COUNT-P        (DELETE ITEM *MYLIST* :COUNT COUNT)        (DELETE ITEM *MYLIST*))) Allowing negative numbers frees users from having to do an explicit check for negative numbers when the value of :COUNT is computed by some complicated expression. For example:  (DEFUN LEAVE-AT-MOST (N ITEM SEQUENCE &KEY (FROM-END T))    (REMOVE ITEM SEQUENCE       :COUNT (PRINT (- (COUNT ITEM SEQUENCE) N))      :FROM-END FROM-END))  (LEAVE-AT-MOST 2 #\A "BANANAS")  ==>  "BANANS"  (LEAVE-AT-MOST 2 #\S "BANANAS")  ==>  "BANANAS"Current Practice: [Note: Pitman didn't try these examples in KCL or CMU Common Lisp. He's  working from data in Touretzky's last draft of this proposal, so someone  from those camps might want to test the assertions made here.] #1: All correct implementations presumably return (A B A B).     This value is consisent with this proposal. #2: Symbolics Cloe returns (A B A B).     KCL returns (A B A B) for lists.     This value is forced by this proposal.     Symbolics Genera and CMU Common Lisp return (B B).     KCL does something bizarre for vectors (``pads with n blanks or      NILs, where -n is the value of the :count keyword parameter'',      says Touretzky.)     These implementations would have to change. #3: All correct implementations presumably return (B B).     This value is consisent with this proposal.     Some implementations have been known to signal a wrong type     argument error in the past, but have presumably been fixed. #4: Symbolics Genera and Symbolics Cloe return (B A B).     CMU Common Lisp returns (B B).     These behaviors are consistent with this proposal.   #5: Symbolics Cloe and Symbolics Genera signal an error.     CMU Common Lisp returns (A B A B).     These behaviors are consistent with this proposal.Cost to Implementors:  Some implementations would have to change. These functions are typically  heavily optimized by compilers. Not only source code, but also compiler  optimizers and perhaps even microcode or hardware might have to be  modified to fully accomodate this change, so it might be quite expensive.Cost to Users:  None for Common Lisp users. This change is an upward compatible  clarification of standard practice.Cost of Non-Adoption:  The behavior of these functions when given degenerate keyword values would  be unintuitive. In many such cases, considerable additional user code must  be written to watch for and avoid creating such situations.Benefits:  More compact, more intuitive, and more portable code.Aesthetics:  This change improves language aesthetics.Discussion:  In the past there has been some argument about what SUBSEQ should do when  given positions greater than the length of the sequence.  Currently it   "is an error" to specify positions less than zero or greater than the  length of the sequence.  Touretzky doesn't think the same should apply to  the :COUNT keyword. The inputs to SUBSEQ are ordinal numbers: they specify  positions, like array subscripts.  The value of :COUNT is not an ordinal,  it is an upper bound on the size of the set of affected items (which is  a cardinal number).   Pitman supports this proposal. [Hopefully Touretzky supports it, too?]  van Roggen says he personally supports the stated proposal but that a  survey he did of users at DEC showed up a number of people who thought  that negative count arguments should be an error.*start*06496 00024 US Date:  8 Dec 88 22:01 PSTFrom: masinter.pato: masinterSubject: Issue: RANGE-OF-COUNT-KEYWORD (Version 3)Issue:        RANGE-OF-COUNT-KEYWORDReferences:   :COUNT (p247), REMOVE[-xxx] (p253), DELETE[-xxx] (p254),	      [N]SUBSTITUTE[-xxx] (pp255-256)Category:     CLARIFICATIONEdit history: 21-Aug-88, Version 1 by Dave Touretzky	      22-Aug-88, Version 2 by Pitman	      09-Oct-88, Version 3 by PitmanProblem Description: CLtL is overly vague about legal values for the :COUNT keyword parameters to builtin functions such as the sequence functions. It says that the keyword ``limits the number of elements [affected]''. Implementations have varied in their interpretation of this phrase, however. CLtL p247 specifies that if the :COUNT parameter to functions such as REMOVE and DELETE ``is NIL or is not supplied, all matching items are affected.'' Because of the placement of this requirement outside of the description of the functions affected, some implementations have overlooked this requirement and had to be  changed later.  CLtL doesn't say explicitly that the value of :COUNT must be an integer, nor does it say what to do for negative values. The fact that reasonable implementations disagree on some of the details make this an obvious candidate for cleanup.Proposal (RANGE-OF-COUNT-KEYWORD:NIL-OR-INTEGER): Clarify that for the functions   REMOVE	REMOVE-IF	REMOVE-IF-NOT   DELETE	DELETE-IF	DELETE-IF-NOT   SUBSTITUTE	SUBSTITUTE-IF	SUBSTITUTE-IF-NOT   NSUBSTITUTE	NSUBSTITUTE-IF	NSUBSTITUTE-IF-NOT the following restrictions on the :COUNT keyword parameter exist:   * The value of this parameter must be NIL or an integer.   * Using a negative integer value is functionally equivalent to     using a value of zero.Examples:  #1: (REMOVE 'A '(A B A B) :COUNT  0)   => (A B A B)  #2: (REMOVE 'A '(A B A B) :COUNT -3)   => (A B A B)  #3: (REMOVE 'A '(A B A B) :COUNT NIL)  => (B B)  #4: (REMOVE 'A '(A B A B) :COUNT  1.0) is an error.  #5: (REMOVE 'A '(A B A B) :COUNT 'FOO) is an error.Rationale: Disallowing non-integer numbers is probably the original intent and is consistent with other functions such as NTH (p265) which accept count-like arguments that are explicitly required to integers. This restriction would presumably permit better optimizations in low-safety mode on stock hardware. Allowing NIL to be equivalent to no value allows a simplified flow of control in some situations. For example, one can write  (DEFUN MYDEL (ITEM &OPTIONAL COUNT)    (DELETE ITEM *MYLIST* :COUNT COUNT)) where otherwise it might be necessary to write something like  (DEFUN MYDEL (ITEM &OPTIONAL (COUNT NIL COUNT-P))    (IF COUNT-P        (DELETE ITEM *MYLIST* :COUNT COUNT)        (DELETE ITEM *MYLIST*))) Allowing negative numbers frees users from having to do an explicit check for negative numbers when the value of :COUNT is computed by some complicated expression. For example:  (DEFUN LEAVE-AT-MOST (N ITEM SEQUENCE &KEY (FROM-END T))    (REMOVE ITEM SEQUENCE       :COUNT (PRINT (- (COUNT ITEM SEQUENCE) N))      :FROM-END FROM-END))  (LEAVE-AT-MOST 2 #\A "BANANAS")  ==>  "BANANS"  (LEAVE-AT-MOST 2 #\S "BANANAS")  ==>  "BANANAS"Current Practice: [Note: Pitman didn't try these examples in KCL or CMU Common Lisp. He's  working from data in Touretzky's last draft of this proposal, so someone  from those camps might want to test the assertions made here.] #1: All correct implementations presumably return (A B A B).     This value is consisent with this proposal. #2: Symbolics Cloe returns (A B A B).     KCL returns (A B A B) for lists.     This value is forced by this proposal.     Symbolics Genera and CMU Common Lisp return (B B).     KCL does something bizarre for vectors (``pads with n blanks or      NILs, where -n is the value of the :count keyword parameter'',      says Touretzky.)     These implementations would have to change. #3: All correct implementations presumably return (B B).     This value is consisent with this proposal.     Some implementations have been known to signal a wrong type     argument error in the past, but have presumably been fixed. #4: Symbolics Genera and Symbolics Cloe return (B A B).     CMU Common Lisp returns (B B).     These behaviors are consistent with this proposal.   #5: Symbolics Cloe and Symbolics Genera signal an error.     CMU Common Lisp returns (A B A B).     These behaviors are consistent with this proposal.Cost to Implementors:  Some implementations would have to change. These functions are typically  heavily optimized by compilers. Not only source code, but also compiler  optimizers and perhaps even microcode or hardware might have to be  modified to fully accomodate this change, so it might be quite expensive.Cost to Users:  None for Common Lisp users. This change is an upward compatible  clarification of standard practice.Cost of Non-Adoption:  The behavior of these functions when given degenerate keyword values would  be unintuitive. In many such cases, considerable additional user code must  be written to watch for and avoid creating such situations.Benefits:  More compact, more intuitive, and more portable code.Aesthetics:  This change improves language aesthetics.Discussion:  In the past there has been some argument about what SUBSEQ should do when  given positions greater than the length of the sequence.  Currently it   "is an error" to specify positions less than zero or greater than the  length of the sequence.  Touretzky doesn't think the same should apply to  the :COUNT keyword. The inputs to SUBSEQ are ordinal numbers: they specify  positions, like array subscripts.  The value of :COUNT is not an ordinal,  it is an upper bound on the size of the set of affected items (which is  a cardinal number).   Pitman supports this proposal. [Hopefully Touretzky supports it, too?]  van Roggen says he personally supports the stated proposal but that a  survey he did of users at DEC showed up a number of people who thought  that negative count arguments should be an error.        TITAN 
         TITAN 
           I                                   `                            t             e       2      ¼             Š             ï             (              j              Ú       
       :              .             5       zº