*start*02651 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 05 AUG 88 10:07:58 PDTReceived: from cs.utah.edu by SAIL.Stanford.EDU with TCP; 5 Aug 88  10:06:35 PDTReceived: by cs.utah.edu (5.54/utah-2.0-cs)	id AA21471; Fri, 5 Aug 88 11:05:48 MDTReceived: by defun.utah.edu (5.54/utah-2.0-leaf)	id AA00261; Fri, 5 Aug 88 11:05:43 MDTFrom: sandra%defun@cs.utah.edu (Sandra J Loosemore)Message-Id: <8808051705.AA00261@defun.utah.edu>Date: Fri, 5 Aug 88 11:05:42 MDTSubject: issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCETo: cl-cleanup@sail.stanford.eduI hope this issue is minor enough to be noncontroversial.-SandraIssue:		DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:	CLtL p. 312-314Category:	CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra LoosemoreProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Current Practice:Lucid Common Lisp implements the proposal.  VaxLisp uses #S syntaxunless an explicit :PRINT-FUNCTION is specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Perhaps some way of specifying that #S syntax should be used instead ofinheriting the print function of the parent type should be provided for(such as specifying :PRINT-FUNCTION with no arguments).-------*start*01887 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 05 AUG 88 10:25:04 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 5 Aug 88  10:24:41 PDTReceived: from RIO-DE-JANEIRO.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 442651; Fri 5-Aug-88 13:23:51 EDTDate: Fri, 5 Aug 88 13:23 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE (Version 1)To: sandra%defun@cs.utah.educc: Cl-Cleanup@SAIL.Stanford.EDUIn-Reply-To: <8808051705.AA00261@defun.utah.edu>Message-ID: <880805132330.3.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>Your writeup looks fine.Non-preemptive comments: * Under Rationale, you could mention that some implementations may be   using something like CLOS' DEFMETHOD to implement print-function,   and such methods will naturally be inherited. Your proposal is,   therefore, more consistent with a CLOS-oriented view of the world   than a non-inheriting proposal would be. * Under Current Practice, both Symbolics Genera and Symbolics Cloe   implement your proposal. * I support DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YES. * Discussion:    Perhaps some way of specifying that #S syntax should be used instead of    inheriting the print function of the parent type should be provided for    (such as specifying :PRINT-FUNCTION with no arguments).   Or naming the function that does what the #S printer does.      On the other hand, Waters has requested a function which would return   the #S information as a list (so he can pretty-print structures). The   same function could be used for this.      If the CLOS metaclass stuff goes in, this is presumably no longer needed.*start*00980 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 13 SEP 88 06:33:38 PDTReceived: from decwrl.dec.com by SAIL.Stanford.EDU with TCP; 13 Sep 88  06:33:03 PDTReceived: by decwrl.dec.com (5.54.5/4.7.34)	id AA23000; Tue, 13 Sep 88 06:31:47 PDTDate: Tue, 13 Sep 88 06:31:47 PDTMessage-Id: <8809131331.AA23000@decwrl.dec.com>From: vanroggen%aitg.DEC@decwrl.dec.comTo: cl-cleanup@sail.stanford.eduSubject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCEI'll support this proposal.I see another complication regarding the #S syntax in the interactionbetween the constructor(s) that have been defined and whether thestructures print out with #S or with #<.  I could imagine havinginstances of a parent structure printing with #< but wanting to haveinstances of a child print with #S.  But I don't think this complicationis too important.			---Walter*start*00411 00024 US Date: 14 Sep 88 21:30 PDTFrom: masinter.paSubject: Re: issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCEIn-reply-to: sandra%defun@cs.utah.edu (Sandra J Loosemore)'s message of Fri, 5 Aug 88 11:05:42 MDTTo: masintersent to sandra%defun@cs.utah.edu (Sandra J Loosemore)Can you produce version 2 with the discussion expanded to mention the points raised here? (Lest we need repeat them?)*start*00649 00024 US Return-Path: <sandra%defun@cs.utah.edu>Received: from cs.utah.edu ([128.110.4.21]) by Xerox.COM ; 15 SEP 88 08:17:17 PDTReceived: by cs.utah.edu (5.54/utah-2.0-cs)	id AA01986; Thu, 15 Sep 88 09:17:03 MDTReceived: by defun.utah.edu (5.54/utah-2.0-leaf)	id AA19559; Thu, 15 Sep 88 09:16:50 MDTFrom: sandra%defun@cs.utah.edu (Sandra J Loosemore)Message-Id: <8809151516.AA19559@defun.utah.edu>Date: Thu, 15 Sep 88 09:16:48 MDTSubject: Re: issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCETo: masinter.paIn-Reply-To: masinter.pa@Xerox.COM, 14 Sep 88 21:30 PDTWere there any other comments besides Pitman's?-Sandra-------*start*03307 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([10.0.0.11]) by Xerox.COM ; 15 SEP 88 16:46:32 PDTReceived: from cs.utah.edu by SAIL.Stanford.EDU with TCP; 15 Sep 88  13:51:25 PDTReceived: by cs.utah.edu (5.54/utah-2.0-cs)	id AA13050; Thu, 15 Sep 88 14:50:04 MDTReceived: by defun.utah.edu (5.54/utah-2.0-leaf)	id AA19742; Thu, 15 Sep 88 14:50:02 MDTFrom: sandra%defun@cs.utah.edu (Sandra J Loosemore)Message-Id: <8809152050.AA19742@defun.utah.edu>Date: Thu, 15 Sep 88 14:50:01 MDTSubject: Issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCE, version 2To: cl-cleanup@sail.stanford.eduIssue:		DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:	CLtL p. 312-314Category:	CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore		V2, 15 Sep 1988, Sandra LoosemoreProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Implementations may wish to use something like CLOS' DEFMETHOD toimplement structure printing, and such methods will naturally beinherited from the :INCLUDE'd type.Current Practice:Lucid Common Lisp makes structures inherit print functions, as do bothSymbolics Genera and Cloe.  VaxLisp uses #S syntax unless an explicit:PRINT-FUNCTION is specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.-------*start*03217 00024 USfReturn-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 06 OCT 88 21:13:38 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 6 Oct 88  20:58:20 PDTReceived: from Semillon.ms by ArpaGateway.ms ; 06 OCT 88 20:16:51 PDTDate: 6 Oct 88 20:16 PDTFrom: masinter.paSubject: Issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCE, version 2To: x3j13@sail.stanford.eduREPLY-TO: cl-cleanup@sail.stanford.eduline-fold: NOcc: Masinter.paMessage-ID: <881006-201651-2055@Xerox>!Issue:		DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:	CLtL p. 312-314Category:	CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore		V2, 15 Sep 1988, Sandra LoosemoreProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Implementations may wish to use something like CLOS' DEFMETHOD toimplement structure printing, and such methods will naturally beinherited from the :INCLUDE'd type.Current Practice:Lucid Common Lisp makes structures inherit print functions, as do bothSymbolics Genera and Cloe.  VaxLisp uses #S syntax unless an explicit:PRINT-FUNCTION is specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.-------     ----- End Forwarded Messages -----*start*01197 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 13:19:39 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  13:19:52 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 475804; Thu 13-Oct-88 16:18:24 EDTDate: Thu, 13 Oct 88 16:18 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE (Version 2)To: CL-Cleanup@SAIL.Stanford.EDUSupersedes: <881013161449.7.KMP@BOBOLINK.SCRC.Symbolics.COM>Message-ID: <881013161815.9.KMP@BOBOLINK.SCRC.Symbolics.COM>[I left something out in previous version.]My notes from Fairfax meeting...Cleanup meeting: KMP: Moon says the Genera current practice info is wrong.      Nevertheless, we (Symbolics) don't oppose the proposal since      it is more consistent with CLOS.X3J13 meeting: Someone wondered about how you get back the #S printer for something that has inherited a non-#S printer once this proposal goes into effect.*start*00718 00024 USfDate: Mon, 17 Oct 88 13:40 PDTFrom: Gregor.paSubject: defstruct print function inhertianceTo: Masinter.PAMessage-ID: <19881017204013.9.GREGOR@PORTNOY.parc.xerox.com>Line-fold: noThe proposal should say that it defines an approptiate method on theprint-object generic function.  This is simpler to say, and preciselydefines all the behavior that is being difficult to define here.  Italso gives the user more, since it makes it clear how they can overridean inherited print function with defmethod.I guess its something like:(defstruct (foo (:print-function (lambda (x y z) ..))) a b c)==>(defmethod print-object ((x foo) y)  (let ((z <I don't know what>))    ...))-------*start*01454 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 31 OCT 88 18:45:41 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 31 Oct 88  18:42:32 PSTReceived: from Cabernet.ms by ArpaGateway.ms ; 31 OCT 88 10:52:53 PSTDate: 31 Oct 88 10:51 PSTFrom: masinter.paSubject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE (Version 2)To: cl-cleanup@sail.stanford.eduMessage-ID: <881031-105253-5995@Xerox>I think this is the correct approach, and consistent with the charter todeal with the CLOS integration issues that the CLOS proposal didn't.      ----- Begin Forwarded Messages -----Date: Mon, 17 Oct 88 13:40 PDTFrom: Gregor.paSubject: defstruct print function inhertianceTo: Masinter.PAMessage-ID: <19881017204013.9.GREGOR@PORTNOY.parc.xerox.com>Line-fold: noThe proposal should say that it defines an approptiate method on theprint-object generic function.  This is simpler to say, and preciselydefines all the behavior that is being difficult to define here.  Italso gives the user more, since it makes it clear how they can overridean inherited print function with defmethod.I guess its something like:(defstruct (foo (:print-function (lambda (x y z) ..))) a b c)==>(defmethod print-object ((x foo) y)  (let ((z <I don't know what>))    ...))-------     ----- End Forwarded Messages -----*start*03060 00024 USfDate:  7 Dec 88 00:14 PSTFrom: masinter.paSubject: Issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCE, (Version 3)To: cl-cleanup@sail.stanford.eduline-fold: NOcc: Masinter.paI think this is the final draft; there was no response to my forwardof Gregor's comment. I'm walking a thin line lest we get intoan awful "is CLOS optional?" argument. Thus "as if a method were defined".Issue:		DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:	CLtL p. 312-314Category:	CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore		V2, 15 Sep 1988, Sandra Loosemore		V3, 7 Dec 1988, MasinterProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Supplying a :PRINT-FUNCTION in a DEFSTRUCT is equivalentto defining an appropriate method on the PRINT-OBJECT genericfunction.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Current Practice:Lucid Common Lisp makes structures inherit print functions.VaxLisp uses #S syntax unless an explicit :PRINT-FUNCTIONis specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.-------     ----- End Forwarded Messages -----     ----- End Forwarded Messages -----*start*03422 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 07 DEC 88 00:27:27 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 7 Dec 88  00:17:45 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 07 DEC 88 00:16:18 PSTDate: 7 Dec 88 00:14 PSTFrom: masinter.paSubject: Issue DEFSTRUCT-PRINT-FUNCTION-INHERITANCE, (Version 3)To: cl-cleanup@sail.stanford.eduline-fold: NOcc: Masinter.paMessage-ID: <881207-001618-7813@Xerox>I think this is the final draft; there was no response to my forwardof Gregor's comment. I'm walking a thin line lest we get intoan awful "is CLOS optional?" argument. Thus "as if a method were defined".!Issue:		DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:	CLtL p. 312-314Category:	CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore		V2, 15 Sep 1988, Sandra Loosemore		V3, 7 Dec 1988, MasinterProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Supplying a :PRINT-FUNCTION in a DEFSTRUCT is equivalentto defining an appropriate method on the PRINT-OBJECT genericfunction.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Current Practice:Lucid Common Lisp makes structures inherit print functions.VaxLisp uses #S syntax unless an explicit :PRINT-FUNCTIONis specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.-------     ----- End Forwarded Messages -----     ----- End Forwarded Messages -----*start*03161 00024 US Date: 12 Dec 88 09:34 PSTSender: masinter.paTo: x3j13@sail.stanford.eduSubject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE (Version 3)From: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.educc: masinterline-fold: noIssue:          DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:     CLtL p. 312-314Category:       CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore                V2, 15 Sep 1988, Sandra Loosemore                V3, 7 Dec 1988, MasinterProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Supplying a :PRINT-FUNCTION in a DEFSTRUCT is equivalentto defining an appropriate method on the PRINT-OBJECT genericfunction.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Current Practice:Lucid Common Lisp makes structures inherit print functions.VaxLisp uses #S syntax unless an explicit :PRINT-FUNCTIONis specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.        TITAN 
         TITAN 
           Z       $       |       /                     	                     }             ,       3      à             f              †              W              .       
       9             ×      ! zº*start*03199 00024 US Return-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 12 DEC 88 10:01:18 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 12 Dec 88  09:42:14 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 12 DEC 88 09:34:46 PSTDate: 12 Dec 88 09:34 PSTSender: masinter.paTo: x3j13@sail.stanford.eduSubject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE (Version 3)From: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.educc: masinter.paline-fold: noMessage-ID: <881212-093446-4207@Xerox>!Issue:          DEFSTRUCT-PRINT-FUNCTION-INHERITANCEReferences:     CLtL p. 312-314Category:       CLARIFICATIONEdit History:   V1, 5 Aug 1988, Sandra Loosemore                V2, 15 Sep 1988, Sandra Loosemore                V3, 7 Dec 1988, MasinterProblem Description:CLtL doesn't make clear whether defstructs that :INCLUDE anotherstructure type and do not specify a :PRINT-FUNCTION inherit the:PRINT-FUNCTION of the parent structure type.  While it is stated onpage 314 that #S syntax is used if a :PRINT-FUNCTION is not specified,the language on page 313 indicates that all operations on the parenttype will also work on objects of the child type.  Because of theambiguity, existing implementations have gone both ways, and userscannot depend on either #S syntax or the parent type's :PRINT-FUNCTIONbeing used.Proposal: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE:YESClarify that defstruct types which :INCLUDE another type but do notspecify an explicit :PRINT-FUNCTION inherit the structure printfunction from the :INCLUDE'd type.  A print function that uses thedefault #S syntax (overriding any print function for the parent type)can be specified by providing the :PRINT-FUNCTION option without an argument.Supplying a :PRINT-FUNCTION in a DEFSTRUCT is equivalentto defining an appropriate method on the PRINT-OBJECT genericfunction.Rationale:Users typically specify a print function for a structure type becauseits slots will contain circular objects or large internal datastructures which are confusing when printed.  Any structure type that:INCLUDEs this type will also contain the same slots; it seems morereasonable to inherit the parent's print function than to use thedefault #S syntax.Current Practice:Lucid Common Lisp makes structures inherit print functions.VaxLisp uses #S syntax unless an explicit :PRINT-FUNCTIONis specified.Cost to implementors:The changes to non-conforming implementations should be fairly minorand localized.Cost to users:It can't be any worse than the status quo.Benefits:An area of ambiguity in the language will be removed.Discussion:Pitman and VanRoggen support this proposal.The original version of the proposal did not provide for a way toforce #S syntax to be used.  This functionality was added to thecurrent version because there seemed to be general agreement that itwould be useful.  Other alternatives would be to name the functionthat does what the #S printer does, or to provide a function thatreturns the #S information as a list (as suggested by Waters) so userscan write their own.*start*02794 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 JAN 89 09:58:40 PSTReceived: from vaxa.isi.edu by SAIL.Stanford.EDU with TCP; 13 Jan 89  09:58:08 PSTPosted-Date: Fri, 13 Jan 89 09:57:56 PSTMessage-Id: <8901131758.AA12171@vaxa.isi.edu>Received: from LOCALHOST by vaxa.isi.edu (5.59/5.51)	id AA12171; Fri, 13 Jan 89 09:58:06 PSTTo: cl-cleanup@sail.stanford.eduFrom: goldman@vaxa.isi.eduSubject: Issue: DEFSTRUCT-PRINT-FUNCTION-INHERITANCE , Version 3Cc: goldman@vaxa.isi.eduDate: Fri, 13 Jan 89 09:57:56 PSTSender: goldman@vaxa.isi.eduThe reason I do not support this proposal is twofold:1) It does not go far enough -- in particular, it does not enable   the print function of a structure to examine the structure instance   and conditionally "hand off" to the printer for the included (more general)   class.2) I do not see why a more specialized class should need to directly invoke  the most general (#S) printer.  I notice that no one has suggested  CLOS have an alternative to NEXT-METHOD called MOST-GENERAL-METHOD.  If  there is something particular about the #S syntax, I would rather simple  have an advertised CL function PRINT-#S-STYLE(structure stream depth).I would like to see the :print-function for defstruct beefed up as follows:(defstruct (struc (:print-function (lambda () <body>))) ...)When a lambda expression is used as the print-function, its body mayinvoke the zero-argument lexical function (or macro, I don't really care)(NEXT-PRINTER) to invoke the next most general printer on thesame structure, stream, and depth.  The #S printer is the most general -- that is, if a structure class C does not include, directly or indirectly,any class with its own print-function, then (NEXT-PRINTER) fromC's print function will invoke the #S printer.  The purpose of this protocolis to allow a print function to inspect the particular structure andchoose to delegate printing authority to a more general printer if thestructure does not meet its criteria.I recognize that my proposal only provides this  functionality toprint-functions specified via lambda expressions, rather thansymbols.  But I haven't yet encountered a situation where I would prefer to use a symbol rather than a lambda expression, so that doesn't bother me.  Obviously the protocol permits a programmerto write his print-function as  (lambda (x s d) (my-printer x s d #'next-printer)or, if NEXT-PRINTER is a lexical macro rather than a lexical function,  (lambda (x s d) (my-printer x s d #'(lambda () (next-printer))))so you can indirect all the interesting logic through a named functionanyway.another 2cents worth,Neil