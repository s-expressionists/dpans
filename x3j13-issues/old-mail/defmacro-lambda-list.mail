*start*05852 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 30 JAN 89 06:53:56 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 30 Jan 89  06:53:50 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 529852; Mon 30-Jan-89 09:51:26 ESTDate: Mon, 30 Jan 89 09:51 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LIST (Version 1)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <890130095112.2.KMP@BOBOLINK.SCRC.Symbolics.COM>Sigh, the DESTRUCTURING-BIND discussion made it clear that it's time todeal with a couple of details about DEFMACRO which have been left vague...-----Issue:        DEFMACRO-LAMBDA-LISTForum:	      CleanupReferences:   8.1 Macro Definition (CLtL pp144-151),	      Issue DESTRUCTURING-BINDCategory:     CLARIFICATION/CHANGEEdit history: 30-Jan-89, Version 1 by PitmanStatus:	      For Internal DiscussionProblem Description:  The description of the DEFMACRO lambda list currently contains some   mis-statements and leaves some ambiguities:  1. Can &BODY, &WHOLE, and &ENVIRONMENT appear at recursive levels of the     DEFMACRO lambda list?     The description of &WHOLE (p145) specifies that &WHOLE must occur ``first     in the lambda list,'' but the description of a lambda list says that      ``a lambda may [recursively] appear in place of the parameter name.''     Consequently, the question arises whether &WHOLE should be permitted to     be a synonym for &REST at inner levels of a DEFMACRO lambda list.     The descriptions of &BODY and &ENVIRONMENT do not contain syntactic     restrictions on where they may appear.  2. Does using &WHOLE affect the pattern of arguments permitted by DEFMACRO.Proposal (DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION):  1. a. Specify that &BODY may appear at any level of a DEFMACRO lambda list.     b. Specify that &WHOLE may only appear at the top level of a DEFMACRO        lambda list.     c. Specify that &ENVIRONMENT may only appear at the top level of a	DEFMACRO lambda list.  2. Clarify that using &WHOLE does not affect the pattern of arguments     specified by DEFMACRO.Examples:  1. (DEFMACRO DM1A (&WHOLE FORM A B)  ...) is defined.     (DEFMACRO DM1B (A (&WHOLE B C) D) ...) is undefined.     (DEFMACRO DM1C (A B &ENVIRONMENT ENV) ...)     is defined.     (DEFMACRO DM1D (A (B &ENVIRONMENT ENV) C) ...) is undefined.     (DEFMACRO DM1E (A B &BODY X) ...)     is defined.     (DEFMACRO DM1F (A (B &BODY X) C) ...) is defined.  2. (DEFMACRO DM2A (&WHOLE X) `',X)     (MACROEXPAND '(DM2A))   => (QUOTE (DM2A))     (MACROEXPAND '(DM2A A)) is an error.     (DEFMACRO DM2B (&WHOLE X A &OPTIONAL B) `'(,X ,A ,B))          (MACROEXPAND '(DM2B))       is an error.     (MACROEXPAND '(DM2B Q))     => (QUOTE ((DM2B Q) Q NIL))     (MACROEXPAND '(DM2B Q R))   => (QUOTE ((DM2B Q R) Q R))     (MACROEXPAND '(DM2B Q R S)) is an error.Rationale:  1. a. An example on p151 makes it clear that this was the intent.     b. At top level, &WHOLE and &REST do something different, so two	keywords are warranted. Embedded, there is only a need for &REST.	Providing &WHOLE would just encourage confusion among novices.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.	This also reduces the temptation for novices to confuse &WHOLE	with &REST.     c. The environment is never different at top level than embedded.	Permitting &ENVIRONMENT to occur embedded would only encourage	the misconception that there was a potential difference.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.  2. This allows useful syntax checking.     One can always trivially write	(DEFMACRO ... (&WHOLE FORM &REST IGNORE) ...)     to get around the error checking this forces.Current Practice:  1. a. Symbolics Genera permits &BODY at any level. This is compatible.     b. Symbolics Genera seems to permit &WHOLE at any level. When embedded,	it is treated as a synonym for &REST. Since the proposal is to make	this situation is undefined, this is technically compatible.     c. Symbolics Genera does not permit &ENVIRONMENT except at top level.	This is compatible.  2. Symbolics Genera has this behavior when &WHOLE appears at top level,     but not at recursive levels (where &WHOLE is treated as a synonym for     &REST). Since this proposal also outlaws &WHOLE at recursive levels,     it is technically compatible.Cost to Implementors:  None. This change is upward compatible.  Note in particular that implementations which currently do not error check  the pattern when &WHOLE is used are technically compatible, since that  situation is made "undefined" by this proposal. This basically just  restricts the set of things users can do in portable code.Cost to Users:  Very slight. Probably most users don't do any of the things this proposal  addresses. If they do, most cases can probably trivially be found and fixed  by very superficial editing. In any case, any code which touches on these  areas is probably already not portable.Cost of Non-Adoption:  Some fuzzy places in DEFMACRO continue to exist.  It's harder to introduce DESTRUCTURING-BIND because describing its relation  to DEFMACRO is difficult.Benefits:  The language is a little tighter.Aesthetics:  Negligible impact.Discussion:  Part 2 of this issue came up during the discussion of DOTTED-MACRO-FORMS  but was not pursued until now.  Pitman supports these clarifications.*start*01499 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 03 FEB 89 15:41:53 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 3 Feb 89  15:41:59 PSTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 533502; Fri 3-Feb-89 18:40:02 ESTDate: Fri, 3 Feb 89 18:40 ESTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LIST (Version 1)To: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <890130095112.2.KMP@BOBOLINK.SCRC.Symbolics.COM>Message-ID: <19890203234040.4.MOON@EUPHRATES.SCRC.Symbolics.COM>I agree with most of DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION,except I think that part 1b is a mistake.  &WHOLE should beallowed at all levels.  The interesting case is     (DEFMACRO DM1B (A (&WHOLE B C &OPTIONAL D) E) ...)which allows simultaneous access to the THIRD of the wholeform and to the destructuring of that list into C and D.I don't know what this would be used for exactly, but thereis no cogent reason to forbid it.  Contrary to what you sayin the rationale, it does not work to substitute &REST for&WHOLE here.Also the example on p.150 uses &WHOLE in a non-top-levelposition, so you would be making a definitely incompatiblechange if you forbade that.*start*01308 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 03 FEB 89 15:57:49 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 3 Feb 89  15:57:39 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 533523; Fri 3-Feb-89 18:55:40 ESTDate: Fri, 3 Feb 89 18:55 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LIST (Version 1)To: Moon@STONY-BROOK.SCRC.Symbolics.COMcc: KMP@STONY-BROOK.SCRC.Symbolics.COM, CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <19890203234040.4.MOON@EUPHRATES.SCRC.Symbolics.COM>Message-ID: <890203185519.4.KMP@BOBOLINK.SCRC.Symbolics.COM>    Date: Fri, 3 Feb 89 18:40 EST    From: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>    I agree with most of DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION,    except ... Contrary to what you say in the rationale, it does    not work to substitute &REST for &WHOLE here. ...Right. Total (hopefully temporary) brain lapse on my part. Consider theproposal ammended -- I'll distribute a new writeup hopefully sometimesoon but won't have time to get to it today.*start*01206 00024 US Date: 14 Mar 89 07:51 PSTFrom: masinter.paSubject: [Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>: Issue: DEFMACRO-LAMBDA-LIST (Version 1)]To: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: masinter.pa"...  I'll distribute a new writeup hopefully sometime soon ..."Sorry I waited so long...     ----- Begin Forwarded Messages -----Date: Fri, 3 Feb 89 18:55 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LIST (Version 1)To: Moon@STONY-BROOK.SCRC.Symbolics.COMcc: KMP@STONY-BROOK.SCRC.Symbolics.COM, CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <19890203234040.4.MOON@EUPHRATES.SCRC.Symbolics.COM>    Date: Fri, 3 Feb 89 18:40 EST    From: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>    I agree with most of DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION,    except ... Contrary to what you say in the rationale, it does    not work to substitute &REST for &WHOLE here. ...Right. Total (hopefully temporary) brain lapse on my part. Consider theproposal ammended -- I'll distribute a new writeup hopefully sometimesoon but won't have time to get to it today.     ----- End Forwarded Messages -----*start*05752 00024 US GV-Info: CL-Cleanup-mailer@SAIL.Stanford.EDU at 17-Mar-89 20:10:00 from AGReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 17 MAR 89 20:09:56 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 17 Mar 89  20:05:27 PSTReceived: from Cabernet.ms by ArpaGateway.ms ; 17 MAR 89 19:50:34 PSTDate: 17 Mar 89 19:44 PSTFrom: masinter.pato: cl-cleanup@sail.stanford.eduSubject: Issue: DEFMACRO-LAMBDA-LIST, v.2Message-ID: <890317-195034-3172@Xerox>I didn't mean to do this, but I started. It took more timebecause the last writeup really presumed that &WHOLE wasn'tallowed at inner levels, so I had to mung it to changethat assumption.However, I really think this is just a clarification of'current practice'; I'd be suprised to find an implementationdidn't really already conform to this. So I rewrote the cost/benefit section; do you know anycounterexamples?!Issue:        DEFMACRO-LAMBDA-LISTForum:	      CleanupReferences:   8.1 Macro Definition (CLtL pp144-151),	      Issue DESTRUCTURING-BINDCategory:     CLARIFICATION/CHANGEEdit history: 30-Jan-89, Version 1 by Pitman			17-Mar-89, Version 2 by MasinterProblem Description:  The description of the DEFMACRO lambda list currently contains some   mis-statements and leaves some ambiguities:  1. Can &BODY, &WHOLE, and &ENVIRONMENT appear at recursive levels of the     DEFMACRO lambda list?     The description of &WHOLE (p145) specifies that &WHOLE must occur ``first     in the lambda list,'' but the description of a lambda list says that      ``a lambda may [recursively] appear in place of the parameter name.''     Consequently, the question arises whether &WHOLE should be permitted to     be a synonym for &REST at inner levels of a DEFMACRO lambda list.     The descriptions of &BODY and &ENVIRONMENT do not contain syntactic     restrictions on where they may appear.  2. Does using &WHOLE affect the pattern of arguments permitted by DEFMACRO.Proposal (DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION):  1. a. Specify that &BODY may appear at any level of a DEFMACRO lambda list.     b. Specify that &WHOLE may only appear at any level of a DEFMACRO        lambda list. At inner levels, the &WHOLE variable is bound to		the corresponding part of the argument, as with &REST, but		unlike &REST, other arguments are also allowed.     c. Specify that &ENVIRONMENT may only appear at the top level of a	DEFMACRO lambda list.  2. Clarify that using &WHOLE does not affect the pattern of arguments     specified by DEFMACRO.Examples:  1. (DEFMACRO DM1A (&WHOLE FORM A B)  ...) is defined.     (DEFMACRO DM1B (A (&WHOLE B C &OPTIONAL D) E) ...) is defined.		It allows simultaneousaccess to the THIRD of the whole		form as B and to the destructuring of that list into		C and D.     (DEFMACRO DM1C (A B &ENVIRONMENT ENV) ...)     is defined.     (DEFMACRO DM1D (A (B &ENVIRONMENT ENV) C) ...) is undefined.     (DEFMACRO DM1E (A B &BODY X) ...)     is defined.     (DEFMACRO DM1F (A (B &BODY X) C) ...) is defined.  2. (DEFMACRO DM2A (&WHOLE X) `',X)     (MACROEXPAND '(DM2A))   => (QUOTE (DM2A))     (MACROEXPAND '(DM2A A)) is an error.     (DEFMACRO DM2B (&WHOLE X A &OPTIONAL B) `'(,X ,A ,B))          (MACROEXPAND '(DM2B))       is an error.     (MACROEXPAND '(DM2B Q))     => (QUOTE ((DM2B Q) Q NIL))     (MACROEXPAND '(DM2B Q R))   => (QUOTE ((DM2B Q R) Q R))     (MACROEXPAND '(DM2B Q R S)) is an error.Rationale:  1. a. An example on p151 makes it clear that this was the intent.	b. There's no cogent reason to forbid &WHOLE at inner levels.     The example on p.150 uses &WHOLE in a non-top-level position.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.     c. The environment is never different at top level than embedded.	Permitting &ENVIRONMENT to occur embedded would only encourage	the misconception that there was a potential difference.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.  2. This allows useful syntax checking.     One can always trivially write	(DEFMACRO ... (&WHOLE FORM &REST IGNORE) ...)     to get around the error checking this forces.Current Practice:  1. a. Symbolics Genera permits &BODY at any level. This is compatible.     b. Symbolics Genera seems to permit &WHOLE at any level. When embedded,	it is treated as a synonym for &REST.      c. Symbolics Genera does not permit &ENVIRONMENT except at top level.	This is compatible.  2. Symbolics Genera has this behavior when &WHOLE appears at top level,     but not at recursive levels (where &WHOLE is treated as a synonym for     &REST).Cost to Implementors:  This seems to be what CLtL intended and what most implementations  perform.Cost to Users:  We think this is possibly (probably) upward compatible with most  current practice.Cost of Non-Adoption:  Some fuzzy places in DEFMACRO continue to exist.  It's harder to introduce DESTRUCTURING-BIND because describing its relation  to DEFMACRO is difficult.Benefits:  The language is a little tighter.Aesthetics:  Negligible impact.Discussion:  Part 2 of this issue came up during the discussion of DOTTED-MACRO-FORMS  but was not pursued until now.  Pitman supports these clarifications.  A previous version disallowed &WHOLE at inner levels, because  of the mistaken impression that &WHOLE was equivalent to &REST.  However, additional arguments are not allowed after &REST,  while they are for &WHOLE.*start*01452 00024 US GV-Info: Mly@AI.AI.MIT.EDU at 18-Mar-89 23:10:04 from AGReturn-Path: <@REAGAN.AI.MIT.EDU:Mly@AI.AI.MIT.EDU>Received: from REAGAN.AI.MIT.EDU ([128.52.22.53]) by Xerox.COM ; 18 MAR 89 23:10:02 PSTReceived: from ISABEL-PERON.AI.MIT.EDU by REAGAN.AI.MIT.EDU via CHAOS with CHAOS-MAIL id 182861; Sun 19-Mar-89 01:25:45 ESTDate: Sun, 19 Mar 89 01:28 ESTFrom: Richard Mlynarik <Mly@AI.AI.MIT.EDU>Subject: Issue: DEFMACRO-LAMBDA-LIST, v.2To: masinter.pa, cl-cleanup@sail.stanford.eduIn-Reply-To: <890317-195034-3172@Xerox>Message-ID: <19890319062819.3.MLY@ISABEL-PERON.AI.MIT.EDU>      1. a. Specify that &BODY may appear at any level of a DEFMACRO lambda list.	 b. Specify that &WHOLE may only appear at any level of a DEFMACRO	    lambda list. At inner levels, the &WHOLE variable is bound to``May only appear at any level'' sounds like a control-Y bug.	 c. Specify that &ENVIRONMENT may only appear at the top level of a	    DEFMACRO lambda list.Something else which needs to be clarified is where the &ENVIRONMENTkeyword may appear.Which of the following are legal?1. (defmacro foo (&whole w &environment e a b) ...)2. (defmacro foo (&environment e &whole w a b) ...)3. (defmacro foo (&whole w a b &environment e) ...)4. (defmacro foo (&whole w a &environment e b) ...)I'd like to say 1,2 and 3 only, even though case 2 would require somemodification of the ``first in the lambda-list'' terminology.*start*01800 00024 US Date:  4 Apr 89 08:59 PDTSender: CL-Cleanup-mailer%SAIL.Stanford:EDU:XeroxFrom: KMP%STONY-BROOK.SCRC.Symbolics:COM:XeroxSubject: Issue: DEFMACRO-LAMBDA-LISTTo: CL-Cleanup%SAIL.Stanford:EDU:XeroxGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LISTTo: CL-Cleanup@SAIL.Stanford.EDUReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 04 APR 89 08:56:41 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM by SAIL.Stanford.EDU with TCP; 4 Apr 89  08:54:55 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 570953; Tue 4-Apr-89 11:54:56 EDTOriginal-Date: Tue, 4 Apr 89 11:54 EDTSupersedes: <890404115215.9.KMP@BOBOLINK.SCRC.Symbolics.COM>Message-ID: <890404115432.0.KMP@BOBOLINK.SCRC.Symbolics.COM>GVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVThere were hardcopy amendments distributed. The hardcopy said:  Proposed amendments to DEFMACRO-LAMBDA-LIST     KMP 3/30/89						  (from MLY)   A. [Friendly] In 1b, change "may only appear at any level"			   to "may appear at any level".   B. [Vote separately]      1.  Prohibit/Permit (&whole W &environment E A B)   ``After &Whole''     2.  Prohibit/Permit (&environment E &whole W A B)   ``Before &Whole''     3.  Prohibit/Permit (&whole W A B &environment E)   ``Last''     4.  Prohibit/Permit (&whole W A &environment E B)   ``Middle''My notes say that we approved amendments A & B (``permit all four'')and we added an amendment that said that &ENVIRONMENT would not beduplicated in a DEFMACRO lambda-list.The amended proposal was passed N-0-1.*start*06056 00024 US GV-Info: X3J13-mailer@SAIL.Stanford.EDU at  9-Apr-89 21:12:56 from AGReturn-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 09 APR 89 21:12:57 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 9 Apr 89  20:59:22 PDTReceived: from Semillon.ms by ArpaGateway.ms ; 09 APR 89 20:59:21 PDTDate: 9 Apr 89 20:58 PDTFrom: masinter.paSubject: Issue: DEFMACRO-LAMBDA-LIST, v3To: X3J13@sail.stanford.edureply-to: Masinter.paline-fold: NOMessage-ID: <890409-205921-3400@Xerox>This is my rendition of this issue as passed at the Mar 89 X3J13; in fact, version 2, circulated in hardcopy, got amended at the meeting. I have no record of any version of this being mailed to this distributionlist, so I'm circulating it now.!Status: Passed, as amended, Mar 89 X3J13Issue:        DEFMACRO-LAMBDA-LISTForum:	      CleanupReferences:   8.1 Macro Definition (CLtL pp144-151),	      Issue DESTRUCTURING-BINDCategory:     CLARIFICATION/CHANGEEdit history: 30-Jan-89, Version 1 by Pitman			17-Mar-89, Version 2 by Masinter			 9-Apr-89, Version 3 by Masinter 				Incorporate amendments as per Mar 89 X3J13Problem Description:  The description of the DEFMACRO lambda list currently contains some   mis-statements and leaves some ambiguities:  1. Can &BODY, &WHOLE, and &ENVIRONMENT appear at recursive levels of the     DEFMACRO lambda list?     The description of &WHOLE (p145) specifies that &WHOLE must occur ``first     in the lambda list,'' but the description of a lambda list says that      ``a lambda may [recursively] appear in place of the parameter name.''     Consequently, the question arises whether &WHOLE should be permitted to     be a synonym for &REST at inner levels of a DEFMACRO lambda list.     The descriptions of &BODY and &ENVIRONMENT do not contain syntactic     restrictions on where they may appear.  2. Does using &WHOLE affect the pattern of arguments permitted by DEFMACRO.Proposal (DEFMACRO-LAMBDA-LIST:TIGHTEN-DESCRIPTION):  1. a. Specify that &BODY may appear at any level of a DEFMACRO lambda list.     b. Specify that &WHOLE may appear at any level of a DEFMACRO        lambda list. At inner levels, the &WHOLE variable is bound to		the corresponding part of the argument, as with &REST, but		unlike &REST, other arguments are also allowed.     c. Specify that &ENVIRONMENT may only appear at the top level of a	DEFMACRO lambda list.  2. Clarify that using &WHOLE does not affect the pattern of arguments     specified by DEFMACRO.  3. Clarify that  &ENVIRONMENT may appear anywhere in the top level     of a DEFMACRO lambda list, as in the following examples:        (&whole W &environment E A B)   ``After &Whole''        (&environment E &whole W A B)   ``Before &Whole''        (&whole W A B &environment E)   ``Last''        (&whole W A &environment E B)   ``Middle''Examples:  1. (DEFMACRO DM1A (&WHOLE FORM A B)  ...) is defined.     (DEFMACRO DM1B (A (&WHOLE B C &OPTIONAL D) E) ...) is defined.		It allows simultaneousaccess to the THIRD of the whole		form as B and to the destructuring of that list into		C and D.     (DEFMACRO DM1C (A B &ENVIRONMENT ENV) ...)     is defined.     (DEFMACRO DM1D (A (B &ENVIRONMENT ENV) C) ...) is undefined.     (DEFMACRO DM1E (A B &BODY X) ...)     is defined.     (DEFMACRO DM1F (A (B &BODY X) C) ...) is defined.  2. (DEFMACRO DM2A (&WHOLE X) `',X)     (MACROEXPAND '(DM2A))   => (QUOTE (DM2A))     (MACROEXPAND '(DM2A A)) is an error.     (DEFMACRO DM2B (&WHOLE X A &OPTIONAL B) `'(,X ,A ,B))          (MACROEXPAND '(DM2B))       is an error.     (MACROEXPAND '(DM2B Q))     => (QUOTE ((DM2B Q) Q NIL))     (MACROEXPAND '(DM2B Q R))   => (QUOTE ((DM2B Q R) Q R))     (MACROEXPAND '(DM2B Q R S)) is an error.Rationale:  1. a. An example on p151 makes it clear that this was the intent.	b. There's no cogent reason to forbid &WHOLE at inner levels.     The example on p.150 uses &WHOLE in a non-top-level position.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.     c. The environment is never different at top level than embedded.	Permitting &ENVIRONMENT to occur embedded would only encourage	the misconception that there was a potential difference.	This simplifies the implementation of DEFMACRO if we introduce a        DESTRUCTURING-BIND which does not understand &ENVIRONMENT.  2. This allows useful syntax checking.     One can always trivially write	(DEFMACRO ... (&WHOLE FORM &REST IGNORE) ...)     to get around the error checking this forces.  3. <vote at Mar 89 X3J13>Current Practice:  1. a. Symbolics Genera permits &BODY at any level. This is compatible.     b. Symbolics Genera seems to permit &WHOLE at any level. When embedded,	it is treated as a synonym for &REST.      c. Symbolics Genera does not permit &ENVIRONMENT except at top level.	This is compatible.  2. Symbolics Genera has this behavior when &WHOLE appears at top level,     but not at recursive levels (where &WHOLE is treated as a synonym for     &REST).Cost to Implementors:  This seems to be what CLtL intended and what most implementations  perform.Cost to Users:  We think this is possibly (probably) upward compatible with most  current practice.Cost of Non-Adoption:  Some fuzzy places in DEFMACRO continue to exist.  It's harder to introduce DESTRUCTURING-BIND because describing its relation  to DEFMACRO is difficult.Benefits:  The language is a little tighter.Aesthetics:  Negligible impact.Discussion:  Part 2 of this issue came up during the discussion of DOTTED-MACRO-FORMS  but was not pursued until now.  Pitman supports these clarifications.  A previous version disallowed &WHOLE at inner levels, because  of the mistaken impression that &WHOLE was equivalent to &REST.  However, additional arguments are not allowed after &REST,  while they are for &WHOLE.*start*01883 00024 USaGV-Info: KMP@STONY-BROOK.SCRC.Symbolics.COM at 10-Apr-89 08:28:18 from AGReturn-Path: <KMP@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM ([128.81.41.144]) by Xerox.COM ; 10 APR 89 08:28:13 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 574329; Mon 10-Apr-89 11:28:10 EDTDate: Mon, 10 Apr 89 11:27 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFMACRO-LAMBDA-LIST (Version 3)To: Masinter.PAcc: KMP@STONY-BROOK.SCRC.Symbolics.COMMessage-ID: <890410112731.6.KMP@BOBOLINK.SCRC.Symbolics.COM>Your version 3 does not reflect one important aspect of the amendments.See lines indicated with ">" below.    Date: Tue, 4 Apr 89 11:54 EDT    From: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>    Subject: Issue: DEFMACRO-LAMBDA-LIST    To: CL-Cleanup@SAIL.Stanford.EDU    Supersedes: <890404115215.9.KMP@BOBOLINK.SCRC.Symbolics.COM>    Message-ID: <890404115432.0.KMP@BOBOLINK.SCRC.Symbolics.COM>        There were hardcopy amendments distributed. The hardcopy said:          Proposed amendments to DEFMACRO-LAMBDA-LIST     KMP 3/30/89						      (from MLY)           A. [Friendly] In 1b, change "may only appear at any level"			       to "may appear at any level".           B. [Vote separately]     	 1.  Prohibit/Permit (&whole W &environment E A B)   ``After &Whole''	 2.  Prohibit/Permit (&environment E &whole W A B)   ``Before &Whole''	 3.  Prohibit/Permit (&whole W A B &environment E)   ``Last''	 4.  Prohibit/Permit (&whole W A &environment E B)   ``Middle''        My notes say that we approved amendments A & B (``permit all four'')>   and we added an amendment that said that &ENVIRONMENT would not be>   duplicated in a DEFMACRO lambda-list.        The amended proposal was passed N-0-1.*start*00350 00024 US GV-Info: masinter.pa at 10-Apr-89 09:11:27 from massunterDate: 10 Apr 89 09:10 PDTFrom: masinter.paSubject: Re: Issue: DEFMACRO-LAMBDA-LIST (Version 3)In-reply-to: your message of Mon, 10 Apr 89 11:27 EDTTo: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: Masinter.PAThanks, I've made that change in version 4.