*start*04042 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 13 APR 88 13:34:32 PDTReceived: from multimax.ARPA by SAIL.Stanford.EDU with TCP; 13 Apr 88  13:31:19 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA03781; Wed, 13 Apr 88 16:31:20 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA00868; Wed, 13 Apr 88 16:32:28 EDTMessage-Id: <8804132032.AA00868@mist.UUCP>To: cl-cleanup%sail.stanford.edu@multimax.ARPASubject: Issue: FORMAT-PRETTY-PRINT (version 1)Date: Wed, 13 Apr 88 16:32:26 EDTFrom: Dan L. Pierson <pierson%mist@multimax.ARPA>Sorry, I've been sitting on this one for a while.Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88Status:        For Internal DiscussionProblem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRINT-PRETTY:YES):The ~A and ~S FORMAT operators (and the ~B, ~D, ~E, ~F, ~G, ~$, ~O,~R, and ~X FORMAT operators when they encounter a non-numeric value)are required to treat all *PRINT-foo* variables the same as PRINC andPRIN1 respectively.  [[ Yes, this is a bit broader than the title, butif we're going to clarify this we might as well do the whole job.  Idon't think any of the other variables are likely to be controversial.]]Test Cases/Examples:(LET ((TEST '(LAMBDA (X)               (LET ((*PRINT-PRETTY* T))	         (PRINT X)		 (FORMAT T "~%~S " X)		 (TERPRI) (PRINC X) (PRINC " ")		 (FORMAT T "~%~A " X)))))  (FUNCALL TEST TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.  Note that this examplewon't work as written if the proposal FUNCTION-TYPE:STRICT-REDEFINITIONis accepted. Rationale:FORMAT should interact with the *PRINT-foo* variables in a predictableway.  This proposal is one of the two simplest possible definitionsand provides the most flexibility to the user.Current practice:Ibuki Lisp obeys the binding of *PRINT-PRETTY*.  Lucid Common Lispalways applies ~A and ~S with *PRINT-PRETTY* bound to NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the *PRINT-foo* variables (especiallypretty printing) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:Pierson feels that this is important because the ease of implementingmajor system interfaces with FORMAT can unintentionally lead to lessflexibility for the user compared to an old-style PRIN1/PRINC/TERPRIimplementation.  This clarification would generate some up front workbut would make it harder for people to accidentally create restrictiveinterfaces. *start*00889 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 24 MAY 88 14:38:29 PDTReceived: from JASPER.SCRC.Symbolics.COM ([128.81.41.58]) by SAIL.Stanford.EDU with TCP; 24 May 88  14:36:48 PDTReceived: from EUPHRATES.SCRC.Symbolics.COM by JASPER.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 191931; Tue 24-May-88 17:35:14 EDTDate: Tue, 24 May 88 17:35 EDTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FORMAT-PRETTY-PRINT (version 1)To: Dan L. Pierson <pierson%mist@MULTIMAX.ARPA>cc: cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: <8804132032.AA00868@mist.UUCP>Message-ID: <19880524213523.1.MOON@EUPHRATES.SCRC.Symbolics.COM>I agree with FORMAT-PRINT-PRETTY:YES [I assume this name is a typo and FORMAT-PRETTY-PRINT:YESwas the intended proposal name]*start*00777 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 25 MAY 88 07:28:05 PDTReceived: from hudson.dec.com by SAIL.Stanford.EDU with TCP; 25 May 88  07:25:55 PDTDate: 25 May 88 10:07:00 EDTFrom: "AITG::VANROGGEN" <vanroggen%aitg.decnet@hudson.dec.com>Subject: Re: issue: FORMAT-PRETTY-PRINT (version 1)To: "cl-cleanup" <cl-cleanup@sail.stanford.edu>cc: vanroggen@hudson.dec.com Reply-To: "AITG::VANROGGEN" <vanroggen%aitg.decnet@hudson.dec.com>Does this propose that ~D (for instance) binds *PRINT-ESCAPE* to NIL orto T?  VAX LISP currently binds *PRINT-ESCAPE* to NIL for ~D et al.[Of course it also binds *PRINT-RADIX* and *PRINT-BASE*.]			---Walter------*start*04066 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 26 MAY 88 11:47:51 PDTReceived: from multimax.ARPA by SAIL.Stanford.EDU with TCP; 26 May 88  11:46:01 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA01475; Thu, 26 May 88 14:44:34 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA18531; Thu, 26 May 88 11:56:21 EDTMessage-Id: <8805261556.AA18531@mist.UUCP>To: cl-cleanup%sail.stanford.edu@multimax.ARPASubject: Issue: FORMAT-PRETTY-PRINT (version 2)Date: Thu, 26 May 88 11:56:20 EDTFrom: Dan L. Pierson <pierson%mist@multimax.ARPA>Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)Status:        For Internal DiscussionProblem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):The ~A and ~S FORMAT operators (and the ~B, ~D, ~E, ~F, ~G, ~$, ~O,~R, and ~X FORMAT operators when they encounter a non-numeric value)are required to treat all *PRINT-foo* variables the same as PRINC andPRIN1 respectively.  [[ Yes, this is a bit broader than the title, butif we're going to clarify this we might as well do the whole job.  Idon't think any of the other variables are likely to be controversial.]]Test Cases/Examples:(LET ((TEST '(LAMBDA (X)               (LET ((*PRINT-PRETTY* T))	         (PRINT X)		 (FORMAT T "~%~S " X)		 (TERPRI) (PRINC X) (PRINC " ")		 (FORMAT T "~%~A " X)))))  (FUNCALL TEST TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.  Note that this examplewon't work as written if the proposal FUNCTION-TYPE:STRICT-REDEFINITIONis accepted. Rationale:FORMAT should interact with the *PRINT-foo* variables in a predictableway.  This proposal is one of the two simplest possible definitionsand provides the most flexibility to the user.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the *PRINT-foo* variables (especiallypretty printing) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:Pierson feels that this is important because the ease of implementingmajor system interfaces with FORMAT can unintentionally lead to lessflexibility for the user compared to an old-style PRIN1/PRINC/TERPRIimplementation.  This clarification would generate some up front workbut would make it harder for people to accidentally create restrictiveinterfaces. *start*02371 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 28 MAY 88 10:05:57 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 28 May 88  10:04:25 PDTReceived: from PEWEE.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 411855; Sat 28-May-88 13:03:47 EDTDate: Sat, 28 May 88 13:03 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FORMAT-PRETTY-PRINT (version 2)To: pierson%mist@MULTIMAX.ARPAcc: Cl-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <8805261556.AA18531@mist.UUCP>Message-ID: <880528130335.1.KMP@PEWEE.SCRC.Symbolics.COM>I support the idea of this proposal and more or less support its stanceon the issue, but I have a few suggestions on presentation...I think this proposal should have the same character as the one aboutFORMAT-NEGATIVE-PARAMETERS -- it should define the default situation(ie, the expository text which precedes the detail section of the FORMATchapter) and allow the description of any given parameter to overridewhat it says. That would address Walter's concern about ~D. We should notmake the wording fuzzy enough for any dialect to get something in thatpeople don't expect. Instead, we should consider Walter's suggestionthat ~D should bind *PRINT-ESCAPE* (btw, Symbolics Genera does this, too).If we think it's a good suggestion, we should just override the defaultrule which Dan's proposing with an explicit rule for how ~D behaves. Butin the absence of such a rule, I think that ~D should either not bind*PRINT-ESCAPE* or be an error for anything for which the value of *PRINT-ESCAPE* could make a difference. (And since we'll presumably beable to customize the printing of integers once CLOS goes in, I thinkwe'd be best of just defining the value of *PRINT-ESCAPE* in this situationjust in case...)I think the rationale should mention that the key advantage would bethat people can treat (FORMAT stream "~S" object) and (PRIN1 object)as purely a stylistic difference and interchangeable at any time. If theyhave to worry that one treats the control variables differently than theother, then the language is complicated in a way that is not generallyuseful to the garden-variety programmer...*start*05558 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 10 JUN 88 08:28:18 PDTReceived: from multimax.ARPA by SAIL.Stanford.EDU with TCP; 10 Jun 88  08:25:09 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA04307; Fri, 10 Jun 88 11:22:35 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA08738; Fri, 10 Jun 88 11:25:58 EDTMessage-Id: <8806101525.AA08738@mist.UUCP>To: cl-cleanup%sail.stanford.edu@multimax.ARPASubject: Issue: FORMAT-PRETTY-PRINT (version 3)Date: Fri, 10 Jun 88 11:25:52 EDTFrom: Dan L. Pierson <pierson%mist@multimax.ARPA>This version trys to specify a bit more.  What directives did I leaveout? Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate commentsStatus:        For Internal DiscussionProblem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself binds *PRINT-ESCAPE* to NIL and    binds no other of the printer control variables.  Specific FORMAT    directives bind exactly the printer control variables specified in    their description.  While implementations may specify the binding    of new, implementation specific printer control variables for each    FORMAT directive, they may neither bind any standard printer    control variables not specified in description of a FORMAT    directive nor fail to bind any standard printer control variables    as specified in the description."Add the following to the descriptions of the following FORMATdirectives:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to the value of the first argument iff a first    argument is specified.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer controlvariables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:Pierson feels that this is important because the ease of implementingmajor system interfaces with FORMAT can unintentionally lead to lessflexibility for the user compared to an old-style PRIN1/PRINC/TERPRIimplementation.  This clarification would generate some up front workbut would make it harder for people to accidentally create restrictiveinterfaces. After discussion in the cleanup committee, this proposal has beenrecast to explictly specify more of the behavior of FORMAT.*start*00912 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 10 JUN 88 10:07:28 PDTReceived: from hudson.dec.com by SAIL.Stanford.EDU with TCP; 10 Jun 88  10:05:20 PDTDate: 10 Jun 88 12:46:00 EDTFrom: "AITG::VANROGGEN" <vanroggen%aitg.decnet@hudson.dec.com>Subject: Issue: FORMAT-PRETTY-PRINT (version 3)To: "cl-cleanup" <cl-cleanup@sail.stanford.edu>cc: vanroggen@hudson.dec.com Reply-To: "AITG::VANROGGEN" <vanroggen%aitg.decnet@hudson.dec.com>I think it's confusing to say that FORMAT always binds *PRINT-ESCAPE* toNIL and also either binds it to T or NIL as required by various directives.Furthermore, this would seem to disallow directives which don't bind anyof those *PRINT-xxx* variables.  VAX LISP has a ~W directive which printsusing the current *PRINT-xxx* bindings.			---Walter------*start*01385 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 10 JUN 88 10:42:16 PDTReceived: from multimax.ARPA by SAIL.Stanford.EDU with TCP; 10 Jun 88  10:41:28 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA06417; Fri, 10 Jun 88 13:38:57 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA08969; Fri, 10 Jun 88 13:42:22 EDTMessage-Id: <8806101742.AA08969@mist.UUCP>To: "cl-cleanup" <cl-cleanup%sail.stanford.edu@Multimax.ARPA>, vanroggen%SAIL.Stanford.EDU@multimax.ARPASubject: Re: Issue: FORMAT-PRETTY-PRINT (version 3) In-Reply-To: Your message of 10 Jun 88 12:46:00 -0400.             <8806101713.AA05859@multimax.ARPA> Date: Fri, 10 Jun 88 13:42:20 EDTFrom: Dan L. Pierson <pierson%mist@multimax.ARPA>    I think it's confusing to say that FORMAT always binds *PRINT-ESCAPE* to    NIL and also either binds it to T or NIL as required by various directives.    That was a kludge to make it clear that non of the text in formatstatements is ever escaped.  It is probably unnecessary and a mistake.    Furthermore, this would seem to disallow directives which don't bind any    of those *PRINT-xxx* variables.  VAX LISP has a ~W directive which prints    using the current *PRINT-xxx* bindings.    Good point.  A new draft will appear shortly.    *start*05565 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 10 JUN 88 10:46:10 PDTReceived: from multimax.ARPA by SAIL.Stanford.EDU with TCP; 10 Jun 88  10:44:59 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA06642; Fri, 10 Jun 88 13:42:29 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA09004; Fri, 10 Jun 88 13:45:54 EDTMessage-Id: <8806101745.AA09004@mist.UUCP>To: cl-cleanup%sail.stanford.edu@multimax.ARPASubject: Issue: FORMAT-PRETTY-PRINT (version 4)Date: Fri, 10 Jun 88 13:45:52 EDTFrom: Dan L. Pierson <pierson%mist@multimax.ARPA>Walter pointed out that version 3 was broken, so...Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van RoggenStatus:        For Internal DiscussionProblem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."Add the following to the descriptions of the following FORMATdirectives:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to the value of the first argument iff a first    argument is specified.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer controlvariables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:Pierson feels that this is important because the ease of implementingmajor system interfaces with FORMAT can unintentionally lead to lessflexibility for the user compared to an old-style PRIN1/PRINC/TERPRIimplementation.  This clarification would generate some up front workbut would make it harder for people to accidentally create restrictiveinterfaces. After discussion in the cleanup committee, this proposal has beenrecast to explictly specify more of the behavior of FORMAT.*start*06066 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 02 OCT 88 13:33:19 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 2 Oct 88  13:33:12 PDTReceived: from Cabernet.ms by ArpaGateway.ms ; 02 OCT 88 13:31:41 PDTDate: 2 Oct 88 13:31 PDTFrom: masinter.paSubject: Issue: FORMAT-PRETTY-PRINT (version 5)To: cl-cleanup@sail.stanford.eduMessage-ID: <881002-133141-2667@Xerox>I attempted to rewrite this as a change-to-language instead ofchange-to-book, and came across some problems. I don't think that the testcase is accurate; there is no specification about the possible interactionof *print-pretty* and *print-escape*; our pretty printer, for example,creates significantly different output *print-escape* is NIL, and so thetwo pairs are not identical except for the appearance of string quotes. I think the intent of the proposal is to force list structures to beprinted "pretty", but we've not really defined what "pretty" is ever.Unless that's specified, the only case over which we have control is in theinteraction with user written print functions for structures. !Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen		Version 5 by Masinter  2-Oct-88Problem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to the value of the first argument iff a first    argument is specified.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."*start*02192 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 03 OCT 88 10:26:26 PDTReceived: from multimax.ARPA (MULTIMAX.ENCORE.COM) by SAIL.Stanford.EDU with TCP; 3 Oct 88  10:25:44 PDTReceived:  by multimax.ARPA (5.51/25-eef)	id AA08442; Mon, 3 Oct 88 13:25:28 EDTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA25927; Mon, 3 Oct 88 13:27:15 EDTMessage-Id: <8810031727.AA25927@mist.UUCP>To: masinter.pa%Xerox.COM@MULTIMAX.ENCORE.COMCc: cl-cleanup%sail.stanford.edu@MULTIMAX.ENCORE.COMSubject: Re: Issue: FORMAT-PRETTY-PRINT (version 5) In-Reply-To: Your message of 02 Oct 88 13:31:00 -0700.Date: Mon, 03 Oct 88 13:27:13 EDTFrom: Dan L. Pierson <pierson%mist@MULTIMAX.ENCORE.COM>    I attempted to rewrite this as a change-to-language instead of    change-to-book, and came across some problems.If you want, I'll try reword this but I'd rather we were able to voteon it next week since none of your proposed changes seem substantive.In other words, can we vote on the sentiment next week and rewrite itfor January?                                                   I don't think that the test    case is accurate; there is no specification about the possible interaction    of *print-pretty* and *print-escape*; our pretty printer, for example,    creates significantly different output *print-escape* is NIL, and so the    two pairs are not identical except for the appearance of string quotes.     OK, I'll change the description of the test result.    I think the intent of the proposal is to force list structures to be    printed "pretty", but we've not really defined what "pretty" is ever.    Unless that's specified, the only case over which we have control is in the    interaction with user written print functions for structures.     Neither CLtL nor this proposal try to define what "pretty" liststructures are, but both assume that many implementations will dosomething different and both provide access to that unspecifieddifference.  I think that both the vagueness and the access are usefulin most implementations.*start*00732 00024 US Return-Path: <Gray@DSG.csc.ti.com>Received: from ti.com ([10.7.0.46]) by Xerox.COM ; 03 OCT 88 15:49:06 PDTReceived: by ti.com id AA25734; Mon, 3 Oct 88 17:49:26 CDTReceived: from Kelvin by tilde id AA12443; Mon, 3 Oct 88 17:39:23 CDTMessage-Id: <2800910417-11424969@Kelvin>Sender: GRAY@Kelvin.csc.ti.comDate: Mon, 3 Oct 88 17:40:17 CDTFrom: David N Gray <Gray@DSG.csc.ti.com>To: masinter.paSubject: Re: Issue: FORMAT-PRETTY-PRINT (version 5)In-Reply-To: Msg of 2 Oct 88 13:31 PDT from masinter.pa@XEROX.COM> Proposal (FORMAT-PRETTY-PRINT:YES):> > Specify that FORMAT does rebind any of the printer control> variables (*PRINT-...) except as follows:Don't you mean "... does not rebind ..."?*start*02376 00024 US Return-Path: <KMP@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM ([128.81.41.144]) by Xerox.COM ; 05 OCT 88 23:27:52 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 471546; Thu 6-Oct-88 02:28:07 EDTDate: Thu, 6 Oct 88 02:27 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FORMAT-PRETTY-PRINT (version 5)To: Masinter.PA, pierson%mist@MULTIMAX.ENCORE.COMcc: CL-Cleanup@SAIL.Stanford.EDUIn-Reply-To: <881002-133141-2667@Xerox>Message-ID: <881006022755.9.KMP@BOBOLINK.SCRC.Symbolics.COM>I expect to eventually support this proposal, but would like to see acouple of issues dealt with first...    Date: 2 Oct 88 13:31 PDT    From: masinter.pa@Xerox.COM    ...    Issue:         FORMAT-PRETTY-PRINT    ...    Proposal (FORMAT-PRETTY-PRINT:YES):    Specify that FORMAT does rebind any of the printer control    variables (*PRINT-...) except as follows:I assume you mean "...does not rebind..."    ~R	Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and	*PRINT-BASE* to the value of the first argument iff a first	argument is specified.I'd say: ``Iff a first argument is specified, binds *PRINT-ESCAPE*           to NIL, *PRINT-RADIX* to NIL, and *PRINT-BASE* to the	   value of the first argument.''It doesn't really matter what happens if there is no argument, butthis would avoid any silly questions on the subject.Actually: CLtL doesn't say the English ordinal is base-10. Onecould imagine expecting that someone might want (LET ((*PRINT-BASE* 8)) (FORMAT NIL "~R" 8)) => "ten"Presumably this is not what anyone does, but perhaps we shouldshoe-horn that in here (to avoid writing up a whole issue for sucha silly little detail). ... Or perhaps we should say that in the noargument case it binds *PRINT-BASE* to 10, and let people infer fromthat that it's insensitive to bindings of *PRINT-BASE* in the no-argument case.    ~F,~G,~E,~$	Binds *PRINT-ESCAPE* to NIL.Again, one might expect that (LET ((*PRINT-BASE* 8)) (FORMAT NIL "~E" 8.5))should return "10.4". Maybe we should say that *PRINT-BASE* isbound to 10, etc. just to avoid this issue?    Test Cases/Examples:    ...The test case is very cute but overly complicated and doesn'taddress the full scope of the proposal.*start*05741 00024 US Return-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 08 OCT 88 17:16:09 PDTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 8 Oct 88  17:02:57 PDTReceived: from Semillon.ms by ArpaGateway.ms ; 08 OCT 88 16:58:10 PDTDate: 8 Oct 88 16:58 PDTSender: masinter.paSubject: DRAFT Issue: FORMAT-PRETTY-PRINT (version 5)From: cl-cleanup@sail.stanford.eduTo: x3j13@sail.stanford.eduREPLY-TO: cl-cleanup@sail.stanford.eduline-fold: NOcc: Masinter.paMessage-ID: <881008-165810-2344@Xerox>The only comment on this issue is on the binding of *PRINT-BASE*under  ~E, ~R, e.g. (LET ((*PRINT-BASE* 8)) (FORMAT NIL "~R" 8))or  (LET ((*PRINT-BASE* 8)) (FORMAT NIL "~E" 8.5))!Status: DRAFTIssue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen		Version 5 by Masinter  2-Oct-88Problem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does not rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Iff a first argument is specified, binds *PRINT-ESCAPE* to NIL,     *PRINT-RADIX* to NIL, and *PRINT-BASE* to the value of the first     argument.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.<<the test is not accurate in systems where prettyprintingmight indent differently when *print-escape* is NIL.>>Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying which will have to changewhichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."*start*00817 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 14:00:28 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  14:00:13 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 475874; Thu 13-Oct-88 16:58:49 EDTDate: Thu, 13 Oct 88 16:58 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FORMAT-PRETTY-PRINT (Version 5)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013165841.3.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting...X3J13 meeting: Haflich: Related issue: Which I/O functions can rebind -stream- vars.*start*00586 00024 US Date:  4 Nov 88 12:37 PSTFrom: masinter.paSubject: Re: Issue: FORMAT-PRETTY-PRINT (version 5) In-reply-to: Dan L. Pierson <pierson%mist@MULTIMAX.ENCORE.COM>'s message of Mon, 03 Oct 88 13:27:13 EDTTo: Dan L. Pierson <pierson%mist@MULTIMAX.ENCORE.COM>cc: masinterMy notes are that we are expecting a new version of this proposal from you... while we didn't vote on the issue, we've heard no serious objections to it either so, if rewritten to take care of the comments, I think it will be OK.Do you need the last version or any of the back mail?Larry*start*00520 00024 US Date:  8 Nov 88 17:25 PSTFrom: masinter.paSubject: Re: Issue: FORMAT-PRETTY-PRINT (version 5) In-reply-to: Dan L. Pierson <pierson@mist.ARPA>'s message of Fri, 04 Nov 88 16:00:56 ESTTo: Dan L. Pierson <pierson@mist.ARPA>cc: masinterAny survey should be coherent -- explain terms, give test cases -- and accompanied by a description of what will be done with the results. Under those circumstances, a formal vendor survey would be very helpful.I am awaiting eagerly your new proposals.*start*05916 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 NOV 88 11:00:02 PSTReceived: from multimax.encore.com by SAIL.Stanford.EDU with TCP; 10 Nov 88  10:58:26 PSTReceived: from mist.encore.COM by multimax.encore.com (5.59/25-eef)	id AA13142; Thu, 10 Nov 88 13:57:14 ESTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA00931; Thu, 10 Nov 88 14:01:09 ESTMessage-Id: <8811101901.AA00931@mist.UUCP>To: cl-cleanup%sail.stanford.edu@multimax.encore.comSubject: Issue: FORMAT-PRETTY-PRINT (Version 6)Date: Thu, 10 Nov 88 14:01:06 ESTFrom: Dan L. Pierson <pierson@mist.ARPA>Here it is at last.Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen	       Version 5 by Masinter  2-Oct-88               Version 6 by Pierson 11/10/88 final nitsProblem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Iff a first argument is specified, binds *PRINT-ESCAPE* to NIL,    *PRINT-RADIX* to NIL, and *PRINT-BASE* to the value of the first    argument.    Iff no aruments are specified, binds *PRINT-BASE* to 10.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying implementations which willhave to change whichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."There was some discussion on whether *PRINT-BASE* should be bound for~F, ~G, ~E, and ~$.  This is not necessary because page 341 of CLtLstates that floating point numbers are always printed in base 10.*start*01204 00024 USaReturn-Path: <@multimax.encore.com:pierson@mist>Received: from multimax.encore.com ([192.5.63.14]) by Xerox.COM ; 04 NOV 88 12:57:50 PSTReceived: from mist.encore.COM by multimax.encore.com (5.59/25-eef)	id AA08598; Fri, 4 Nov 88 15:57:04 ESTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA01993; Fri, 4 Nov 88 16:01:00 ESTMessage-Id: <8811042101.AA01993@mist.UUCP>To: masinter.pa%Xerox.COM@multimax.encore.comSubject: Re: Issue: FORMAT-PRETTY-PRINT (version 5) In-Reply-To: Your message of 04 Nov 88 12:37:00 -0800.             <881104-123721-5110@Xerox> Date: Fri, 04 Nov 88 16:00:56 ESTFrom: Dan L. Pierson <pierson@mist.ARPA>Oops, our Sun disk server just came back up after 2 1/2 days down, soI'm back to life again.I'll try to get new versions of FORMAT-PRETTY-PRINT,REQUIRE-PATHNAME-DEFAULTS, and DESCRIBE-INTERACTIVE out early nextweek.  There's some stuff here I absolutely have to do first.Do you think that a "formal"* vendor survey on pathname currentpractice would be worthwhile?  I've been thinking about putting onetogether.                                             dan* In the sense of a real, detailed (electronic) survey form.*start*06023 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 15 NOV 88 14:18:57 PSTReceived: from multimax.encore.com by SAIL.Stanford.EDU with TCP; 15 Nov 88  14:16:02 PSTReceived: from mist.encore.COM by multimax.encore.com (5.59/25-eef)	id AA00507; Tue, 15 Nov 88 17:14:43 ESTReceived: from localhost by mist.UUCP (3.2/4.7)	id AA07012; Tue, 15 Nov 88 17:18:38 ESTMessage-Id: <8811152218.AA07012@mist.UUCP>To: cl-cleanup%sail.stanford.edu@Multimax.encore.comSubject: Issue: FORMAT-PRETTY-PRINT (Version 7)Date: Tue, 15 Nov 88 17:18:36 ESTFrom: Dan L. Pierson <pierson@mist.ARPA>This just fixes one major typo discovered by David Grey.Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen	       Version 5 by Masinter  2-Oct-88               Version 6 by Pierson 11/10/88 final nits               Version 7 by Pierson 11/15/88 "does" => "does not"Problem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does not rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Iff a first argument is specified, binds *PRINT-ESCAPE* to NIL,    *PRINT-RADIX* to NIL, and *PRINT-BASE* to the value of the first    argument.    Iff no aruments are specified, binds *PRINT-BASE* to 10.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying implementations which willhave to change whichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."There was some discussion on whether *PRINT-BASE* should be bound for~F, ~G, ~E, and ~$.  This is not necessary because page 341 of CLtLstates that floating point numbers are always printed in base 10.*start*05815 00024 US Date:  7 Dec 88 21:33 PSTSender: masinter.pato: X3J13@sail.stanford.eduFrom: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.eduSubject: Issue: FORMAT-PRETTY-PRINT (Version 7)cc: Masinterline-fold: noIssue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen	       Version 5 by Masinter  2-Oct-88               Version 6 by Pierson 11/10/88 final nits               Version 7 by Pierson 11/15/88 "does" => "does not"Problem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does not rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Iff a first argument is specified, binds *PRINT-ESCAPE* to NIL,    *PRINT-RADIX* to NIL, and *PRINT-BASE* to the value of the first    argument.    Iff no aruments are specified, binds *PRINT-BASE* to 10.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying implementations which willhave to change whichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."There was some discussion on whether *PRINT-BASE* should be bound for~F, ~G, ~E, and ~$.  This is not necessary because page 341 of CLtLstates that floating point numbers are always printed in base 10.        TITAN 
         TITAN 
                                k                           p                     $      
                                        
                                   
                     Y                   m z*start*05833 00024 US Return-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 07 DEC 88 22:05:22 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 7 Dec 88  21:43:15 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 07 DEC 88 21:33:31 PSTDate: 7 Dec 88 21:33 PSTSender: masinter.pato: X3J13@sail.stanford.eduFrom: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.eduSubject: Issue: FORMAT-PRETTY-PRINT (Version 7)cc: Masinter.paline-fold: noMessage-ID: <881207-213331-2723@Xerox>!Issue:         FORMAT-PRETTY-PRINTReferences:    FORMAT (pp. 385-388), PRIN1 (p. 83), PRINC (p. 83),               WRITE (p. 382), *PRINT-PRETTY* (p. 371)Category:      CLARIFICATIONEdit history:  Version 1 by Pierson 3/4/88    	       Version 2 by Pierson 5/24/88 (fix name typo)	       Version 3 by Pierson 6/10/88 incorporate comments	       Version 4 by Pierson 6/10/88 comments from Van Roggen	       Version 5 by Masinter  2-Oct-88               Version 6 by Pierson 11/10/88 final nits               Version 7 by Pierson 11/15/88 "does" => "does not"Problem description:The FORMAT operators, ~A and ~S are defined to print their argument asPRINC and PRIN1 respectively.  The text does not say whether or notthese FORMAT operators must obey the *PRINT-PRETTY* flag.Proposal (FORMAT-PRETTY-PRINT:YES):Specify that FORMAT does not rebind any of the printer controlvariables (*PRINT-...) except as follows:~A    Binds *PRINT-ESCAPE* to NIL.~S    Binds *PRINT-ESCAPE* to T.~D    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 10.~B    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 2.~O    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 8.~X    Binds *PRINT-ESCAPE* to NIL, *PRINT-RADIX* to NIL, and    *PRINT-BASE* to 16.~R    Iff a first argument is specified, binds *PRINT-ESCAPE* to NIL,    *PRINT-RADIX* to NIL, and *PRINT-BASE* to the value of the first    argument.    Iff no aruments are specified, binds *PRINT-BASE* to 10.~@C    Binds *PRINT-ESCAPE* to T.~F,~G,~E,~$    Binds *PRINT-ESCAPE* to NIL.Test Cases/Examples:(LET ((TEST '#'(LAMBDA (X)		 (LET ((*PRINT-PRETTY* T))		   (PRINT X)		   (FORMAT T "~%~S " X)		   (TERPRI) (PRINC X) (PRINC " ")		   (FORMAT T "~%~A " X)))))  (FUNCALL (EVAL TEST) TEST))This should print four copies of the above lambda expression.  Thefirst pair should appear identical and the second pair should appearidentical.  The only difference between the two pairs should be theabsence of string quotes in the second pair.Rationale:FORMAT should interact with the printer control variables in apredictable way.  This proposal is one of the two simplest possibledefinitions and provides the most flexibility to the user.A major advantage of this proposal is that the following twoexpressions are guaranteed to have exactly the same effect:    (FORMAT stream "~S" object)    (PRIN1 object stream)Thus use or non-use of FORMAT becomes a purely stylistic matter.Current practice:Ibuki Lisp and the TI Explorer obey the binding of *PRINT-PRETTY*.Lucid Common Lisp always applies ~A and ~S with *PRINT-PRETTY* boundto NIL.Cost to Implementors:While changing FORMAT to not bind *PRINT-foo* variables is trivial,there are some painful implications.  How does a pretty-printing ~Ainteract with MINCOL, etc?  How much of the user interface depends onFORMAT in ways that might be uglified by pretty printing?Cost to Users:Truely portable code shouldn't be affected because existingimplementations are inconsistent.  Despite this, there are probably anumber of user programs in non-complying implementations which willhave to change whichever way this is decided.Cost of non-Adoption:The interaction of FORMAT and the printer control variables (especially*PRINT-PRETTY*) will remain undefined.  This will continue to makeportable Common Lisp programming harder than it need be.Benefits:Life will be easier for users in two ways: (1) one more portabilityproblem will be removed, and (2) users will be more likely to be ableto persuade environmental features like debuggers to print in theirpreferred way.Aesthetics:The interaction between two related parts of output will be clarifiedin a simple way.Discussion:It is important to specify exactly what of Common Lisp's specialvariables get rebound by other functions and macros in Common Lisp.This cleanup issue addresses the interaction of FORMAT and the*PRINT-  variables. There may be other similar interactions in Common Lisp that need clarification.Otherwise, code that depends on FORMATs action in one implementationwill not port to others that do not have the same behavior.CLtL might change as follows:Add a header "Printer Control Variables" before the description of*PRINT-ESCAPE* on page 370.Add the following paragraph to page 386 just before the paragraphstarting with "It is an error":    "The FORMAT function by itself never binds any of the printer    control variables.  Specific FORMAT directives bind exactly the    printer control variables specified in their description.  While    implementations may specify the binding of new, implementation    specific printer control variables for each FORMAT directive, they    may neither bind any standard printer control variables not    specified in description of a FORMAT directive nor fail to bind    any standard printer control variables as specified in the    description."There was some discussion on whether *PRINT-BASE* should be bound for~F, ~G, ~E, and ~$.  This is not necessary because page 341 of CLtLstates that floating point numbers are always printed in base 10.