*start*00750 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 06 DEC 88 18:18:31 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 6 Dec 88  18:08:26 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 06 DEC 88 17:58:06 PSTDate: 6 Dec 88 17:57 PSTFrom: masinter.paSubject: Re: New proposed issue APPEND-ATOMIn-reply-to: Guy Steele <gls@Think.COM>'s message of Tue, 6 Dec 88 14:29:22 ESTTo: Guy Steele <gls@Think.COM>cc: cl-cleanup@sail.stanford.eduMessage-ID: <881206-175806-7312@Xerox>For Current Practice, Envos Medley implements APPEND-ATOM:IGNORE; it wasmore compatible with the Interlisp definition of APPEND.*start*00416 00024 US Date:  6 Jan 89 11:22 PSTFrom: masinter.paSubject: Issue APPEND-ATOM (Version 1)To: KMP@STONY-BROOK.SCRC.Symbolics.COMcc: masinter.paI have apparently misplaced Guy Steele <gls@Think.COM>'s message of Tue, 6 Dec 88 14:29:22  ESTNew proposed issue APPEND-ATOMIf you find it, would you mail it to X3J13? It seems uncontroversial and possibly we could get it voted on this meeting.*start*00794 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 JAN 89 15:36:54 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 10 Jan 89  15:36:35 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 10 JAN 89 15:35:10 PSTDate: 10 Jan 89 15:34 PSTFrom: masinter.paSubject: Re: New proposed issue APPEND-ATOMIn-reply-to: masinter.pa's message of 6 Dec 88 17:57 PSTTo: Guy Steele <gls@Think.COM>cc: cl-cleanup@sail.stanford.eduMessage-ID: <890110-153510-6915@Xerox>I have apparently misplaced:Guy Steele <gls@Think.COM>'s message of Tue, 6 Dec 88 14:29:22  ESTSubject: New proposed issue APPEND-ATOMDo you have it?If you find it, would you mail it to me?*start*05279 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 JAN 89 15:52:00 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 10 Jan 89  15:50:51 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 518869; Tue 10-Jan-89 18:48:25 ESTReturn-path: <CL-Cleanup-mailer@SAIL.STANFORD.EDU>Received: from SAIL.STANFORD.EDU by STONY-BROOK.SCRC.Symbolics.COM via INTERNET with SMTP id 504032; 6 Dec 88 14:43:29 ESTReceived: from Think.COM by SAIL.Stanford.EDU with TCP; 6 Dec 88  11:32:31 PSTReceived: from fafnir.think.com by Think.COM; Tue, 6 Dec 88 13:52:42 ESTReturn-Path: <gls@Think.COM>Received: from verdi.think.com by fafnir.think.com; Tue, 6 Dec 88 14:30:50 ESTReceived: by verdi.think.com; Tue, 6 Dec 88 14:29:22 ESTDate: Tue, 6 Dec 88 14:29:22 ESTFrom: Guy Steele <gls@Think.COM>Message-Id: <8812061929.AA12814@verdi.think.com>To: cl-cleanup@sail.stanford.eduSubject: New proposed issue APPEND-ATOMResent-To: CL-Cleanup@SAIL.Stanford.EDUResent-From: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Resent-Date: Tue, 10 Jan 89 18:47 ESTResent-Message-ID: <890110184752.7.KMP@BOBOLINK.SCRC.Symbolics.COM>Issue:        APPEND-ATOMReferences:   APPEND (p268)	      Issue APPEND-DOTTEDCategory:     CHANGE/CLARIFICATIONEdit history: 06-Dec-88 by SteeleProblem Description:The issue APPEND-DOTTED, as passed by X3J13, contains a minor technicalflaw: it can be construed as leaving undefined the case where an argumentto APPEND other than the last is an atom.  The relevant paragraph of thatissue proposal is:   In the degenerate case where there is no last cons (i.e., the argument is   NIL) in any but the last list argument, clarify that the entire argument is   effectively ignored. Point out that in this situation, if the last argument   is a non-list, the result of APPEND or NCONC can be a non-list.Here is the nit: the use of "i.e." leads one to believe that theonly degenerate case defined is that where the argument is NIL.I suspect that "e.g." was intended, so as to make all atomic objectsignored in other than the last argument.Proposal (APPEND-ATOM:IGNORE):In the degenerate case where there is no last cons (i.e., the argumentis an atom) in any but the last list argument, clarify that the entireargument is effectively ignored. Point out that in this situation, ifthe last argument is a non-list, the result of APPEND or NCONC can bea non-list.Proposal (APPEND-ATOM:ERROR)In the degenerate case where there is no last cons (i.e., the argumentis an atom) in any but the last list argument, clarify that a value ofNIL is treated as an empty list and therefore effectively ignored, andany other atom is an error. Point out that in this situation, if thelast argument is a non-list, the result of APPEND or NCONC can be anon-list.Examples (APPEND-ATOM:DOTTED):(APPEND '(a b) 'MOOSE '(c . d)) => (a b c . d)	;Proposed(NCONC '(a b) 'MOUSSE '(c . d)) => (a b c . d)	;Proposed(APPEND 'GUACAMOLE 17) => 17			;Proposed(NCONC 'SAUERKRAUT 17) => 17			;ProposedUnder APPEND-ATOM:ERROR these cases would all be errors.Rationale: APPEND-ATOM:IGNORE makes a boundary case (a "zero-length dotted list")consistent with other cases handled by the proposal APPEND-DOTTED:REPLACE.APPEND-ATOM:ERROR would at least resolve a possible ambiguity.Current Practice:Lucid Lisp, KCL, and Symbolics Common Lisp all signal an error in bothinterpreted and compiled code.Cost to implementors:Technically, the change for APPEND-ATOM:IGNORE should be relativelysmall for those implementations which don't already implement it.However, implementations which have microcoded APPEND or NCONCincompatibly may find the small change somewhat painful.Some implementations may have optimized their APPEND or NCONC to expect onlyNIL when SAFETY is 0. In this case, depending on implementation details,requiring an ATOM check rather than a NULL check may slow things down.Cost to users:Each proposal is upward compatible.Benefits:Since dotted lists are allowed as a non-last argument, readers willprobably assume that the boundary case of a zero-length dotted list(that is, an atom) also works, something that doesn't appear to beguaranteed by a strict reading. Proposal APPEND-ATOM:IGNORE wouldhappen to legitimize such assumptions.Aesthetics:Whether or not users will think this improves the aesthetics of the languagewill depend largely on how they view the relation between lists and dottedlists. Those who view dotted lists as a special kind of list may feeldifferently than those who view lists as a special kind of dotted list.The downside of APPEND-ATOM:IGNORE is that APPEND is supposed tooperate on lists, and it is mildly offensive to let it accept atoms,and worse yet to ignore them.  Furthermore, a certain amount of usefulerror checking may be lost.Discussion:Guy Steele supports proposal APPEND-ATOM:IGNORE, but with some qualms.He raises it mainly because of the possibility thatAPPEND-DOTTED:REPLACE was not worded exactly as intended.*start*01394 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 JAN 89 15:52:04 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 10 Jan 89  15:51:15 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via INTERNET with SMTP id 518871; 10 Jan 89 18:49:30 ESTReturn-path: <CL-Cleanup-mailer@SAIL.STANFORD.EDU>Received: from SAIL.STANFORD.EDU by STONY-BROOK.SCRC.Symbolics.COM via INTERNET with SMTP id 504326; 6 Dec 88 21:21:40 ESTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 6 Dec 88  18:08:26 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 06 DEC 88 17:58:06 PSTDate: 6 Dec 88 17:57 PSTFrom: masinter.paSubject: Re: New proposed issue APPEND-ATOMIn-reply-to: Guy Steele <gls@Think.COM>'s message of Tue, 6 Dec 88 14:29:22 ESTTo: Guy Steele <gls@Think.COM>cc: cl-cleanup@sail.stanford.eduMessage-ID: <881206-175806-7312@Xerox>Resent-To: CL-Cleanup@SAIL.Stanford.EDUResent-From: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Resent-Date: Tue, 10 Jan 89 18:49 ESTResent-Message-ID: <890110184912.8.KMP@BOBOLINK.SCRC.Symbolics.COM>For Current Practice, Envos Medley implements APPEND-ATOM:IGNORE; it wasmore compatible with the Interlisp definition of APPEND.*start*01134 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 11 JAN 89 15:17:56 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 11 Jan 89  13:38:47 PSTReceived: from Cabernet.ms by ArpaGateway.ms ; 11 JAN 89 13:34:46 PSTDate: 11 Jan 89 13:33 PSTFrom: masinter.paSubject: Re: New proposed issue APPEND-ATOMIn-reply-to: Guy Steele <gls@Think.COM>'s message of Tue, 6 Dec 88 14:29:22 ESTTo: Guy Steele <gls@Think.COM>cc: cl-cleanup@sail.stanford.eduMessage-ID: <890111-133446-10438@Xerox>The proposal labelledProposal (APPEND-ATOM:IGNORE):is referred to by Examples (APPEND-ATOM:DOTTED).The last sentence of the APPEND-ATOM:IGNORE is hard for to parse. I'd say "Point out that if all of the arguments are non-lists, the result of APPENDor NCONC can be a non-list."We've gotten no opinions on this issue. If I believe the phrase in CLtLthat says that "unless otherwise specified, a 'list' is a proper list",then APPEND-ATOM:ERROR is a clarification and APPEND-ATOM:DOTTED is achange.*start*04505 00024 US Date: 12 Jan 89 01:09 PSTSender: masinter.paSubject: Issue: APPEND-ATOM (Version 1)To: X3J13@Sail.Stanford.EduReply-to: cl-cleanup@sail.stanford.eduFrom: cl-cleanup@sail.stanford.educc: masinterline-fold: NoIssue:        APPEND-ATOMReferences:   APPEND (p268)	      Issue APPEND-DOTTEDCategory:     CHANGE/CLARIFICATIONEdit history: Version 1 06-Dec-88 by SteeleProblem Description:The issue APPEND-DOTTED, as passed by X3J13, contains a minor technicalflaw: it can be construed as leaving undefined the case where an argumentto APPEND other than the last is an atom.  The relevant paragraph of thatissue proposal is:   In the degenerate case where there is no last cons (i.e., the argument is   NIL) in any but the last list argument, clarify that the entire argument is   effectively ignored. Point out that in this situation, if the last argument   is a non-list, the result of APPEND or NCONC can be a non-list.Here is the nit: the use of "i.e." leads one to believe that theonly degenerate case defined is that where the argument is NIL.I suspect that "e.g." was intended, so as to make all atomic objectsignored in other than the last argument.Proposal (APPEND-ATOM:IGNORE):In the degenerate case where there is no last cons (i.e., the argumentis an atom) in any but the last list argument, clarify that the entireargument is effectively ignored. Point out that in this situation, ifthe last argument is a non-list, the result of APPEND or NCONC can bea non-list.Proposal (APPEND-ATOM:ERROR)In the degenerate case where there is no last cons (i.e., the argumentis an atom) in any but the last list argument, clarify that a value ofNIL is treated as an empty list and therefore effectively ignored, andany other atom is an error. Point out that in this situation, if thelast argument is a non-list, the result of APPEND or NCONC can be anon-list.Examples:Under APPEND-ATOM:IGNORE:(APPEND '(a b) 'MOOSE '(c . d)) => (a b c . d)	;Proposed(NCONC '(a b) 'MOUSSE '(c . d)) => (a b c . d)	;Proposed(APPEND 'GUACAMOLE 17) => 17			;Proposed(NCONC 'SAUERKRAUT 17) => 17			;ProposedUnder APPEND-ATOM:ERROR these cases would all be errors.Rationale: APPEND-ATOM:IGNORE makes a boundary case (a "zero-length dotted list")consistent with other cases handled by the proposal APPEND-DOTTED:REPLACE.APPEND-ATOM:ERROR would at least resolve a possible ambiguity.Current Practice:Lucid Lisp, KCL, and Symbolics Common Lisp all signal an error in bothinterpreted and compiled code.Cost to implementors:Technically, the change for APPEND-ATOM:IGNORE should be relativelysmall for those implementations which don't already implement it.However, implementations which have microcoded APPEND or NCONCincompatibly may find the small change somewhat painful.Some implementations may have optimized their APPEND or NCONC to expect onlyNIL when SAFETY is 0. In this case, depending on implementation details,requiring an ATOM check rather than a NULL check may slow things down.Cost to users:Each proposal is upward compatible.Benefits:Since dotted lists are allowed as a non-last argument, readers willprobably assume that the boundary case of a zero-length dotted list(that is, an atom) also works, something that doesn't appear to beguaranteed by a strict reading. Proposal APPEND-ATOM:IGNORE wouldhappen to legitimize such assumptions.Aesthetics:Whether or not users will think this improves the aesthetics of the languagewill depend largely on how they view the relation between lists and dottedlists. Those who view dotted lists as a special kind of list may feeldifferently than those who view lists as a special kind of dotted list.The downside of APPEND-ATOM:IGNORE is that APPEND is supposed tooperate on lists, and it is mildly offensive to let it accept atoms,and worse yet to ignore them.  Furthermore, a certain amount of usefulerror checking may be lost.Discussion:Guy Steele supports proposal APPEND-ATOM:IGNORE, but with some qualms.He raises it mainly because of the possibility thatAPPEND-DOTTED:REPLACE was not worded exactly as intended.        TITAN 
         TITAN 
           è                     )                                                      (             k       
                    Ô              h             ß              '       
      6                           ¶      = zº*start*11179 00024 USaReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 12 JAN 89 20:38:03 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 12 Jan 89  20:36:21 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 520764; Thu 12-Jan-89 23:34:36 ESTDate: Thu, 12 Jan 89 23:34 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: APPEND-FIASCO (Version 2)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <890112233424.7.KMP@BOBOLINK.SCRC.Symbolics.COM>Issue:        APPEND-FIASCOForum:	      CleanupReferences:   APPEND (p268), NCONC (p269), Backquote (pp349-351),	      issue APPEND-DOTTED, issue APPEND-ATOM,	      issue BACKQUOTE-COMMA-ATSIGN-DOT-COMMACategory:     CLARIFICATION/CHANGEEdit history: 11-Jan-89, Version 1 by Pitman (internal review at Symbolics)	      12-Jan-89, Version 2 by Pitman (merge comments)	Status:	      For Internal DiscussionSubsumes:     issue APPEND-DOTTED (already adopted by X3J13),	      issue APPEND-ATOM,	      issue BACKQUOTE-COMMA-ATSIGN-DOT-COMMAProblem Description:  Issue APPEND-DOTTED sought to clarify a vague part of the language  in a useful and interesting way (which was already current practice  in several implementations).  Unfortunately, that clarification had unanticipated consequences  which give us reason to reconsider the decision:    - (APPEND "FOO" "BAR") is one example of a degenerate       case of APPEND not treated explicitly by the APPEND-DOTTED      proposal. Issue APPEND-ATOM was raised to deal with this.      The proposal suggested that this either signal an error or      return "BAR".    - The fact that `(FOO ,@X) might not return the same as      `(FOO .,X), if X were a dotted list, is another example.      Issue BACKQUOTE-COMMA-ATSIGN-DOT-COMMA was raised to deal      with this. There was disagreement about how to resolve the      problem.Proposal (APPEND-FIASCO:DOTTED-IS-ERROR):  Revert the approval of issue APPEND-DOTTED:REPLACE.  Since its problem described in APPEND-DOTTED is also reverted, solve the  it anew in the following different way:  1. Define that the effects of passing a dotted list to APPEND or     NCONC are undefined.  2. Define that the effects of passing a non-null atom to APPEND     or NCONC are undefined.  3. Clarify that it is an error for the form following a ",@" or a ",."     to return an atom or a dotted list.     3a. Clarify that since it is permissible for the form following a	 normal "," to return an atom or dotted list, there are logically	 no restrictions on the return value of the form following ".,".	 As such, ".," may be useful in some cases involving atoms or	 dotted lists where ",@" is undefined.  4. Clarify that although (COPY-LIST x) and (APPEND x '()) agree for     all valid arguments X, COPY-LIST is defined on some values that APPEND     isn't. As such, the two are not equivalent in intent and no relation     should be made between them.  5. Observe that the above rules have these implications:     5a. Due to 1 and 2: Valid uses of APPEND and NCONC can never return	 dotted lists.     5b. Due to 3: For all valid uses of ",@" before the last element of         a list, using ".," instead will produce structurally equivalent	 code.     5c. Due to 3: For all valid uses of ",." before the last element of         a list, using ".," instead will produce structurally equivalent         code [although there may be differences in the side-effect 	 behavior].     5d. Due to 3: For all valid uses of ",@", using ",." instead will         produce structurally equivalent code [although there may be         differences in the side-effect behavior].Test Case:  1.1  (APPEND '(A . B) '(C)) is undefined.       It might return (A C), APPEND might signal an error, memory might       be corrupted, etc.  1.2  (APPEND '(A) '(B . C)) is undefined.       It might return (A B . C), APPEND might signal an error, memory       might be corrupted, etc.  2.1  (APPEND 'A '(B)) is undefined.       It might return (B), APPEND might signal an error, memory       might be corrupted, etc.  2.2  (APPEND '(A) 'B) is undefined.       It might return (A . B), APPEND might signal an error, memory       might be corrupted, etc.  2.3  (APPEND "A" "B") is undefined.       It might return "B", it might return "AB", APPEND might signal       an error, memory might be corrupted, etc.  3.1  `(A ,@'(B . C)) is undefined.       It might return (A B . C), the operator into which ",@" expands        might signal an error, memory might be corrupted, etc.  3.2  `(A ,@'B) is undefined.       It might return (A . B), the operator into which ",@" expands        might signal an error, memory might be corrupted, etc.  3a.1 `(A .,'(B . C)) must return (A B . C).  3a.2 `(A .,'B) must return (A . B).Rationale:  This addresses the problems originally raised in APPEND-DOTTED.  However, unlike APPEND-DOTTED, the solution suggested is to tighten  existing definitions rather than loosening them. Such an approach is  far less likely to lead to internal inconsistencies.  Keeping people from confusing (APPEND x '()) with (COPY-LIST x) is  a good idea anyway, since we might someday want to loosen the  restrictions on what arguments APPEND copies so that it doesn't  bother to copy an argument when all subsequent arguments are ().Current Practice:  All valid implementations are presumably compatible with this,  whether they have switched to the APPEND-DOTTED behavior or not.  [Source for the following information is the writeup for    APPEND-DOTTED (Version 5), approved by X3J13:]  Symbolics Lisp, Vaxlisp, and Lucid Lisp appear to implement   APPEND-DOTTED:REPLACE (at least in the interpreter). Franz's  Allegro Common Lisp also conforms to that proposal except in  the case of (NCONC (LIST) 17) => 17, where it returns NIL instead  of 17.  Kyoto Common Lisp signals an error when using APPEND or NCONC on  a dotted list.  Xerox Common Lisp signals an error on APPEND of a dotted list but  permits NCONC on a dotted list.Cost to Implementors:  None. This change is upward compatible.Cost to Users:  Technically none. Unless this change causes an implementation to  change, no user code would be forced to change. Any user code which  does have to change was certainly not portable to begin with.Cost of Non-Adoption:  Some people might resist the full set of changes needed to make  APPEND-DOTTED consistent throughout the language. The aesthetic  cost of having things be inconsistent in the language are probably  higher than the pragmatic costs of portability problems having some  implementations extending APPEND and NCONC in ways that are barriers  to portability.  We already have evidence (issues BACKQUOTE-COMMA-ATSIGN-DOT-COMMA  and APPEND-ATOM) that APPEND-DOTTED had consequences which were  unforseen. One risk of going forward is that other issues like them  will arise only after using this language, too late to be corrected  by the standard.Benefits:  Implementations which do not extend APPEND and NCONC can make useful  optimizations in high speed/low safety code based on the knowledge that  they always return proper lists.Aesthetics:  This proposal improves linguistic aesthetics, possibly at some expense to  portability [since implementations will probably differ on how they treat  the part of the contract of APPEND and NCONC which has been made vague].Discussion:  Pitman originally wrote and supported APPEND-DOTTED based on observations  of current practice, but now believes that the price of pursuing that  approach may have been too high.  Michael Greenwald, Kent Pitman, Glenn Burke, and David Moon read version  1 of this proposal. The level of support or opposition varied, centered  around ambivalence with no strikingly strong positions in favor or against.  In spite of lack of agreement on this particular proposal, there was general  agreement that the whole situation with APPEND was getting pretty weird  and that we should at least be willing to consider alternatives in attempt  to reach a closure on these complicated issues.  Glenn Burke was the most skeptical. He doesn't like to view NCONC as a  destructive form of APPEND. He likes to think of it as a way of achieving  (RPLACD (LAST x) y). He doesn't care if it's inconsistent with APPEND.  He's mostly just worried about existing code breaking, and about loss of  functionality. This proposal was therefore not his preference, but he  didn't absolutely condemn it either.  Moon observes that in issue REMF-DESTRUCTION-UNSPECIFIED, many people  have expressed concern that the precise side-effect of NCONC should be   more well-defined than that of other destructive operators because it  has a lot of history and a lot of code depending on it. The bottom line  here was that extending the arguments (per APPEND-DOTTED) does not risk  breaking code, while restricting the arguments (per this proposal) does.  Some (not necessarily exclusive) alternatives are:   - decide that APPEND-DOTTED was right and continue with APPEND-ATOM     and BACKQUOTE-COMMA-ATSIGN-DOT-COMMA for consistency.   - back up pre-APPEND-DOTTED days and write a proposal reaffirming     the status quo, simply making disagreements and/or boundary cases     explicit.   - write a DOTTED-SHOULD-SIGNAL variant of the above proposal,     requiring implementations to signal an error at least in the     highest safety setting [though perhaps not for the last     argument; see next option]. Such a variant would implicitly     define implementations which extend APPEND and NCONC to handle     dotted lists to be non-conforming.   - a variant which weakened the restriction on argument type so     that only the last argument to APPEND and NCONC could be dotted,     but no other argument could be. This makes practical sense since     it's highly unlikely that any implementation will want to actually     verify that particular argument. [However, doing so might lose the     useful optimizations that could be done by knowing that the     results of NCONC and APPEND are always proper lists. In the long     run such optimizations might be of considerable value. Among other     things, this change to APPEND-DOTTED seems to have begun a trend     toward using ATOM rather than ENDP to end-check lists. While it     makes the language more powerful, it may also make it slower.     On the other hand, this second order problem would be lessened if     there were a PROPER-LIST type so that you could declare the inputs     to APPEND and NCONC to be proper lists, and the type of the output     could be inferred by compilers.]  A consequence of this proposal is that the optimization    (NCONC X NIL) => X  becomes legitimate for implementations that disallow dotted lists as  arguments to NCONC.*start*01063 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 JAN 89 10:40:04 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 13 Jan 89  10:39:20 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 13 JAN 89 10:34:16 PSTDate: 13 Jan 89 10:33 PSTFrom: masinter.paSubject: Re: Issue: APPEND-FIASCO (Version 2)In-reply-to: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>'s message of Thu, 12 Jan 89 23:34 ESTTo: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <890113-103416-3005@Xerox>I don't like this. If we made a mistake on an old issue, we should justvote to rescind the old proposal and introduce a new one. The Discussion section can give some of the history, if you like, e.g.,that we originally passed APPEND-DOTTED:REPLACE but then discovered thatwe'd also have to fix backquote.I'd like this as a new version of APPEND-DOTTED brought up forreconsideration. 