*start*03309 00024 US GV-Info: CL-Cleanup-mailer@SAIL.Stanford.EDU at 20-Mar-89 12:48:15 from AGReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 20 MAR 89 12:47:43 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 20 Mar 89  12:40:41 PSTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 560964; Mon 20-Mar-89 11:41:43 ESTDate: Mon, 20 Mar 89 11:41 ESTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: COMPLEX-RATIONAL-RESULT (version 1)To: CL-Cleanup@sail.stanford.educc: chapman%aitg.DEC@decwrl.dec.comMessage-ID: <19890320164136.0.MOON@EUPHRATES.SCRC.Symbolics.COM>This issue came up while reviewing section 2.2 of the draft standard.Does anyone object if I mail this to X3J13 and bring it up at theMarch meeting?  I couldn't find any sign that it has already been addressed.Issue:         COMPLEX-RATIONAL-RESULTReferences:    CLtL p.203Category:      CLARIFICATIONEdit history:  Version 1, 20-Mar-89, by MoonProblem description:    Referring to irrational and transcendental functions, CLtL says:        When the arguments to a function in this section are all rational and    the true mathematical result is also (mathematically) rational, then    unless otherwise noted an implementation is free to return either an    accurate result of type rational or a single-precision floating-point    approximation.  If the arguments are all rational but the result cannot    be expressed as a rational number, then a single-precision    floating-point approximation is always returned.  Referring to EXPT, CLtL says:    If the base-number is of type RATIONAL and the power-number is an    INTEGER, the calculation will be exact and the result will be of    type RATIONAL; otherwise a floating-point approximation may result.  What about arguments of type (complex rational)?Proposal (COMPLEX-RATIONAL-RESULT:EXTEND):  Extend the paragraph quoted above to cover the components of complex  numbers.  For (complex rational) arguments, a mathematically rational  result can be rational, (complex rational), or (complex float) at the  discretion of the implementation.  For EXPT of a (complex rational) to  an integer power, the calculation must be exact and the result will  be rational or (complex rational).Examples:  (log #c(-16 16) #c(2 2)) => 3 or approximately #c(3.0 0.0)  (expt #c(2 2) 3) => #c(-16 16)  (expt #c(2 2) 4) => -64 Rationale:    This seems most consistent with the treatment of real numbers.Current practice:    Symbolics Genera 7.4 returns a (complex float) for the first example  and returns the specified answers for the second and third examples.  Other implementations were not surveyed.Cost to Implementors:  Only EXPT would have to change, since the type of the other results  is at the discretion of the implementation.Cost to Users:  Probably none, but it is hard to predict.Cost of non-adoption:    Slightly less self-consistent language.Performance impact:  None of any significance.Benefits/Esthetics:  More self-consistent language.Discussion:  None.*start*01030 00024 US GV-Info: CL-Cleanup-mailer@SAIL.Stanford.EDU at 20-Mar-89 15:13:59 from AGReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 20 MAR 89 15:14:01 PSTReceived: from Think.COM by SAIL.Stanford.EDU with TCP; 20 Mar 89  15:06:39 PSTReceived: from fafnir.think.com by Think.COM; Mon, 20 Mar 89 17:29:50 ESTReturn-Path: <gls@Think.COM>Received: from verdi.think.com by fafnir.think.com; Mon, 20 Mar 89 17:30:06 ESTReceived: by verdi.think.com; Mon, 20 Mar 89 17:26:47 ESTDate: Mon, 20 Mar 89 17:26:47 ESTFrom: Guy Steele <gls@Think.COM>Message-Id: <8903202226.AA19323@verdi.think.com>To: Moon@stony-brook.scrc.symbolics.comCc: CL-Cleanup@sail.stanford.edu, chapman%aitg.DEC@decwrl.dec.comIn-Reply-To: David A. Moon's message of Mon, 20 Mar 89 11:41 EST <19890320164136.0.MOON@EUPHRATES.SCRC.Symbolics.COM>Subject: Issue: COMPLEX-RATIONAL-RESULT (version 1)I support COMPLEX-RATIONAL-RESULT:EXTEND.*start*03144 00024 US GV-Info: X3J13-mailer@SAIL.Stanford.EDU at 21-Mar-89 15:14:59 from AGReturn-Path: <X3J13-mailer@SAIL.Stanford.EDU>Received: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 21 MAR 89 15:11:17 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 21 Mar 89  14:58:19 PSTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 562314; Tue 21-Mar-89 17:58:03 ESTDate: Tue, 21 Mar 89 17:57 ESTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: COMPLEX-RATIONAL-RESULT (version 1)To: X3J13@SAIL.STANFORD.EDUReferences: <19890320164136.0.MOON@EUPHRATES.SCRC.Symbolics.COM>Message-ID: <19890321225757.1.MOON@EUPHRATES.SCRC.Symbolics.COM>This issue came up while reviewing section 2.2 of the draft standard.Issue:         COMPLEX-RATIONAL-RESULTReferences:    CLtL p.203Category:      CLARIFICATIONEdit history:  Version 1, 20-Mar-89, by MoonProblem description:    Referring to irrational and transcendental functions, CLtL says:        When the arguments to a function in this section are all rational and    the true mathematical result is also (mathematically) rational, then    unless otherwise noted an implementation is free to return either an    accurate result of type rational or a single-precision floating-point    approximation.  If the arguments are all rational but the result cannot    be expressed as a rational number, then a single-precision    floating-point approximation is always returned.  Referring to EXPT, CLtL says:    If the base-number is of type RATIONAL and the power-number is an    INTEGER, the calculation will be exact and the result will be of    type RATIONAL; otherwise a floating-point approximation may result.  What about arguments of type (complex rational)?Proposal (COMPLEX-RATIONAL-RESULT:EXTEND):  Extend the paragraph quoted above to cover the components of complex  numbers.  For (complex rational) arguments, a mathematically rational  result can be rational, (complex rational), or (complex float) at the  discretion of the implementation.  For EXPT of a (complex rational) to  an integer power, the calculation must be exact and the result will  be rational or (complex rational).Examples:  (log #c(-16 16) #c(2 2)) => 3 or approximately #c(3.0 0.0)  (expt #c(2 2) 3) => #c(-16 16)  (expt #c(2 2) 4) => -64 Rationale:    This seems most consistent with the treatment of real numbers.Current practice:    Symbolics Genera 7.4 returns a (complex float) for the first example  and returns the specified answers for the second and third examples.  Other implementations were not surveyed.Cost to Implementors:  Only EXPT would have to change, since the type of the other results  is at the discretion of the implementation.Cost to Users:  Probably none, but it is hard to predict.Cost of non-adoption:    Slightly less self-consistent language.Performance impact:  None of any significance.Benefits/Esthetics:  More self-consistent language.Discussion:  None.*start*01008 00024 US Date:  4 Apr 89 08:36 PDTSender: CL-Cleanup-mailer%SAIL.Stanford:EDU:XeroxFrom: KMP%STONY-BROOK.SCRC.Symbolics:COM:XeroxSubject: Issue: COMPLEX-RATIONAL-RESULTTo: CL-Cleanup%SAIL.Stanford:EDU:XeroxGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: COMPLEX-RATIONAL-RESULTTo: CL-Cleanup@SAIL.Stanford.EDUReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 04 APR 89 08:36:10 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM by SAIL.Stanford.EDU with TCP; 4 Apr 89  08:32:12 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 570916; Tue 4-Apr-89 11:32:14 EDTOriginal-Date: Tue, 4 Apr 89 11:31 EDTMessage-ID: <890404113150.1.KMP@BOBOLINK.SCRC.Symbolics.COM>GVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVMy notes say this passed n-0-2.*start*04760 00024 US GV-Info: CL-Cleanup-mailer@SAIL.Stanford.EDU at  9-Apr-89 09:23:10 from AGReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 09 APR 89 09:23:02 PDTReceived: from Think.COM by SAIL.Stanford.EDU with TCP; 9 Apr 89  09:21:18 PDTReturn-Path: <gls@Think.COM>Received: from brigit.think.com by Think.COM; Sun, 9 Apr 89 12:20:54 EDTReceived: by brigit.think.com; Sun, 9 Apr 89 01:37:19 EDTDate: Sun, 9 Apr 89 01:37:19 EDTFrom: gls@Think.COMMessage-Id: <8904090537.AA00468@brigit.think.com>To: cl-cleanup@sail.stanford.eduCc: gls@Think.COMSubject: Issue COMPLEX-RATIONAL-RESULT, version 2This was a good thing for Moon to bring up, but I think a coupleof desirable details were left uncovered.  Here is a new versionto consider in June.Detail 1 is that a mathematically rational or complex rationalvalue might result from arguments that are a mixture of rationaland complex rational; or a complex rational value might resultfrom arguments that are rational only.Detail 2 is that the version 1 proposal mentions (complex float)where I believe the more specific (complex single-float) is appropriate.Detail 3 is that in some cases the option of an ordinary floatresult is desirable or required rather than a (complex single-float);consider the ABS function, for example.Detail 4 is that if the true mathematical result is not rationalor complex rational, I think we want to specify that the returnedvalue is single-float or (complex single-float).----------------------------------------------------------------Issue:         COMPLEX-RATIONAL-RESULTReferences:    CLtL p.203Category:      CLARIFICATIONEdit history:  Version 1, 20-Mar-89, by Moon               Version 2, 08-Apr-89, by SteeleProblem description:    Referring to irrational and transcendental functions, CLtL says:        When the arguments to a function in this section are all rational and    the true mathematical result is also (mathematically) rational, then    unless otherwise noted an implementation is free to return either an    accurate result of type rational or a single-precision floating-point    approximation.  If the arguments are all rational but the result cannot    be expressed as a rational number, then a single-precision    floating-point approximation is always returned.  Referring to EXPT, CLtL says:    If the base-number is of type RATIONAL and the power-number is an    INTEGER, the calculation will be exact and the result will be of    type RATIONAL; otherwise a floating-point approximation may result.  What about arguments of type (complex rational)?Proposal (COMPLEX-RATIONAL-RESULT:EXTEND):  Extend the paragraph quoted above as follows to cover the components  of complex numbers.  If the arguments to a function are all of type  (OR RATIONAL (COMPLEX RATIONAL)) and the true mathematical result is  (mathematically) a complex number with rational real and imaginary  parts, then unless otherwise noted an implementation is free to return  either an accurate result of type (OR RATIONAL (COMPLEX RATIONAL)) or  a single-precision floating-point approximation of type SINGLE-FLOAT  (permissible only if the imaginary part of the true mathematical  result is zero) or \cd{(COMPLEX SINGLE-FLOAT). If the arguments are  all of type (OR RATIONAL (COMPLEX RATIONAL)) but the result cannot be  expressed as a rational or complex rational number, then the returned  value will be of type SINGLE-FLOAT (permissible only if the imaginary  part of the true mathematical result is zero) or (COMPLEX SINGLE-FLOAT).  For EXPT of a (COMPLEX RATIONAL) to an integer power, the  calculation must be exact and the result will be of type  (OR RATIONAL (COMPLEX RATIONAL)).Examples:  (log #c(-16 16) #c(2 2)) => 3 or approximately #c(3.0 0.0)			        or approximately 3.0 (unlikely)  (abs #c(3/5 4/5)) => 1 or approximately 1.0  (expt #c(2 2) 3) => #c(-16 16)  (expt #c(2 2) 4) => -64 Rationale:    This seems most consistent with the treatment of real numbers.Current practice:    Symbolics Genera 7.4 returns a (complex float) for the first example  and returns the specified answers for the second and third examples.  Other implementations were not surveyed.Cost to Implementors:  Only EXPT would have to change, since the type of the other results  is at the discretion of the implementation.Cost to Users:  Probably none, but it is hard to predict.Cost of non-adoption:    Slightly less self-consistent language.Performance impact:  None of any significance.Benefits/Esthetics:  More self-consistent language.Discussion:  None.*start*01414 00024 US GV-Info: Moon@STONY-BROOK.SCRC.Symbolics.COM at 24-Apr-89 12:50:38 from AGReturn-Path: <Moon@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM ([128.81.41.144]) by Xerox.COM ; 24 APR 89 12:49:27 PDTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 583636; Mon 24-Apr-89 15:48:28 EDTDate: Mon, 24 Apr 89 15:48 EDTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue COMPLEX-RATIONAL-RESULT, version 2To: gls@THINK.COM, Masinter.pacc: cl-cleanup@sail.stanford.eduIn-Reply-To: <8904090537.AA00468@brigit.think.com>Message-ID: <19890424194840.4.MOON@EUPHRATES.SCRC.Symbolics.COM>Line-fold: NoThe opinion at Symbolics is that your version 2 is good.  Let'svote it in to replace the version 1 that X3J13 already voted in.Should we take time in June to do this, or do it by letter?Some TeX markup snuck into the proposal section, please remove itbefore releasing.The current practice section is out of date, since there are fourexamples now.  I'd change it to:    Symbolics Genera 7.4 returns a (complex single-float) for the first  example, returns 1 for the second example, and returns the specified  answers for the third and fourth examples.  Other implementations were  not surveyed.Guy if you'd like to survey some other implementations that could behelpful.*start*05187 00024 US GV-Info: CL-Cleanup-mailer@SAIL.Stanford.EDU at 28-Apr-89 09:47:23 from AGReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 28 APR 89 09:46:45 PDTReceived: from Think.COM (Gateway.Think.COM) by SAIL.Stanford.EDU with TCP; 28 Apr 89  09:44:06 PDTReceived: from fafnir.think.com by Think.COM; Fri, 28 Apr 89 12:44:13 EDTReturn-Path: <gls@Think.COM>Received: from verdi.think.com by fafnir.think.com; Fri, 28 Apr 89 12:43:29 EDTReceived: from joplin.think.com by verdi.think.com; Fri, 28 Apr 89 12:43:26 EDTFrom: Guy Steele <gls@Think.COM>Received: by joplin.think.com; Fri, 28 Apr 89 12:43:24 EDTDate: Fri, 28 Apr 89 12:43:24 EDTMessage-Id: <8904281643.AA05966@joplin.think.com>To: cl-cleanup@sail.stanford.eduCc: gls@Think.COMSubject: Issue COMPLEX-RATIONAL-RESULT, version 3Version 3 fixes typos and surveys a few implementations.Prologue to version 2 follows.This was a good thing for Moon to bring up, but I think a coupleof desirable details were left uncovered.  Here is a new versionto consider in June.Detail 1 is that a mathematically rational or complex rationalvalue might result from arguments that are a mixture of rationaland complex rational; or a complex rational value might resultfrom arguments that are rational only.Detail 2 is that the version 1 proposal mentions (complex float)where I believe the more specific (complex single-float) is appropriate.Detail 3 is that in some cases the option of an ordinary floatresult is desirable or required rather than a (complex single-float);consider the ABS function, for example.Detail 4 is that if the true mathematical result is not rationalor complex rational, I think we want to specify that the returnedvalue is single-float or (complex single-float).----------------------------------------------------------------Issue:         COMPLEX-RATIONAL-RESULTReferences:    CLtL p.203Category:      CLARIFICATIONEdit history:  Version 1, 20-Mar-89, by Moon               Version 2, 08-Apr-89, by Steele               Version 2, 28-Apr-89, by SteeleProblem description:    Referring to irrational and transcendental functions, CLtL says:        When the arguments to a function in this section are all rational and    the true mathematical result is also (mathematically) rational, then    unless otherwise noted an implementation is free to return either an    accurate result of type rational or a single-precision floating-point    approximation.  If the arguments are all rational but the result cannot    be expressed as a rational number, then a single-precision    floating-point approximation is always returned.  Referring to EXPT, CLtL says:    If the base-number is of type RATIONAL and the power-number is an    INTEGER, the calculation will be exact and the result will be of    type RATIONAL; otherwise a floating-point approximation may result.  What about arguments of type (complex rational)?Proposal (COMPLEX-RATIONAL-RESULT:EXTEND):  Extend the paragraph quoted above as follows to cover the components  of complex numbers.  If the arguments to a function are all of type  (OR RATIONAL (COMPLEX RATIONAL)) and the true mathematical result is  (mathematically) a complex number with rational real and imaginary  parts, then unless otherwise noted an implementation is free to return  either an accurate result of type (OR RATIONAL (COMPLEX RATIONAL)) or  a single-precision floating-point approximation of type SINGLE-FLOAT  (permissible only if the imaginary part of the true mathematical  result is zero) or (COMPLEX SINGLE-FLOAT). If the arguments are  all of type (OR RATIONAL (COMPLEX RATIONAL)) but the result cannot be  expressed as a rational or complex rational number, then the returned  value will be of type SINGLE-FLOAT (permissible only if the imaginary  part of the true mathematical result is zero) or (COMPLEX SINGLE-FLOAT).  For EXPT of a (COMPLEX RATIONAL) to an integer power, the  calculation must be exact and the result will be of type  (OR RATIONAL (COMPLEX RATIONAL)).Examples:[a]  (log #c(-16 16) #c(2 2)) => 3 or approximately #c(3.0 0.0)			           or approximately 3.0 (unlikely)[b]  (abs #c(3/5 4/5)) => 1 or approximately 1.0[c]  (expt #c(2 2) 3) => #c(-16 16)[d]  (expt #c(2 2) 4) => -64 Rationale:    This seems most consistent with the treatment of real numbers.Current practice:  			[a]			[b]	[c]		[d]Symbolics Genera 7.4	#c(3.00... 1.40...e-7)	1	#c(-16 16)	-64Sun Common Lisp 3.0.1	#c(3.0 2.61...e-16)	1.0	#c(-16 16)	-64KCL of 9/16/86 on VAX	#c(3.0s0 -1.40...s-7)	1.0s0	#c(-16 16)	-64Allegro CL (Mac II)	#c(3.0 2.05...e-16)	1.0	#c(-16 16)	-64Cost to Implementors:  Only EXPT would have to change, since the type of the other results  is at the discretion of the implementation.Cost to Users:  Probably none, but it is hard to predict.Cost of non-adoption:    Slightly less self-consistent language.Performance impact:  None of any significance.Benefits/Esthetics:  More self-consistent language.Discussion:  None.