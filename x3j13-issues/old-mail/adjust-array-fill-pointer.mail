*start*00805 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAR 88 11:08:00 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 23 Mar 88  11:05:30 PSTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 368735; Wed 23-Mar-88 14:06:06 ESTDate: Wed, 23 Mar 88 14:06 ESTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: ADJUST-ARRAY-FILL-POINTER (Version 1)To: CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <880318170509.5.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>Message-ID: <19880323190609.0.MOON@EUPHRATES.SCRC.Symbolics.COM>I support ADJUST-ARRAY-FILL-POINTER:MINIMAL.*start*03869 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 18 MAR 88 16:35:47 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 18 Mar 88  14:05:00 PSTReceived: from RIO-DE-JANEIRO.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 366029; Fri 18-Mar-88 17:05:20 ESTDate: Fri, 18 Mar 88 17:05 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: ADJUST-ARRAY-FILL-POINTER (Version 1)To: CL-Cleanup@SAIL.STANFORD.EDUMessage-ID: <880318170509.5.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>I wasn't quite sure what to write, so just kind of made something up.Is this what people were looking for?-----Issue:        ADJUST-ARRAY-FILL-POINTERReferences:   ADJUST-ARRAY (p297)Category:     CLARIFICATIONEdit history: 15-Mar-88, Version 1 by PitmanStatus:	      For Internal DiscussionProblem Description:  CLtL does not specify clearly the effect of ADJUST-ARRAY on the fill  pointer.Proposal (ADJUST-ARRAY-FILL-POINTER:MINIMAL):  Clarify that the :FILL-POINTER keyword argument to ADJUST-ARRAY is treated  as follows...  If :FILL-POINTER argument is not given, then the fill-pointer of the array  to be adjusted (if any) is left alone. It is an error to adjust an array  to a size smaller than its fill pointer without specifying the :FILL-POINTER  option so that its fill-pointer is properly adjusted in the process.  If supplied, the :FILL-POINTER argument must be either an integer between 0  and the new size of the array, the symbol T (indicating that the new size  of the array should be used), or the symbol NIL (indicating that the fill  pointer should left as it is -- as if the :FILL-POINTER option had not been  specified).  An error is signalled if a non-NIL value for :FILL-POINTER is supplied and  the array to be adjusted does not already have a fill pointer.Test Case:  (SETQ A1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ A2 (ADJUST-ARRAY A1 4))  (FILL-POINTER A1) => 3  (FILL-POINTER A2) => 3  (SETQ B1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ B2 (ADJUST-ARRAY B1 2 :FILL-POINTER 1))  (FILL-POINTER B1) => 1  (FILL-POINTER B2) => 1  (SETQ C1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ C2 (ADJUST-ARRAY C1 2 :FILL-POINTER T))  (FILL-POINTER C1) => 2  (FILL-POINTER C2) => 2  (SETQ D1 (MAKE-ARRAY 5 :ADJUSTABLE T))  (SETQ D2 (ADJUST-ARRAY D1 2 :FILL-POINTER 2)) signals an error.  (SETQ E1 (MAKE-ARRAY 5 :FILL-POINTER T :ADJUSTABLE T))  (SETQ E2 (ADJUST-ARRAY E1 4)) is an error.Rationale:  This behavior must be more clearly defined if portable programs are going  to be able to depend on it.Current Practice:  Symbolics Lisp implements the proposal. In case "E", it does not signal an  error. It simply leaves the illegal fill-pointer in place so that the  programmer can correct it using (SETF (FILL-POINTER E2) ...)Cost to Implementors:  Probably most implementations do not deviate significantly from the proposed  behavior. The cost to implementors is probably very slight.Cost to Users:  None. This clarifies a fuzzy area in the manual which users cannot currently  depend upon.Cost of Non-Adoption:  The interaction between ADJUST-ARRAY and fill-pointers would continue to be  hazy, and portable programs would not be able to rely upon that behavior  being consistent across implementations.Benefits:  The cost of non-adoption would be avoided.Aesthetics:  There is little if any aesthetic impact of this change.Discussion:  Pitman volunteered to write this issue up for the Cleanup committee. He's  not very passionate about the details one way or another, but figures it's  a good idea that they be clarified.*start*00982 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 18 MAR 88 23:23:07 PSTReceived: from labrea.Stanford.EDU by SAIL.Stanford.EDU with TCP; 18 Mar 88  20:51:22 PSTReceived: by labrea.Stanford.EDU; Fri, 18 Mar 88 20:51:25 PSTReceived: from bhopal.lucid.com by edsel id AA09410g; Fri, 18 Mar 88 20:31:09 PSTReceived: by bhopal id AA24393g; Fri, 18 Mar 88 20:38:24 PSTDate: Fri, 18 Mar 88 20:38:24 PSTFrom: Jon L White <edsel!jonl@labrea.Stanford.EDU>Message-Id: <8803190438.AA24393@bhopal.lucid.com>To: KMP@stony-brook.scrc.symbolics.comCc: CL-Cleanup@sail.stanford.eduIn-Reply-To: Kent M Pitman's message of Fri, 18 Mar 88 17:05 EST <880318170509.5.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>Subject: Issue: ADJUST-ARRAY-FILL-POINTER (Version 1)Lucid Common Lisp implements the described behaviour, including the signallingof errors in both error cases.-- JonL --*start*01735 00024 US Return-Path: <jeff%aiva.edinburgh.ac.uk@nss.cs.ucl.ac.uk>Received: from ngp.utexas.edu by Xerox.COM ; 07 DEC 87 15:11:58 PSTReceived: by ngp.utexas.edu (5.51/5.51)	id AA15254; Mon, 7 Dec 87 16:45:18 CSTReceived: from sally.utexas.edu by rascal.ics.utexas.edu (3.2/4.22)	id AA08117; Mon, 7 Dec 87 16:35:04 CSTPosted-Date: Mon, 7 Dec 87 22:15:45 GMTReceived: by sally.utexas.edu (5.54/5.51)	id AA02853; Mon, 7 Dec 87 16:33:46 CSTReceived: from aiva.edinburgh.ac.uk by NSS.Cs.Ucl.AC.UK   via Janet with NIFTP           id aa12537; 7 Dec 87 22:19 GMTFrom: Jeff Dalton <jeff%aiva.edinburgh.ac.uk@nss.cs.ucl.ac.uk>Date: Mon, 7 Dec 87 22:15:45 GMTMessage-Id: <20024.8712072215@aiva.ed.ac.uk>To: common-lisp@sail.stanford.edu, kcl <@sally.UTEXAS.EDU:kcl@rascal.ics.utexas.edu>Subject: Fill pointers and ADJUST-ARRAYApologies if this has been discussed before...The description of ADJUST-ARRAY on pp. 297-8 of CLtL does not saywhat happens to a fill pointer when ADJUST-ARRAY is called withouta :FILL-POINTER parameter.  I expected the fill pointer to remainas it was, but this is not what happens in KCL:	staffa 18% kcl	KCl (Kyoto Common Lisp)  June 3, 1987	>(setq v (make-array 0 :fill-pointer 0 :adjustable t))	#() 	>(adjust-array v 2)	#(NIL NIL) 	>(fill-pointer v) 	Error: The vector #(NIL NIL) has no fill pointer.	Error signalled by FILL-POINTER.Is KCl's behavior incorrect?What should happen if an array is adjusted to a size smaller than itsfill pointer?Jeff Dalton,                      JANET: J.Dalton@uk.ac.ed             AI Applications Institute,        ARPA:  J.Dalton%uk.ac.ed@nss.cs.ucl.ac.ukEdinburgh University.             UUCP:  ...!ukc!ed.ac.uk!J.Dalton*start*01925 00024 US Originator: Common-Lisp-mailer%SAIL.Stanford:EDU:XeroxDate:  7 Dec 87 15:03From: "jeff%aiva.edinburgh.ac.uk%NSS.Cs.Ucl.AC.UK":GV:XeroxSubject: Fill pointers and ADJUST-ARRAYTo: common-lisp%sail.stanford:EDU:Xerox, @sally.utexas.edu:kcl%rascal.ics.utexas:EDU:XeroxGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVFrom: Jeff Dalton <jeff%aiva.edinburgh.ac.uk@NSS.Cs.Ucl.AC.UK>To: common-lisp@sail.stanford.edu, kcl <@sally.utexas.edu:kcl@rascal.ics.utexas.edu>Subject: Fill pointers and ADJUST-ARRAYReturn-Path: <Common-Lisp-mailer@SAIL.Stanford.EDU>Redistributed: Xerox-Common-Lisp^.xReceived: from SAIL.Stanford.EDU by Xerox.COM ; 07 DEC 87 15:03:45 PSTReceived: from NSS.CS.UCL.AC.UK by SAIL.STANFORD.EDU with TCP; 7 Dec 87  14:27:17 PSTReceived: from aiva.edinburgh.ac.uk by NSS.Cs.Ucl.AC.UK   via Janet with NIFTP           id aa12537; 7 Dec 87 22:19 GMTOriginal-Date: Mon, 7 Dec 87 22:15:45 GMTMessage-Id: <20024.8712072215@aiva.ed.ac.uk>GVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVApologies if this has been discussed before...The description of ADJUST-ARRAY on pp. 297-8 of CLtL does not saywhat happens to a fill pointer when ADJUST-ARRAY is called withouta :FILL-POINTER parameter.  I expected the fill pointer to remainas it was, but this is not what happens in KCL:	staffa 18% kcl	KCl (Kyoto Common Lisp)  June 3, 1987	>(setq v (make-array 0 :fill-pointer 0 :adjustable t))	#() 	>(adjust-array v 2)	#(NIL NIL) 	>(fill-pointer v) 	Error: The vector #(NIL NIL) has no fill pointer.	Error signalled by FILL-POINTER.Is KCl's behavior incorrect?What should happen if an array is adjusted to a size smaller than itsfill pointer?Jeff Dalton,                      JANET: J.Dalton@uk.ac.ed             AI Applications Institute,        ARPA:  J.Dalton%uk.ac.ed@nss.cs.ucl.ac.ukEdinburgh University.             UUCP:  ...!ukc!ed.ac.uk!J.Dalton*start*02460 00024 US Originator: Common-Lisp-mailer%SAIL.Stanford:EDU:XeroxDate:  8 Dec 87 04:42From: pyrnj!pyramid!bein%RUTGERS:EDU:XeroxSubject: Re: Fill pointers and ADJUST-ARRAYTo: common-lisp@sail.stanford.edu%RUTGERS:EDU:XeroxGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVFrom: David Bein <pyrnj!pyramid!bein@RUTGERS.EDU>Subject: Re: Fill pointers and ADJUST-ARRAYTo: "common-lisp@sail.stanford.edu"@RUTGERS.EDUReturn-Path: <Common-Lisp-mailer@SAIL.Stanford.EDU>Redistributed: Xerox-Common-Lisp^.xReceived: from SAIL.Stanford.EDU by Xerox.COM ; 08 DEC 87 04:42:07 PSTReceived: from RUTGERS.EDU by SAIL.STANFORD.EDU with TCP; 8 Dec 87  04:18:08 PSTReceived: by RUTGERS.EDU (5.54/1.14) with UUCP 	id AA00209; Tue, 8 Dec 87 00:59:07 ESTReceived: from pyrnova.pyramid.COM (manpyrnova) by pyramid.UUCP (5.51/OSx4.0b-870424)	id AA15904; Mon, 7 Dec 87 21:41:14 PSTReceived: by pyrnova.pyramid.COM (5.51/OSx4.0b-870424)	id AA20796; Mon, 7 Dec 87 21:40:43 PSTOriginal-Date: 7 Dec 87 21:11 PSTMessage-Id: <565938713/bein@pyrnova>GVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGVGV[ This is in reply to Jeff Dalton's message. The mail system dropped my  last letter to him off into never-never land.]  It would appear that KCL interprets the lack of a :FILL-POINTERargument to mean that the resulting vector should not have afill-pointer. Even though CLtL only mentions what happens when:FILL-POINTER is supplied to ADJUST-ARRAY, it seems silly thatthe resulting vector does not have a fill-pointer when the original onedid. In this regard I think KCL needs to be fixed.  I sent a letter some time back to the mailing list questioning whatthe behavior should be if :FILL-POINTER is not specified. Nobodyspoke up, so I'll make my suggestion again. The answer to yoursecond question (adjusted array being smaller than its currentfill-pointer) is answered in #1 and #2:  I think ADJUST-ARRAY should have the following semantics for its:FILL-POINTER argument:(1) If :FILL-POINTER is NIL or not supplied, it defaults to the    current value of the vector's fill-pointer.(2) If :FILL-POINTER is T, then the fill-pointer is set to the    minimum of its current value or the length of the resulting    vector.(3) Otherwise, :FILL-POINTER should be a non-negative integer less than    or equal to the size of the resulting array.In all cases, an error occurs if the final value of the fill-pointeris out of bounds.*start*03622 00024 USmDate:  8 Jun 88 12:07 PDTFrom: Masinter.pato: X3J13@Sail.stanford.educc: Masinterreply-to: cl-cleanup@Sail.stanford.eduSubject: Issue: ADJUST-ARRAY-FILL-POINTER (Version 1)Line-fold: NOIssue:        ADJUST-ARRAY-FILL-POINTERReferences:   ADJUST-ARRAY (p297)Category:     CLARIFICATIONEdit history: 15-Mar-88, Version 1 by PitmanProblem Description:  CLtL does not specify clearly the effect of ADJUST-ARRAY on the fill  pointer.Proposal (ADJUST-ARRAY-FILL-POINTER:MINIMAL):  Clarify that the :FILL-POINTER keyword argument to ADJUST-ARRAY is treated  as follows...  If :FILL-POINTER argument is not given, then the fill-pointer of the array  to be adjusted (if any) is left alone. It is an error to adjust an array  to a size smaller than its fill pointer without specifying the :FILL-POINTER  option so that its fill-pointer is properly adjusted in the process.  If supplied, the :FILL-POINTER argument must be either an integer between 0  and the new size of the array, the symbol T (indicating that the new size  of the array should be used), or the symbol NIL (indicating that the fill  pointer should left as it is -- as if the :FILL-POINTER option had not been  specified).  An error is signalled if a non-NIL value for :FILL-POINTER is supplied and  the array to be adjusted does not already have a fill pointer.Test Case:  (SETQ A1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ A2 (ADJUST-ARRAY A1 4))  (FILL-POINTER A1) => 3  (FILL-POINTER A2) => 3  (SETQ B1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ B2 (ADJUST-ARRAY B1 2 :FILL-POINTER 1))  (FILL-POINTER B1) => 1  (FILL-POINTER B2) => 1  (SETQ C1 (MAKE-ARRAY 5 :FILL-POINTER 3 :ADJUSTABLE T))  (SETQ C2 (ADJUST-ARRAY C1 2 :FILL-POINTER T))  (FILL-POINTER C1) => 2  (FILL-POINTER C2) => 2  (SETQ D1 (MAKE-ARRAY 5 :ADJUSTABLE T))  (SETQ D2 (ADJUST-ARRAY D1 2 :FILL-POINTER 2)) signals an error.  (SETQ E1 (MAKE-ARRAY 5 :FILL-POINTER T :ADJUSTABLE T))  (SETQ E2 (ADJUST-ARRAY E1 4)) is an error.Rationale:  This behavior must be more clearly defined if portable programs are going  to be able to depend on it.Current Practice:  Symbolics Lisp implements the proposal. In case "E", it does not signal an  error. It simply leaves the illegal fill-pointer in place so that the  programmer can correct it using (SETF (FILL-POINTER E2) ...)Cost to Implementors:  Probably most implementations do not deviate significantly from the proposed  behavior. The cost to implementors is probably very slight.Cost to Users:  None. This clarifies a fuzzy area in the manual which users cannot currently  depend upon.Cost of Non-Adoption:  The interaction between ADJUST-ARRAY and fill-pointers would continue to be  hazy, and portable programs would not be able to rely upon that behavior  being consistent across implementations.Benefits:  The cost of non-adoption would be avoided.Aesthetics:  There is little if any aesthetic impact of this change.Discussion:  Pitman volunteered to write this issue up for the Cleanup committee. He's  not very passionate about the details one way or another, but figures it's  a good idea that they be clarified.   The cleanup committee didn't object.        TITAN 
         TITAN 
           å              -                                                                T       .      `             ò              l              ÷              è              `              ∆       
       /              <              Í      ∏  z∫