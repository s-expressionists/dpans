*start*02411 00024 USfReturn-Path: <@RELAY.CS.NET:willc%tekchips.CRL@tektronix.tek.com>Received: from RELAY.CS.NET by Xerox.COM ; 22 MAR 88 16:31:15 PSTReceived: from relay2.cs.net by RELAY.CS.NET id aa26807; 22 Mar 88 18:49 ESTReceived: from tektronix.tek.com by RELAY.CS.NET id ac05018; 22 Mar 88 18:39 ESTReceived: by tektronix.TEK.COM (5.51/6.24)	id AA20128; Tue, 22 Mar 88 12:59:24 PSTReceived: by tekchips.CRL.TEK.COM (5.51/6.24)	id AA25927; Tue, 22 Mar 88 12:58:15 PSTMessage-Id: <8803222058.AA25927@tekchips.CRL.TEK.COM>To: Masinter.paCc: cl-cleanup@SAIL.STANFORD.EDU, willc@tekchips.crl.tek.comSubject: New "issue" and proposalDate: 22 Mar 88 12:58:12 PST (Tue)From: willc%tekchips.CRL@tektronix.tek.comIssue:        FUNCTION-CALL-EVALUATION-ORDERReferences:   noneCategory:     CLARIFICATIONEdit history: Version 1 by Clinger (22 March 1988)Problem Description:CLtL does not say whether the function expression of a call is evaluatedbefore or after the argument expressions.Proposal (FUNCTION-CALL-EVALUATION-ORDER:UNSPECIFIED):Common Lisp does not specify whether the function expression of a call isevaluated before or after the argument expressions.  Programs that rely ona particular order of evaluation are in error.Example:(defun foo (x) (+ x 3))(defun bar () (setf (symbol-function 'foo) #'(lambda (x) (+ x 4))))(foo (progn (bar) 20)); may return 23 or 24Rationale:This makes the status quo explicit.Current Practice:TI and Symbolics evaluate the function expression last.  Lucid and Coralsometimes evaluate the function expression first and at other times evaluatethe function expression last.Cost to implementors:None.Cost to users:None.Benefits:Codifies an ambiguity.Aesthetics:Since Common Lisp evaluates argument expressions from left to right, it wouldbe more consistent for the function expression to be evaluated before theargument expressions.  On the other hand, the evaluation rules for functionexpressions are already quite different from the rules for argumentexpressions, and nobody in their right mind would write code that depends onthe order of evaluation, so aesthetics should not count for much in this case.Requiring left to right evaluation would force some implementations to consumean extra register for many function calls.  The efficiency argument seems moreimportant than the aesthetic argument.*start*00612 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 22 MAR 88 16:51:08 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 22 Mar 88  16:48:55 PSTReceived: from Cabernet.ms by ArpaGateway.ms ; 22 MAR 88 16:42:15 PSTDate: Tue, 22 Mar 88 16:41:16 PSTFrom: Pavel.paSubject: Re: New "issue" and proposalIn-reply-to: <8803222058.AA25927@tekchips.CRL.TEK.COM>To: cl-cleanup@SAIL.STANFORD.EDUCc: willc@tekchips.crl.tek.comMessage-ID: <880322-164215-2817@Xerox>I support this proposal.	Pavel*start*02222 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAR 88 10:50:32 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 23 Mar 88  10:48:06 PSTReceived: from EUPHRATES.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 368716; Wed 23-Mar-88 13:48:39 ESTDate: Wed, 23 Mar 88 13:48 ESTFrom: David A. Moon <Moon@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FUNCTION-CALL-EVALUATION-ORDER (version 1)To: willc%tekchips.CRL@tektronix.tek.com, cl-cleanup@SAIL.STANFORD.EDUIn-Reply-To: <8803222058.AA25927@tekchips.CRL.TEK.COM>Message-ID: <19880323184829.5.MOON@EUPHRATES.SCRC.Symbolics.COM>    Date: 22 Mar 88 12:58:12 PST (Tue)    From: willc%tekchips.CRL@tektronix.tek.com    Problem Description:    CLtL does not say whether the function expression of a call is evaluated    before or after the argument expressions.It also does not say in what order the argument expressions are evaluated!Shouldn't we deal with that first, or at the same time?  As far as I knowcurrent practice is always to evaluate the argument expressions in a functioncall from left to right, and I would certainly support a proposal to mandatethat in the language.  Someone please tell me that I am confused and haveoverlooked the place in CLtL that specifies the order of evaluation offunction arguments.    Proposal (FUNCTION-CALL-EVALUATION-ORDER:UNSPECIFIED):    Common Lisp does not specify whether the function expression of a call is    evaluated before or after the argument expressions.  Programs that rely on    a particular order of evaluation are in error.I support this proposal.    Current Practice:    TI and Symbolics evaluate the function expression last.  Lucid and Coral    sometimes evaluate the function expression first and at other times evaluate    the function expression last.Actually Symbolics is in the same camp as Lucid and Coral here, althoughright now the answer is usually last.  Whether TI evaluates the functionfirst or last depends on which release of TI software you're using.*start*01398 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAR 88 11:13:08 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 23 Mar 88  11:10:41 PSTReceived: from Salvador.ms by ArpaGateway.ms ; 23 MAR 88 11:01:31 PSTDate: Wed, 23 Mar 88 11:01:26 PSTFrom: Pavel.paSubject: Re: Issue: FUNCTION-CALL-EVALUATION-ORDER (version 1)In-reply-to: <19880323184829.5.MOON@EUPHRATES.SCRC.Symbolics.COM>To: willc%tekchips.CRL@tektronix.tek.COM, cl-cleanup@SAIL.STANFORD.EDUMessage-ID: <880323-110131-1794@Xerox>Dave says: ``[CLtL] also does not say in what order the argument expressions areevaluated! Shouldn't we deal with that first, or at the same time?''The closest thing I could find in CLtL to a statement about argument evaluationorder is the statement in the description of LET that the bound expressions areevaluated in order.  Since a number of implementations (including Lucid)macro-expand LET into a called LAMBDA, they are clearly depending upon thisbehavior.While I would prefer, as a compiler writer and language designer, to leave theorder of argument evaluation unspecified, as in Scheme, I fear that so many userprograms critically depend upon the status quo (assumed always to beleft-to-right) that we can do nothing but reaffirm that officially.	Pavel*start*01154 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 23 MAR 88 13:32:18 PSTReceived: from NSS.Cs.Ucl.AC.UK by SAIL.Stanford.EDU with TCP; 23 Mar 88  13:29:49 PSTReceived: from aiva.edinburgh.ac.uk by NSS.Cs.Ucl.AC.UK   via Janet with NIFTP           id aa09557; 23 Mar 88 21:26 GMTFrom: Jeff Dalton <jeff%aiva.edinburgh.ac.uk@NSS.Cs.Ucl.AC.UK>Date: Wed, 23 Mar 88 21:25:42 gmtMessage-Id: <18525.8803232125@aiva.ed.ac.uk>To: cl-cleanup@sail.stanford.eduSubject: Re: Issue: FUNCTION-CALL-EVALUATION-ORDER (version 1)Cc: willc <@NSS.Cs.Ucl.AC.UK,@tektronix.tek.com:willc@tekchips.crl>Pavel says:  The closest thing I could find in CLtL to a statement about argument  evaluation order is the statement in the description of LET [...]Actually, CLtL *does* say what the order of argument evaluation is.It's on page 194, in the chapter on numbers:     ... This does not affect the order in which argument forms     are evaluated, of course; that order is always left to right,     as in all Common Lisp function calls.Cheers,Jeff*start*02139 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU by Xerox.COM ; 24 MAR 88 08:51:53 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 24 Mar 88  08:49:30 PSTReceived: from RIO-DE-JANEIRO.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 369322; Thu 24-Mar-88 11:19:40 ESTDate: Thu, 24 Mar 88 11:19 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Re: Issue: FUNCTION-CALL-EVALUATION-ORDER (version 1)To: CL-Cleanup@SAIL.STANFORD.EDUIn-Reply-To: <18525.8803232125@aiva.ed.ac.uk>,             <880323-110131-1794@Xerox>References: <8803222058.AA25927@tekchips.CRL.TEK.COM>Message-ID: <880324111926.8.KMP@RIO-DE-JANEIRO.SCRC.Symbolics.COM>I support FUNCTION-CALL-EVALUATION-ORDER:UNSPECIFIED.    From: Jeff Dalton <jeff%aiva.edinburgh.ac.uk@NSS.Cs.Ucl.AC.UK>    Date: Wed, 23 Mar 88 21:25:42 gmt    Pavel says:      The closest thing I could find in CLtL to a statement about argument      evaluation order is the statement in the description of LET [...]    Actually, CLtL *does* say what the order of argument evaluation is.    It's on page 194, in the chapter on numbers:	 ... This does not affect the order in which argument forms	 are evaluated, of course; that order is always left to right,	 as in all Common Lisp function calls.    Cheers,    JeffAlso, p97 (in the description of SETF): "SETF carefully arranges to preserve the usual left-to-right order  in which the various subforms are evaluated."and again on p102 (in the description of DEFSETF): "The implementation of DEFSETF takes care of ensuring that the   subforms of the reference are evaluated exactly once and in the  proper left-to-right order."I will be happy to draft a separate proposal for the argument evaluationorder if people prefer to discuss that issue independently of the functionposition. Certainly there is likely to be less (or different) controversyon that issue, so separating them might not be unreasonable.*start*02445 00024 USRDate:  8 Jun 88 19:44 PDTFrom: Masinter.paSubject: Issue: FUNCTION-CALL-EVALUATION-ORDER (Version 1)to: X3J13@Sail.Stanford.Edureply-to: cl-cleanup@sail.stanford.educc: Masinterline-fold: NOThe only discussion on this issue was a revisiting of the various hiding placesin CLtL where it states requirement that function arguments evaluate fromleft to right.Issue:        FUNCTION-CALL-EVALUATION-ORDERReferences:   CLtL p 194 ("...that order is always left to right")Category:     CLARIFICATIONEdit history: Version 1 by Clinger (22 March 1988)Problem Description:CLtL does not say whether the function expression of a call is evaluatedbefore or after the argument expressions.Proposal (FUNCTION-CALL-EVALUATION-ORDER:UNSPECIFIED):Common Lisp does not specify whether the function expression of a call isevaluated before or after the argument expressions.  Programs that rely ona particular order of evaluation are in error.Example:(defun foo (x) (+ x 3))(defun bar () (setf (symbol-function 'foo) #'(lambda (x) (+ x 4))))(foo (progn (bar) 20)); may return 23 or 24Rationale:This makes the status quo explicit.Current Practice:TI and Symbolics evaluate the function expression last.  Lucid and Coralsometimes evaluate the function expression first and at other times evaluatethe function expression last.Cost to implementors:None.Cost to users:None.Benefits:Codifies an ambiguity.Aesthetics:Since Common Lisp evaluates argument expressions from left to right, it wouldbe more consistent for the function expression to be evaluated before theargument expressions.  On the other hand, the evaluation rules for functionexpressions are already quite different from the rules for argumentexpressions, and nobody in their right mind would write code that depends onthe order of evaluation, so aesthetics should not count for much in this case.Requiring left to right evaluation would force some implementations to consumean extra register for many function calls.  The efficiency argument seems moreimportant than the aesthetic argument.        TITAN 
         TITAN 
          
TIMESROMAN 
          r                            5                            &              u       7       Æ       	       ‹              &              ¶                                   
                    Š      4 zº*start*00831 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 13 OCT 88 14:00:49 PDTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 13 Oct 88  14:01:05 PDTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 475878; Thu 13-Oct-88 16:59:45 EDTDate: Thu, 13 Oct 88 16:59 EDTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: FUNCTION-CALL-EVALUATION-ORDER (Version 1)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881013165936.4.KMP@BOBOLINK.SCRC.Symbolics.COM>My notes from Fairfax meeting:Cleanup meeting: Ready to vote.X3J13 meeting: This issue was voted upon and ACCEPTED.