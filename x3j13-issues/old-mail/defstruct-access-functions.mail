*start*01702 00024 USfReturn-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 NOV 88 10:35:35 PSTReceived: from STONY-BROOK.SCRC.Symbolics.COM (SCRC-STONY-BROOK.ARPA) by SAIL.Stanford.EDU with TCP; 10 Nov 88  10:34:09 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 490477; Thu 10-Nov-88 13:34:05 ESTDate: Thu, 10 Nov 88 13:33 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Issue: DEFSTRUCT-ACCESS-FUNCTIONS (Version 1)To: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881110133351.7.KMP@BOBOLINK.SCRC.Symbolics.COM>Kathy recently forwarded this to me. It looks reasonable to me.I guess the question is whether anyone has an implementation inwhich it would be inappropriate to do this inlining. If so, we'llneed to explore that.-----Issue:        DEFSTRUCT-ACCESS-FUNCTIONSReferences:   DEFSTRUCT (p. 308)Category:     CHANGEEdit history: 5-Oct-88, Version 1 by ChapmanProblem Description: It is left up to the implementation whether or not the DEFSTRUCT access function is declared inline.Proposal (DEFSTRUCT-ACCESS-FUNCTIONS:INLINE) Make it mandatory that implementations declare access functions inline. Of course the declaration may or may not mean anything within the  particular implementation.Rationale: This requirement resolves user ambiguity.Current Practice:Adoption Cost: Minimal.Benefits: This clarification will give users insurance that the inline declaration has been made for the access function.Conversion Cost: Minimal.Aesthetics: None.Discussion: *start*00846 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 10 NOV 88 16:09:59 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 10 Nov 88  16:07:42 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 10 NOV 88 15:55:55 PSTDate: 10 Nov 88 15:55 PSTFrom: masinter.paSubject: Re: Issue: DEFSTRUCT-ACCESS-FUNCTIONS (Version 1)In-reply-to: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>'s message of Thu, 10 Nov 88 13:33 ESTTo: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <881110-155555-5818@Xerox>I don't see what the problem is. Why is "It is left up to theimplementation whether or not the DEFSTRUCT access function is declared inline." a problem at all?*start*01207 00024 US Return-Path: <KMP@STONY-BROOK.SCRC.Symbolics.COM>Received: from STONY-BROOK.SCRC.Symbolics.COM ([128.81.41.144]) by Xerox.COM ; 10 NOV 88 16:28:45 PSTReceived: from BOBOLINK.SCRC.Symbolics.COM by STONY-BROOK.SCRC.Symbolics.COM via CHAOS with CHAOS-MAIL id 490838; Thu 10-Nov-88 19:29:11 ESTDate: Thu, 10 Nov 88 19:28 ESTFrom: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>Subject: Re: Issue: DEFSTRUCT-ACCESS-FUNCTIONS (Version 1)To: masinter.pacc: KMP@STONY-BROOK.SCRC.Symbolics.COM, CL-Cleanup@SAIL.Stanford.EDUIn-Reply-To: <881110-155555-5818@Xerox>Message-ID: <881110192856.1.KMP@BOBOLINK.SCRC.Symbolics.COM>    Date: 10 Nov 88 15:55 PST    From: masinter.pa@Xerox.COM    I don't see what the problem is. Why is "It is left up to the    implementation whether or not the DEFSTRUCT access     function is declared inline." a problem at all?I didn't raise this issue -- Kathy did. I'm not sure where she got it.But since I happen to have endorsed it, I'll say why I did:To keep people from having to write: (PROCLAIM '(INLINE FOO-A FOO-B FOO-C)) (DEFSTRUCT FOO A B C)I've seen this in portable code a number of times and it always turns my stomach.*start*01172 00024 US Return-Path: <jonl@lucid.com>Received: from lucid.com ([192.26.25.1]) by Xerox.COM ; 10 NOV 88 22:29:05 PSTReceived: from bhopal ([192.9.200.13]) by heavens-gate.lucid.com id AA04487g; Thu, 10 Nov 88 22:27:35 PSTReceived: by bhopal id AA12178g; Thu, 10 Nov 88 22:26:17 PSTDate: Thu, 10 Nov 88 22:26:17 PSTFrom: Jon L White <jonl@lucid.com>Message-Id: <8811110626.AA12178@bhopal>To: KMP@STONY-BROOK.SCRC.Symbolics.COMCc: masinter.pa, CL-Cleanup@SAIL.Stanford.EDUIn-Reply-To: Kent M Pitman's message of Thu, 10 Nov 88 19:28 EST <881110192856.1.KMP@BOBOLINK.SCRC.Symbolics.COM>Subject: Issue: DEFSTRUCT-ACCESS-FUNCTIONS (Version 1)re: To keep people from having to write:     (PROCLAIM '(INLINE FOO-A FOO-B FOO-C))     (DEFSTRUCT FOO A B C)    I've seen this in portable code a number of times and it always turns     my stomach.Yea, ugh, bletch.  But note that the proposal now shifts the burden to the user who *doesn't* want them in line, and who has to write:     (PROCLAIM '(NOTINLINE FOO-A FOO-B FOO-C))     (DEFSTRUCT FOO A B C)However, the proposed change is probably the more commonly desired alternative.-- JonL --*start*00800 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 02 JAN 89 22:25:18 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 2 Jan 89  22:25:12 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 02 JAN 89 22:24:08 PSTDate: 2 Jan 89 22:23 PSTFrom: masinter.paSubject: Re: Issue: DEFSTRUCT-ACCESS-FUNCTIONS (Version 1)In-reply-to: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>'s message of Thu, 10 Nov 88 13:33 ESTTo: Kent M Pitman <KMP@STONY-BROOK.SCRC.Symbolics.COM>cc: CL-Cleanup@SAIL.Stanford.EDUMessage-ID: <890102-222408-1971@Xerox>I think this is fine, too. If I were being picky I'd want some minorcosmetic changes, but I don't think we have time.*start*02454 00024 US Return-Path: <CL-Cleanup-mailer@SAIL.Stanford.EDU>Redistributed: xerox-cl-cleanup^.paReceived: from SAIL.Stanford.EDU ([36.86.0.194]) by Xerox.COM ; 07 JAN 89 00:07:46 PSTReceived: from Xerox.COM by SAIL.Stanford.EDU with TCP; 7 Jan 89  00:07:36 PSTReceived: from Semillon.ms by ArpaGateway.ms ; 07 JAN 89 00:03:16 PSTDate: 7 Jan 89 00:02 PSTFrom: masinter.paSubject: Issue: DEFSTRUCT-ACCESS-FUNCTIONS-INLINE (Version 2)To: cl-cleanup@sail.stanford.edureply-to: cl-cleanup@sail.stanford.eduMessage-ID: <890107-000316-2049@Xerox>I couldn't resist changing the name of the issue lest we have anotherfuture issue also dealing with DEFSTRUCT-ACCESS-FUNCTIONS.!Issue:        DEFSTRUCT-ACCESS-FUNCTIONS-INLINEReferences:   DEFSTRUCT (p. 308)Category:     CHANGEEdit history: 5-Oct-88, Version 1 by Chapman               6-Jan-89, Version 2 by MasinterProblem Description: It is left up to the implementation whether or not the DEFSTRUCT access function is declared inline. Thus, some programmers write: (PROCLAIM '(INLINE FOO-A FOO-B FOO-C)) (DEFSTRUCT FOO A B C) in portable code in case the code is run in an implementation where the INLINE proclaimation is meaningful but not the default for DEFSTRUCT accessors.Proposal (DEFSTRUCT-ACCESS-FUNCTIONS-INLINE:YES) Make it mandatory that implementations declare access functions inline. Of course the declaration may or may not mean anything within the  particular implementation.Rationale: This requirement resolves user ambiguity.Current Practice:  We've not surveyed many implementations, but apparently they differ as to whether INLINE for defstruct accessors is the default.Cost to implementors: Minimal.Cost to users: Minimal.Benefits: This clarification will give users insurance that the inline declaration has been made for the access function.Aesthetics: Specified is simpler than not-specified.Performance Impact:   Small. Some programs might have different size/space characteristics.Discussion: We know of no implementation where such automatic inlining would be inappropriate, even in cases where INLINE is recognized. Certainly implementations are free to ignore INLINE proclaimations even selectively, i.e., ignore INLINE proclaimations only for DEFSTRUCT accessors.    The major impact of this proposal is just to make it clear that a separate (PROCLAIM '(INLINE ...)) is not necessary.  *start*02381 00024 US Date: 10 Jan 89 17:08 PSTSender: masinter.paForum:        CleanupSubject: Issue: DEFSTRUCT-ACCESS-FUNCTIONS-INLINE, (Version 2)To: X3J13@Sail.Stanford.EduReply-to: cl-cleanup@sail.stanford.eduFrom: cl-cleanup@sail.stanford.educc: masinterline-fold: NoIssue:        DEFSTRUCT-ACCESS-FUNCTIONS-INLINEReferences:   DEFSTRUCT (p. 308)Category:     CHANGEEdit history: 5-Oct-88, Version 1 by Chapman               6-Jan-89, Version 2 by MasinterProblem Description: It is left up to the implementation whether or not the DEFSTRUCT access function is declared inline. Thus, some programmers write: (PROCLAIM '(INLINE FOO-A FOO-B FOO-C)) (DEFSTRUCT FOO A B C) in portable code in case the code is run in an implementation where the INLINE proclaimation is meaningful but not the default for DEFSTRUCT accessors.Proposal (DEFSTRUCT-ACCESS-FUNCTIONS-INLINE:YES) Make it mandatory that implementations declare access functions inline. Of course the declaration may or may not mean anything within the  particular implementation.Rationale: This requirement resolves user ambiguity.Current Practice:  We've not surveyed many implementations, but apparently they differ as to whether INLINE for defstruct accessors is the default.Cost to implementors: Minimal.Cost to users: Minimal.Benefits: This clarification will give users insurance that the inline declaration has been made for the access function.Aesthetics: Specified is simpler than not-specified.Performance Impact:   Small. Some programs might have different size/space characteristics.Discussion: We know of no implementation where such automatic inlining would be inappropriate, even in cases where INLINE is recognized. Certainly implementations are free to ignore INLINE proclaimations even selectively, i.e., ignore INLINE proclaimations only for DEFSTRUCT accessors.    The major impact of this proposal is just to make it clear that a separate (PROCLAIM '(INLINE ...)) is not necessary.        TITAN 
         TITAN 
           <                     !               "                                          P             c       1       «              -              †                                   
       t              ,              K             “      ß  zº